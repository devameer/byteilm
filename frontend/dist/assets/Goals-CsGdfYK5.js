import{j as e}from"./charts-VrJjKkAO.js";import{r as t}from"./vendor-xoa7E_IC.js";import{b as i}from"./index-DX6VYCbL.js";import{F as d}from"./TrophyIcon-DQ4ORbod.js";import{F as j}from"./CheckCircleIcon-B3US9B7Y.js";import{F as w}from"./FireIcon-D00izjZa.js";import{F as M}from"./ClockIcon-Cuv4DrH5.js";import{F as G}from"./ChartBarIcon-uHSdAZ-F.js";function Z({title:a,titleId:l,...n},o){return t.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:o,"aria-labelledby":l},n),a?t.createElement("title",{id:l},a):null,t.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 18v-5.25m0 0a6.01 6.01 0 0 0 1.5-.189m-1.5.189a6.01 6.01 0 0 1-1.5-.189m3.75 7.478a12.06 12.06 0 0 1-4.5 0m3.75 2.383a14.406 14.406 0 0 1-3 0M14.25 18v-.192c0-.983.658-1.823 1.508-2.316a7.5 7.5 0 1 0-7.517 0c.85.493 1.509 1.333 1.509 2.316V18"}))}const y=t.forwardRef(Z);function A({title:a,titleId:l,...n},o){return t.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:o,"aria-labelledby":l},n),a?t.createElement("title",{id:l},a):null,t.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 4.5v15m7.5-7.5h-15"}))}const B=t.forwardRef(A);function O({title:a,titleId:l,...n},o){return t.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:o,"aria-labelledby":l},n),a?t.createElement("title",{id:l},a):null,t.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M18 18.72a9.094 9.094 0 0 0 3.741-.479 3 3 0 0 0-4.682-2.72m.94 3.198.001.031c0 .225-.012.447-.037.666A11.944 11.944 0 0 1 12 21c-2.17 0-4.207-.576-5.963-1.584A6.062 6.062 0 0 1 6 18.719m12 0a5.971 5.971 0 0 0-.941-3.197m0 0A5.995 5.995 0 0 0 12 12.75a5.995 5.995 0 0 0-5.058 2.772m0 0a3 3 0 0 0-4.681 2.72 8.986 8.986 0 0 0 3.74.477m.94-3.197a5.971 5.971 0 0 0-.94 3.197M15 6.75a3 3 0 1 1-6 0 3 3 0 0 1 6 0Zm6 3a2.25 2.25 0 1 1-4.5 0 2.25 2.25 0 0 1 4.5 0Zm-13.5 0a2.25 2.25 0 1 1-4.5 0 2.25 2.25 0 0 1 4.5 0Z"}))}const P=t.forwardRef(O);function V({title:a,titleId:l,...n},o){return t.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor","aria-hidden":"true","data-slot":"icon",ref:o,"aria-labelledby":l},n),a?t.createElement("title",{id:l},a):null,t.createElement("path",{fillRule:"evenodd",d:"M5.166 2.621v.858c-1.035.148-2.059.33-3.071.543a.75.75 0 0 0-.584.859 6.753 6.753 0 0 0 6.138 5.6 6.73 6.73 0 0 0 2.743 1.346A6.707 6.707 0 0 1 9.279 15H8.54c-1.036 0-1.875.84-1.875 1.875V19.5h-.75a2.25 2.25 0 0 0-2.25 2.25c0 .414.336.75.75.75h15a.75.75 0 0 0 .75-.75 2.25 2.25 0 0 0-2.25-2.25h-.75v-2.625c0-1.036-.84-1.875-1.875-1.875h-.739a6.706 6.706 0 0 1-1.112-3.173 6.73 6.73 0 0 0 2.743-1.347 6.753 6.753 0 0 0 6.139-5.6.75.75 0 0 0-.585-.858 47.077 47.077 0 0 0-3.07-.543V2.62a.75.75 0 0 0-.658-.744 49.22 49.22 0 0 0-6.093-.377c-2.063 0-4.096.128-6.093.377a.75.75 0 0 0-.657.744Zm0 2.629c0 1.196.312 2.32.857 3.294A5.266 5.266 0 0 1 3.16 5.337a45.6 45.6 0 0 1 2.006-.343v.256Zm13.5 0v-.256c.674.1 1.343.214 2.006.343a5.265 5.265 0 0 1-2.863 3.207 6.72 6.72 0 0 0 .857-3.294Z",clipRule:"evenodd"}))}const x=t.forwardRef(V);function X(){const[a,l]=t.useState([]),[n,o]=t.useState(null),[g,v]=t.useState([]),[p,N]=t.useState([]),[k,E]=t.useState(!0),[c,m]=t.useState({type:"all",status:"all",category:"all"}),[W,f]=t.useState(!1),[I,T]=t.useState(null);t.useEffect(()=>{h(),u(),R(),S()},[c]);const h=async()=>{try{const s=new URLSearchParams;c.type!=="all"&&s.append("type",c.type),c.status!=="all"&&s.append("status",c.status),c.category!=="all"&&s.append("category",c.category);const r=await i.get(`/goals?${s}`);l(r.data.data)}catch(s){console.error("Error fetching goals:",s)}finally{E(!1)}},u=async()=>{try{const s=await i.get("/goals/statistics");o(s.data.data)}catch(s){console.error("Error fetching statistics:",s)}},R=async()=>{try{const s=await i.get("/goals/suggestions");v(s.data.data)}catch(s){console.error("Error fetching suggestions:",s)}},S=async()=>{try{const s=await i.get("/goals/leaderboard?limit=5");N(s.data.data)}catch(s){console.error("Error fetching leaderboard:",s)}},_=async(s,r=1)=>{try{(await i.post(`/goals/${s}/increment`,{amount:r})).data.success&&(h(),u())}catch(b){console.error("Error updating progress:",b)}},C=async s=>{try{(await i.post(`/goals/${s}/complete`)).data.success&&(h(),u())}catch(r){console.error("Error completing goal:",r)}},F=s=>{switch(s){case"completed":return"bg-green-100 text-green-800";case"active":return"bg-blue-100 text-blue-800";case"failed":return"bg-red-100 text-red-800";case"cancelled":return"bg-gray-100 text-gray-800";default:return"bg-gray-100 text-gray-800"}},$=s=>{switch(s){case"completed":return"مكتمل";case"active":return"نشط";case"failed":return"فشل";case"cancelled":return"ملغى";default:return s}},L=s=>{switch(s){case"tasks":return j;case"projects":return G;case"courses":return d;case"learning":return y;case"productivity":return w;default:return d}};return k?e.jsx("div",{className:"flex items-center justify-center min-h-screen",children:e.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600"})}):e.jsxs("div",{className:"container mx-auto px-4 py-8",dir:"rtl",children:[e.jsxs("div",{className:"flex items-center justify-between mb-8",children:[e.jsxs("div",{children:[e.jsxs("h1",{className:"text-3xl font-bold text-gray-900 flex items-center gap-3",children:[e.jsx(x,{className:"h-10 w-10 text-yellow-500"}),"أهدافي"]}),e.jsx("p",{className:"text-gray-600 mt-2",children:"حدد أهدافك وحقق طموحاتك"})]}),e.jsxs("button",{onClick:()=>f(!0),className:"flex items-center gap-2 px-6 py-3 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition",children:[e.jsx(B,{className:"h-5 w-5"}),"هدف جديد"]})]}),n&&e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6 mb-8",children:[e.jsxs("div",{className:"bg-gradient-to-br from-blue-500 to-blue-600 rounded-lg shadow-md p-6 text-white",children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsx("span",{className:"text-blue-100",children:"إجمالي الأهداف"}),e.jsx(d,{className:"h-8 w-8 text-blue-100"})]}),e.jsx("p",{className:"text-4xl font-bold",children:n.total_goals})]}),e.jsxs("div",{className:"bg-gradient-to-br from-green-500 to-green-600 rounded-lg shadow-md p-6 text-white",children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsx("span",{className:"text-green-100",children:"مكتملة"}),e.jsx(j,{className:"h-8 w-8 text-green-100"})]}),e.jsx("p",{className:"text-4xl font-bold",children:n.completed_goals})]}),e.jsxs("div",{className:"bg-gradient-to-br from-yellow-500 to-orange-500 rounded-lg shadow-md p-6 text-white",children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsx("span",{className:"text-yellow-100",children:"معدل الإنجاز"}),e.jsx(w,{className:"h-8 w-8 text-yellow-100"})]}),e.jsxs("p",{className:"text-4xl font-bold",children:[n.completion_rate,"%"]})]}),e.jsxs("div",{className:"bg-gradient-to-br from-purple-500 to-purple-600 rounded-lg shadow-md p-6 text-white",children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsx("span",{className:"text-purple-100",children:"النقاط المكتسبة"}),e.jsx(x,{className:"h-8 w-8 text-purple-100"})]}),e.jsx("p",{className:"text-4xl font-bold",children:n.total_points_earned})]})]}),e.jsx("div",{className:"bg-white rounded-lg shadow-md p-6 mb-8",children:e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"النوع"}),e.jsxs("select",{value:c.type,onChange:s=>m({...c,type:s.target.value}),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500",children:[e.jsx("option",{value:"all",children:"الكل"}),e.jsx("option",{value:"personal",children:"شخصي"}),e.jsx("option",{value:"team",children:"فريق"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"الحالة"}),e.jsxs("select",{value:c.status,onChange:s=>m({...c,status:s.target.value}),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500",children:[e.jsx("option",{value:"all",children:"الكل"}),e.jsx("option",{value:"active",children:"نشط"}),e.jsx("option",{value:"completed",children:"مكتمل"}),e.jsx("option",{value:"failed",children:"فشل"}),e.jsx("option",{value:"cancelled",children:"ملغى"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"الفئة"}),e.jsxs("select",{value:c.category,onChange:s=>m({...c,category:s.target.value}),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500",children:[e.jsx("option",{value:"all",children:"الكل"}),e.jsx("option",{value:"tasks",children:"مهام"}),e.jsx("option",{value:"projects",children:"مشاريع"}),e.jsx("option",{value:"courses",children:"دورات"}),e.jsx("option",{value:"learning",children:"تعلم"}),e.jsx("option",{value:"productivity",children:"إنتاجية"}),e.jsx("option",{value:"custom",children:"مخصص"})]})]})]})}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-8",children:[e.jsxs("div",{className:"lg:col-span-2 space-y-6",children:[e.jsxs("h2",{className:"text-2xl font-bold text-gray-900",children:["أهدافي (",a.length,")"]}),a.length===0?e.jsxs("div",{className:"bg-white rounded-lg shadow-md p-12 text-center",children:[e.jsx(d,{className:"h-16 w-16 text-gray-300 mx-auto mb-4"}),e.jsx("p",{className:"text-gray-500 text-lg",children:"لا توجد أهداف بعد"}),e.jsx("button",{onClick:()=>f(!0),className:"mt-4 px-6 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700",children:"أنشئ هدفك الأول"})]}):e.jsx("div",{className:"space-y-4",children:a.map(s=>{const r=L(s.category);return e.jsxs("div",{className:"bg-white rounded-lg shadow-md p-6 hover:shadow-lg transition",children:[e.jsxs("div",{className:"flex items-start justify-between mb-4",children:[e.jsxs("div",{className:"flex items-start gap-4 flex-1",children:[e.jsx("div",{className:"p-3 bg-blue-100 rounded-lg",children:e.jsx(r,{className:"h-6 w-6 text-blue-600"})}),e.jsxs("div",{className:"flex-1",children:[e.jsx("h3",{className:"text-xl font-bold text-gray-900 mb-1",children:s.title}),e.jsx("p",{className:"text-gray-600 text-sm mb-3",children:s.description}),e.jsxs("div",{className:"flex items-center gap-4 text-sm text-gray-500",children:[e.jsx("span",{className:`px-3 py-1 rounded-full ${F(s.status)}`,children:$(s.status)}),s.type==="team"&&e.jsxs("span",{className:"flex items-center gap-1",children:[e.jsx(P,{className:"h-4 w-4"}),"فريق"]}),e.jsxs("span",{className:"flex items-center gap-1",children:[e.jsx(M,{className:"h-4 w-4"}),s.days_remaining," يوم متبقي"]})]})]})]}),s.reward_points>0&&e.jsxs("div",{className:"text-center px-4 py-2 bg-yellow-50 rounded-lg",children:[e.jsx(x,{className:"h-6 w-6 text-yellow-500 mx-auto mb-1"}),e.jsx("span",{className:"text-sm font-bold text-yellow-700",children:s.reward_points})]})]}),e.jsxs("div",{className:"mb-4",children:[e.jsxs("div",{className:"flex items-center justify-between text-sm mb-2",children:[e.jsxs("span",{className:"font-medium text-gray-700",children:["التقدم: ",s.current_value," / ",s.target_value]}),e.jsxs("span",{className:"font-bold text-blue-600",children:[s.progress_percentage,"%"]})]}),e.jsx("div",{className:"w-full bg-gray-200 rounded-full h-3 overflow-hidden",children:e.jsx("div",{className:"bg-gradient-to-r from-blue-500 to-purple-600 h-3 rounded-full transition-all duration-500",style:{width:`${Math.min(s.progress_percentage,100)}%`}})})]}),s.status==="active"&&e.jsxs("div",{className:"flex gap-2",children:[e.jsx("button",{onClick:()=>_(s.id),className:"flex-1 px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition",children:"+ تقدم"}),s.progress_percentage>=100&&e.jsx("button",{onClick:()=>C(s.id),className:"flex-1 px-4 py-2 bg-green-600 text-white rounded-lg hover:bg-green-700 transition",children:"✓ إكمال"})]})]},s.id)})})]}),e.jsxs("div",{className:"space-y-6",children:[g.length>0&&e.jsxs("div",{className:"bg-white rounded-lg shadow-md p-6",children:[e.jsxs("h3",{className:"text-lg font-bold text-gray-900 mb-4 flex items-center gap-2",children:[e.jsx(y,{className:"h-5 w-5 text-yellow-500"}),"اقتراحات أهداف"]}),e.jsx("div",{className:"space-y-3",children:g.map((s,r)=>e.jsxs("div",{className:"p-4 bg-gray-50 rounded-lg",children:[e.jsx("h4",{className:"font-semibold text-gray-900 mb-1",children:s.title}),e.jsx("p",{className:"text-sm text-gray-600 mb-2",children:s.description}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("span",{className:"text-xs text-gray-500",children:[s.reward_points," نقطة"]}),e.jsx("button",{className:"text-sm text-blue-600 hover:text-blue-700 font-medium",children:"إنشاء"})]})]},r))})]}),p.length>0&&e.jsxs("div",{className:"bg-white rounded-lg shadow-md p-6",children:[e.jsxs("h3",{className:"text-lg font-bold text-gray-900 mb-4 flex items-center gap-2",children:[e.jsx(x,{className:"h-5 w-5 text-yellow-500"}),"المتصدرون"]}),e.jsx("div",{className:"space-y-3",children:p.map((s,r)=>e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:`flex-shrink-0 w-8 h-8 rounded-full flex items-center justify-center font-bold ${r===0?"bg-yellow-100 text-yellow-700":r===1?"bg-gray-100 text-gray-700":r===2?"bg-orange-100 text-orange-700":"bg-blue-50 text-blue-700"}`,children:r+1}),e.jsxs("div",{className:"flex-1",children:[e.jsx("p",{className:"font-semibold text-gray-900",children:s.name}),e.jsxs("p",{className:"text-xs text-gray-500",children:[s.total_points," نقطة"]})]}),e.jsxs("div",{className:"text-center",children:[e.jsx("p",{className:"text-sm font-bold text-gray-900",children:s.completed_goals}),e.jsx("p",{className:"text-xs text-gray-500",children:"أهداف"})]})]},s.user_id))})]})]})]})]})}export{X as default};
