import{j as e}from"./charts-8gUIbWxc.js";import{b as n}from"./vendor-125d4HLq.js";import{b as g,u as P}from"./index-Ca2M97Gg.js";import{M as D}from"./Modal-BXJ9s2ns.js";const x={async getPrompts(){return(await g.get("/prompts")).data},async getPrompt(t){return(await g.get(`/prompts/${t}`)).data},async createPrompt(t){return(await g.post("/prompts",t)).data},async updatePrompt(t,o){return(await g.put(`/prompts/${t}`,o)).data},async deletePrompt(t){return(await g.delete(`/prompts/${t}`)).data}},L=()=>{const{darkMode:t}=P();return e.jsxs("div",{className:"space-y-6 animate-pulse",children:[e.jsxs("div",{className:"flex flex-wrap items-center justify-between gap-4",children:[e.jsxs("div",{className:"space-y-3",children:[e.jsx("div",{className:`h-8 rounded w-64 ${t?"bg-gray-700":"bg-gray-200"}`}),e.jsx("div",{className:`h-5 rounded w-96 ${t?"bg-gray-700":"bg-gray-200"}`})]}),e.jsx("div",{className:`h-10 rounded-lg w-32 ${t?"bg-gray-700":"bg-gray-200"}`})]}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 xl:grid-cols-3 gap-6",children:[1,2,3,4,5,6].map(o=>e.jsxs("div",{className:`rounded-2xl shadow-sm border p-6 transition-colors duration-300 ${t?"bg-gray-800 border-gray-700":"bg-white border-gray-200"}`,children:[e.jsx("div",{className:`h-6 rounded w-3/4 mb-4 ${t?"bg-gray-700":"bg-gray-200"}`}),e.jsxs("div",{className:"space-y-2 mb-4",children:[e.jsx("div",{className:`h-4 rounded w-full ${t?"bg-gray-700":"bg-gray-200"}`}),e.jsx("div",{className:`h-4 rounded w-full ${t?"bg-gray-700":"bg-gray-200"}`}),e.jsx("div",{className:`h-4 rounded w-5/6 ${t?"bg-gray-700":"bg-gray-200"}`})]}),e.jsxs("div",{className:"flex gap-2 pt-4 border-t border-gray-200",children:[e.jsx("div",{className:`h-9 rounded-lg flex-1 ${t?"bg-gray-700":"bg-gray-200"}`}),e.jsx("div",{className:`h-9 rounded-lg w-9 ${t?"bg-gray-700":"bg-gray-200"}`})]})]},o))})]})};function A(){const{darkMode:t}=P(),[o,h]=n.useState([]),[C,m]=n.useState(!0),[f,i]=n.useState(""),[E,c]=n.useState(!1),[p,j]=n.useState("create"),[u,b]=n.useState({title:"",content:""}),[v,N]=n.useState(null),[w,$]=n.useState(!1);n.useEffect(()=>{y()},[]);const y=async()=>{var r,d,a;m(!0),i("");try{const s=await x.getPrompts();s.success&&h(s.data)}catch(s){if((s==null?void 0:s.name)==="CanceledError"||(s==null?void 0:s.code)==="ERR_CANCELED"){m(!1);return}const l=((d=(r=s==null?void 0:s.response)==null?void 0:r.data)==null?void 0:d.message)||(s==null?void 0:s.message);l&&!l.includes("timeout")&&!l.includes("canceled")?i(l):((a=s==null?void 0:s.response)==null?void 0:a.status)>=500?i("حدث خطأ في الخادم. يرجى المحاولة لاحقاً"):s!=null&&s.response||console.error("Network error loading prompts:",s)}finally{m(!1)}},k=()=>{j("create"),N(null),b({title:"",content:""}),c(!0)},M=r=>{j("edit"),N(r.id),b({title:r.title,content:r.content}),c(!0)},S=r=>{const{name:d,value:a}=r.target;b(s=>({...s,[d]:a}))},F=async r=>{var d,a;r.preventDefault(),$(!0),i("");try{p==="create"?await x.createPrompt(u):v&&await x.updatePrompt(v,u),c(!1),await y()}catch(s){i(((a=(d=s.response)==null?void 0:d.data)==null?void 0:a.message)||"تعذر حفظ القالب")}finally{$(!1)}},O=async r=>{var a,s;if(window.confirm("سيتم حذف القالب. هل تريد المتابعة؟"))try{await x.deletePrompt(r),await y()}catch(l){i(((s=(a=l.response)==null?void 0:a.data)==null?void 0:s.message)||"تعذر حذف القالب")}};return e.jsx("div",{className:`min-h-screen transition-colors duration-300 ${t?"bg-gray-900":"bg-gray-50"}`,children:e.jsxs("div",{className:"max-w-7xl mx-auto px-4 py-6 space-y-6",children:[e.jsxs("div",{className:"flex flex-wrap items-center justify-between gap-4",children:[e.jsxs("div",{children:[e.jsx("h1",{className:`text-3xl font-bold ${t?"text-gray-100":"text-gray-900"}`,children:"قوالب الذكاء الاصطناعي"}),e.jsx("p",{className:`mt-1 ${t?"text-gray-400":"text-gray-600"}`,children:"احفظ القوالب الجاهزة لاستخدامها مع أدوات الذكاء الاصطناعي"})]}),e.jsx("button",{onClick:k,className:"px-5 py-3 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition",children:"+ قالب جديد"})]}),f&&e.jsx("div",{className:`p-4 border rounded-lg ${t?"bg-red-900/30 border-red-800 text-red-300":"bg-red-100 border-red-200 text-red-700"}`,children:f}),C?e.jsx(L,{}):o.length===0?e.jsx("div",{className:`rounded-lg shadow p-12 text-center transition-colors duration-300 ${t?"bg-gray-800 text-gray-500":"bg-white text-gray-500"}`,children:"لا توجد قوالب حتى الآن."}):e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:o.map(r=>e.jsxs("div",{className:`rounded-xl shadow-md p-6 space-y-4 border transition-colors duration-300 ${t?"bg-gray-800 border-gray-700":"bg-white border-gray-100"}`,children:[e.jsxs("div",{className:"flex items-start justify-between gap-3",children:[e.jsx("h2",{className:`text-xl font-semibold transition-colors duration-300 ${t?"text-gray-100":"text-gray-900"}`,children:r.title}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx("button",{onClick:()=>M(r),className:`text-sm hover:underline transition-colors duration-300 ${t?"text-blue-400 hover:text-blue-300":"text-blue-600 hover:text-blue-700"}`,children:"تعديل"}),e.jsx("button",{onClick:()=>O(r.id),className:`text-sm hover:underline transition-colors duration-300 ${t?"text-red-400 hover:text-red-300":"text-red-600 hover:text-red-700"}`,children:"حذف"})]})]}),e.jsx("pre",{className:`text-sm whitespace-pre-wrap leading-relaxed transition-colors duration-300 ${t?"text-gray-300":"text-gray-700"}`,children:r.content}),e.jsxs("div",{className:"text-xs transition-colors duration-300 text-gray-500",children:["آخر تحديث: ",new Date(r.updated_at).toLocaleString("ar-EG")]})]},r.id))}),e.jsx(D,{title:p==="create"?"إضافة قالب جديد":"تعديل القالب",isOpen:E,onClose:()=>c(!1),children:e.jsxs("form",{onSubmit:F,className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{htmlFor:"title",className:`block text-sm font-medium mb-2 transition-colors duration-300 ${t?"text-gray-300":"text-gray-700"}`,children:"عنوان القالب"}),e.jsx("input",{id:"title",name:"title",type:"text",value:u.title,onChange:S,required:!0,className:`w-full px-4 py-2 border rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-colors duration-300 ${t?"bg-gray-900 border-gray-700 text-gray-200":"border-gray-300"}`})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"content",className:`block text-sm font-medium mb-2 transition-colors duration-300 ${t?"text-gray-300":"text-gray-700"}`,children:"نص القالب"}),e.jsx("textarea",{id:"content",name:"content",rows:"8",value:u.content,onChange:S,required:!0,className:`w-full px-4 py-2 border rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-colors duration-300 ${t?"bg-gray-900 border-gray-700 text-gray-200":"border-gray-300"}`})]}),e.jsxs("div",{className:"flex justify-end gap-3",children:[e.jsx("button",{type:"button",onClick:()=>c(!1),className:`px-4 py-2 rounded-lg border transition-colors duration-300 ${t?"border-gray-700 text-gray-300 hover:bg-gray-700":"border-gray-300 text-gray-700 hover:bg-gray-50"}`,children:"إلغاء"}),e.jsx("button",{type:"submit",disabled:w,className:"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition disabled:opacity-50",children:w?"جاري الحفظ...":p==="create"?"حفظ القالب":"تحديث القالب"})]})]})})]})})}export{A as default};
