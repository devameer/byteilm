import{j as e}from"./charts-8gUIbWxc.js";import{b as s,c as me,i as Ne}from"./vendor-125d4HLq.js";import{u as J,b as G}from"./index-Ca2M97Gg.js";import{L as ue,C as ke}from"./LessonMediaSkeleton-SPQ9AZwF.js";function $e({title:t,titleId:l,...i},a){return s.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:a,"aria-labelledby":l},i),t?s.createElement("title",{id:l},t):null,s.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M3 13.125C3 12.504 3.504 12 4.125 12h2.25c.621 0 1.125.504 1.125 1.125v6.75C7.5 20.496 6.996 21 6.375 21h-2.25A1.125 1.125 0 0 1 3 19.875v-6.75ZM9.75 8.625c0-.621.504-1.125 1.125-1.125h2.25c.621 0 1.125.504 1.125 1.125v11.25c0 .621-.504 1.125-1.125 1.125h-2.25a1.125 1.125 0 0 1-1.125-1.125V8.625ZM16.5 4.125c0-.621.504-1.125 1.125-1.125h2.25C20.496 3 21 3.504 21 4.125v15.75c0 .621-.504 1.125-1.125 1.125h-2.25a1.125 1.125 0 0 1-1.125-1.125V4.125Z"}))}const Ce=s.forwardRef($e);function Le({title:t,titleId:l,...i},a){return s.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:a,"aria-labelledby":l},i),t?s.createElement("title",{id:l},t):null,s.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M9 12.75 11.25 15 15 9.75M21 12a9 9 0 1 1-18 0 9 9 0 0 1 18 0Z"}))}const xe=s.forwardRef(Le);function Ee({title:t,titleId:l,...i},a){return s.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:a,"aria-labelledby":l},i),t?s.createElement("title",{id:l},t):null,s.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 6v6h4.5m4.5 0a9 9 0 1 1-18 0 9 9 0 0 1 18 0Z"}))}const Se=s.forwardRef(Ee);function Me({title:t,titleId:l,...i},a){return s.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:a,"aria-labelledby":l},i),t?s.createElement("title",{id:l},t):null,s.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M5.25 5.653c0-.856.917-1.398 1.667-.986l11.54 6.347a1.125 1.125 0 0 1 0 1.972l-11.54 6.347a1.125 1.125 0 0 1-1.667-.986V5.653Z"}))}const _e=s.forwardRef(Me);function Re({title:t,titleId:l,...i},a){return s.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:a,"aria-labelledby":l},i),t?s.createElement("title",{id:l},t):null,s.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M9.813 15.904 9 18.75l-.813-2.846a4.5 4.5 0 0 0-3.09-3.09L2.25 12l2.846-.813a4.5 4.5 0 0 0 3.09-3.09L9 5.25l.813 2.846a4.5 4.5 0 0 0 3.09 3.09L15.75 12l-2.846.813a4.5 4.5 0 0 0-3.09 3.09ZM18.259 8.715 18 9.75l-.259-1.035a3.375 3.375 0 0 0-2.455-2.456L14.25 6l1.036-.259a3.375 3.375 0 0 0 2.455-2.456L18 2.25l.259 1.035a3.375 3.375 0 0 0 2.456 2.456L21.75 6l-1.035.259a3.375 3.375 0 0 0-2.456 2.456ZM16.894 20.567 16.5 21.75l-.394-1.183a2.25 2.25 0 0 0-1.423-1.423L13.5 18.75l1.183-.394a2.25 2.25 0 0 0 1.423-1.423l.394-1.183.394 1.183a2.25 2.25 0 0 0 1.423 1.423l1.183.394-1.183.394a2.25 2.25 0 0 0-1.423 1.423Z"}))}const ge=s.forwardRef(Re);function Te({title:t,titleId:l,...i},a){return s.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:a,"aria-labelledby":l},i),t?s.createElement("title",{id:l},t):null,s.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"m14.74 9-.346 9m-4.788 0L9.26 9m9.968-3.21c.342.052.682.107 1.022.166m-1.022-.165L18.16 19.673a2.25 2.25 0 0 1-2.244 2.077H8.084a2.25 2.25 0 0 1-2.244-2.077L4.772 5.79m14.456 0a48.108 48.108 0 0 0-3.478-.397m-12 .562c.34-.059.68-.114 1.022-.165m0 0a48.11 48.11 0 0 1 3.478-.397m7.5 0v-.916c0-1.18-.91-2.164-2.09-2.201a51.964 51.964 0 0 0-3.32 0c-1.18.037-2.09 1.022-2.09 2.201v.916m7.5 0a48.667 48.667 0 0 0-7.5 0"}))}const ze=s.forwardRef(Te);function Ae({title:t,titleId:l,...i},a){return s.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:a,"aria-labelledby":l},i),t?s.createElement("title",{id:l},t):null,s.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"m9.75 9.75 4.5 4.5m0-4.5-4.5 4.5M21 12a9 9 0 1 1-18 0 9 9 0 0 1 18 0Z"}))}const Pe=s.forwardRef(Ae);function ee({size:t="md",text:l="Ø¬Ø§Ø±ÙŠ Ø§Ù„ØªØ­Ù…ÙŠÙ„..."}){const i={sm:"w-6 h-6",md:"w-12 h-12",lg:"w-16 h-16"};return e.jsxs("div",{className:"flex flex-col items-center justify-center py-12",children:[e.jsxs("div",{className:`${i[t]} relative`,children:[e.jsx("div",{className:"absolute inset-0 rounded-full border-4 border-gray-200"}),e.jsx("div",{className:"absolute inset-0 rounded-full border-4 border-blue-600 border-t-transparent animate-spin"})]}),l&&e.jsx("p",{className:"mt-4 text-gray-600 text-sm font-medium",children:l})]})}const X={ar:"Ø§Ù„Ø¹Ø±Ø¨ÙŠØ©",en:"English",fr:"FranÃ§ais",es:"EspaÃ±ol",de:"Deutsch"};function Be({lessonId:t,video:l,onUploadSuccess:i,onOpenAIGenerator:a}){const{darkMode:g}=J(),[x,C]=s.useState(!1),[_,h]=s.useState(null),[N,E]=s.useState("ar"),[c,m]=s.useState(null),[R,k]=s.useState(""),[F,v]=s.useState(!1),[V,T]=s.useState(!1),n=s.useRef(null),y=async u=>{var j,Z;const f=u.target.files[0];if(!f)return;const b=f.name.split(".").pop().toLowerCase();if(!["srt","vtt"].includes(b)){h("Ù†ÙˆØ¹ Ù…Ù„Ù Ø§Ù„ØªØ±Ø¬Ù…Ø© ØºÙŠØ± Ù…Ø¯Ø¹ÙˆÙ…. Ø§Ù„Ø£Ù†ÙˆØ§Ø¹ Ø§Ù„Ù…Ø¯Ø¹ÙˆÙ…Ø©: SRT, VTT");return}const A=5*1024*1024;if(f.size>A){h("Ø­Ø¬Ù… Ù…Ù„Ù Ø§Ù„ØªØ±Ø¬Ù…Ø© ÙŠØ¬Ø¨ Ø£Ù† Ù„Ø§ ÙŠØªØ¬Ø§ÙˆØ² 5 Ù…ÙŠØ¬Ø§Ø¨Ø§ÙŠØª");return}h(null),C(!0);const D=new FormData;D.append("subtitle",f),D.append("language",N),D.append("language_name",X[N]);try{const U=await G.post(`/lessons/${t}/video/subtitles`,D,{headers:{"Content-Type":"multipart/form-data"}});U.data.success&&(i(U.data.data),n.current&&(n.current.value=""),v(!1))}catch(U){h(((Z=(j=U.response)==null?void 0:j.data)==null?void 0:Z.message)||"ÙØ´Ù„ Ø±ÙØ¹ Ù…Ù„Ù Ø§Ù„ØªØ±Ø¬Ù…Ø©")}finally{C(!1)}},$=async u=>{var f,b;if(confirm("Ù‡Ù„ Ø£Ù†Øª Ù…ØªØ£ÙƒØ¯ Ù…Ù† Ø­Ø°Ù Ù…Ù„Ù Ø§Ù„ØªØ±Ø¬Ù…Ø©ØŸ"))try{(await G.delete(`/subtitles/${u}`)).data.success&&i(null,u)}catch(A){h(((b=(f=A.response)==null?void 0:f.data)==null?void 0:b.message)||"ÙØ´Ù„ Ø­Ø°Ù Ù…Ù„Ù Ø§Ù„ØªØ±Ø¬Ù…Ø©")}},p=u=>{m(u.id),k(u.language),h(null)},L=()=>{m(null),k(""),h(null)},z=async u=>{var f,b;if(!R){h("ÙŠØ±Ø¬Ù‰ Ø§Ø®ØªÙŠØ§Ø± Ø§Ù„Ù„ØºØ©");return}C(!0),h(null);try{const A=await G.patch(`/subtitles/${u}/language`,{language:R,language_name:X[R]});A.data.success&&(i(A.data.data),m(null),k(""))}catch(A){h(((b=(f=A.response)==null?void 0:f.data)==null?void 0:b.message)||"ÙØ´Ù„ ØªØ­Ø¯ÙŠØ« Ù„ØºØ© Ø§Ù„ØªØ±Ø¬Ù…Ø©")}finally{C(!1)}};return l?e.jsxs("div",{className:"space-y-4",children:[e.jsx("h3",{className:`text-lg font-semibold ${g?"text-gray-100":"text-gray-900"}`,children:"Ø§Ù„ØªØ±Ø¬Ù…Ø§Øª"}),l.subtitles&&l.subtitles.length>0&&e.jsxs("div",{className:"space-y-2",children:[e.jsx("h4",{className:`text-sm font-medium ${g?"text-gray-300":"text-gray-700"}`,children:"Ø§Ù„ØªØ±Ø¬Ù…Ø§Øª Ø§Ù„Ù…ÙˆØ¬ÙˆØ¯Ø©:"}),l.subtitles.map(u=>e.jsx("div",{className:`p-3 border rounded ${g?"bg-gray-700 border-gray-600":"bg-gray-50 border-gray-200"}`,children:c===u.id?e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{children:[e.jsx("label",{className:`block text-sm font-medium mb-1 ${g?"text-gray-300":"text-gray-700"}`,children:"ØªØ¹Ø¯ÙŠÙ„ Ø§Ù„Ù„ØºØ©"}),e.jsx("select",{value:R,onChange:f=>k(f.target.value),className:`w-full px-3 py-2 border rounded focus:ring-2 focus:ring-blue-500 focus:border-blue-500 ${g?"bg-gray-800 border-gray-600 text-gray-100":"bg-white border-gray-300 text-gray-900"}`,disabled:x,children:Object.entries(X).map(([f,b])=>e.jsx("option",{value:f,children:b},f))})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx("button",{onClick:()=>z(u.id),disabled:x,className:"px-3 py-1 text-sm bg-green-500 text-white rounded hover:bg-green-600 disabled:opacity-50",children:x?"Ø¬Ø§Ø±ÙŠ Ø§Ù„Ø­ÙØ¸...":"Ø­ÙØ¸"}),e.jsx("button",{onClick:L,disabled:x,className:"px-3 py-1 text-sm bg-gray-500 text-white rounded hover:bg-gray-600 disabled:opacity-50",children:"Ø¥Ù„ØºØ§Ø¡"})]})]}):e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:`font-medium ${g?"text-gray-100":"text-gray-900"}`,children:u.language_name}),e.jsxs("p",{className:`text-sm ${g?"text-gray-400":"text-gray-600"}`,children:[u.file_name," â€¢ ",u.formatted_size]})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx("button",{onClick:()=>p(u),className:"px-3 py-1 text-sm bg-blue-500 text-white rounded hover:bg-blue-600",children:"ØªØ¹Ø¯ÙŠÙ„ Ø§Ù„Ù„ØºØ©"}),e.jsx("button",{onClick:()=>$(u.id),className:"px-3 py-1 text-sm bg-red-500 text-white rounded hover:bg-red-600",children:"Ø­Ø°Ù"})]})]})},u.id))]}),e.jsxs("div",{className:`rounded-lg p-4 border ${g?"border-gray-700":"border-gray-200"}`,children:[e.jsx("h4",{className:`text-sm font-medium mb-3 ${g?"text-gray-300":"text-gray-700"}`,children:"Ø¥Ø¶Ø§ÙØ© ØªØ±Ø¬Ù…Ø© Ø¬Ø¯ÙŠØ¯Ø©:"}),!F&&!V&&e.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[e.jsxs("button",{onClick:()=>T(!0),className:"flex flex-col items-center justify-center p-4 border-2 border-dashed border-purple-300 rounded-lg hover:border-purple-500 hover:bg-purple-50 transition-all",children:[e.jsx("svg",{className:"w-8 h-8 text-purple-500 mb-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9.663 17h4.673M12 3v1m6.364 1.636l-.707.707M21 12h-1M4 12H3m3.343-5.657l-.707-.707m2.828 9.9a5 5 0 117.072 0l-.548.547A3.374 3.374 0 0014 18.469V19a2 2 0 11-4 0v-.531c0-.895-.356-1.754-.988-2.386l-.548-.547z"})}),e.jsx("span",{className:"text-sm font-medium text-purple-700",children:"ØªØ­ÙˆÙŠÙ„ Ø¹Ø¨Ø± AI"}),e.jsx("span",{className:"text-xs text-gray-500 mt-1",children:"ØªÙØ±ÙŠØº ÙˆØªØ±Ø¬Ù…Ø© ØªÙ„Ù‚Ø§Ø¦ÙŠØ©"})]}),e.jsxs("button",{onClick:()=>v(!0),className:"flex flex-col items-center justify-center p-4 border-2 border-dashed border-blue-300 rounded-lg hover:border-blue-500 hover:bg-blue-50 transition-all",children:[e.jsx("svg",{className:"w-8 h-8 text-blue-500 mb-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M7 16a4 4 0 01-.88-7.903A5 5 0 1115.9 6L16 6a5 5 0 011 9.9M15 13l-3-3m0 0l-3 3m3-3v12"})}),e.jsx("span",{className:"text-sm font-medium text-blue-700",children:"Ø¥Ø¶Ø§ÙØ© Ù…Ù„Ù"}),e.jsx("span",{className:"text-xs text-gray-500 mt-1",children:"Ø±ÙØ¹ Ù…Ù„Ù VTT Ø£Ùˆ SRT"})]})]}),F&&e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsx("span",{className:"text-sm font-medium text-gray-700",children:"Ø±ÙØ¹ Ù…Ù„Ù ØªØ±Ø¬Ù…Ø©"}),e.jsx("button",{onClick:()=>{v(!1),h(null)},className:"text-xs text-gray-500 hover:text-gray-700",children:"Ø¥Ù„ØºØ§Ø¡"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Ø§Ù„Ù„ØºØ©"}),e.jsx("select",{value:N,onChange:u=>E(u.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded focus:ring-2 focus:ring-blue-500 focus:border-blue-500",disabled:x,children:Object.entries(X).map(([u,f])=>e.jsx("option",{value:u,children:f},u))})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Ù…Ù„Ù Ø§Ù„ØªØ±Ø¬Ù…Ø©"}),e.jsx("input",{ref:n,type:"file",accept:".srt,.vtt",onChange:y,disabled:x,className:"w-full px-3 py-2 border border-gray-300 rounded focus:ring-2 focus:ring-blue-500 focus:border-blue-500"}),e.jsx("p",{className:"mt-1 text-xs text-gray-500",children:"Ø§Ù„Ø£Ù†ÙˆØ§Ø¹ Ø§Ù„Ù…Ø¯Ø¹ÙˆÙ…Ø©: SRT, VTT (Ø­ØªÙ‰ 5 Ù…ÙŠØ¬Ø§Ø¨Ø§ÙŠØª)"})]}),x&&e.jsxs("div",{className:"flex items-center justify-center py-2",children:[e.jsx("div",{className:"animate-spin rounded-full h-6 w-6 border-b-2 border-blue-500"}),e.jsx("span",{className:"mr-2 text-sm text-gray-600",children:"Ø¬Ø§Ø±ÙŠ Ø§Ù„Ø±ÙØ¹..."})]})]}),V&&e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsx("span",{className:"text-sm font-medium text-gray-700",children:"Ø§Ù„ØªØ­ÙˆÙŠÙ„ Ø¹Ø¨Ø± AI"}),e.jsx("button",{onClick:()=>{T(!1),h(null)},className:"text-xs text-gray-500 hover:text-gray-700",children:"Ø¥Ù„ØºØ§Ø¡"})]}),e.jsxs("div",{className:"p-4 bg-gradient-to-r from-purple-50 to-indigo-50 border border-purple-200 rounded-lg",children:[e.jsx("p",{className:"text-sm text-gray-700 mb-3",children:"Ø§Ø³ØªØ®Ø¯Ù… Ø§Ù„Ø°ÙƒØ§Ø¡ Ø§Ù„Ø§ØµØ·Ù†Ø§Ø¹ÙŠ Ù„ØªÙØ±ÙŠØº Ø§Ù„ÙÙŠØ¯ÙŠÙˆ ØªÙ„Ù‚Ø§Ø¦ÙŠØ§Ù‹ ÙˆØ¥Ù†Ø´Ø§Ø¡ Ø§Ù„ØªØ±Ø¬Ù…Ø§Øª"}),a?e.jsx("button",{onClick:()=>{T(!1),a()},className:"w-full px-4 py-2 bg-gradient-to-r from-purple-500 to-indigo-600 text-white rounded-lg hover:from-purple-600 hover:to-indigo-700 font-medium transition-all",children:"Ø§Ù†ØªÙ‚Ù„ Ø¥Ù„Ù‰ Ø£Ø¯Ø§Ø© Ø§Ù„ØªÙØ±ÙŠØº Ø§Ù„ØªÙ„Ù‚Ø§Ø¦ÙŠ"}):e.jsx("p",{className:"text-xs text-gray-600 text-center",children:"ÙŠÙˆØ¬Ø¯ Ø£Ø¯Ø§Ø© Ø§Ù„ØªÙØ±ÙŠØº Ø§Ù„ØªÙ„Ù‚Ø§Ø¦ÙŠ ÙÙŠ Ù†ÙØ³ Ø§Ù„ØµÙØ­Ø© Ø£Ø¹Ù„Ø§Ù‡"})]})]})]}),_&&e.jsx("div",{className:"p-3 bg-red-50 border border-red-200 rounded text-red-700 text-sm",children:_})]}):e.jsx("div",{className:`p-4 rounded border ${g?"bg-yellow-900/30 border-yellow-800 text-yellow-300":"bg-yellow-50 border-yellow-200 text-yellow-700"}`,children:"ÙŠØ¬Ø¨ Ø±ÙØ¹ Ø§Ù„ÙÙŠØ¯ÙŠÙˆ Ø£ÙˆÙ„Ø§Ù‹ Ù‚Ø¨Ù„ Ø¥Ø¶Ø§ÙØ© Ø§Ù„ØªØ±Ø¬Ù…Ø§Øª"})}function Ie({lessonId:t,video:l,onSuccess:i}){const{darkMode:a}=J(),[g,x]=s.useState(!1),[C,_]=s.useState(!1),[h,N]=s.useState(null),[E,c]=s.useState(null),[m,R]=s.useState(""),[k,F]=s.useState(null),[v,V]=s.useState("idle"),[T,n]=s.useState(!1),[y,$]=s.useState([]),[p,L]=s.useState(!1),[z,u]=s.useState(0),[f,b]=s.useState(""),A=s.useRef(null);s.useEffect(()=>()=>{A.current&&clearInterval(A.current)},[]);const D=[{code:"ar",name:"Ø§Ù„Ø¹Ø±Ø¨ÙŠØ©"},{code:"en",name:"English"},{code:"fr",name:"FranÃ§ais"},{code:"es",name:"EspaÃ±ol"},{code:"de",name:"Deutsch"},{code:"it",name:"Italiano"},{code:"pt",name:"PortuguÃªs"},{code:"ru",name:"Ð ÑƒÑÑÐºÐ¸Ð¹"},{code:"zh",name:"ä¸­æ–‡"},{code:"ja",name:"æ—¥æœ¬èªž"},{code:"ko",name:"í•œêµ­ì–´"},{code:"tr",name:"TÃ¼rkÃ§e"},{code:"hi",name:"à¤¹à¤¿à¤¨à¥à¤¦à¥€"},{code:"ur",name:"Ø§Ø±Ø¯Ùˆ"}],j=async()=>{var w,I;if(!l){N("ÙŠØ¬Ø¨ Ø±ÙØ¹ Ø§Ù„ÙÙŠØ¯ÙŠÙˆ Ø£ÙˆÙ„Ø§Ù‹");return}try{x(!0),N(null),c(null),V("transcribing"),u(0),b("Ø¬Ø§Ø±ÙŠ Ø§Ù„Ø§ØªØµØ§Ù„...");const S=setInterval(()=>{u(M=>{if(M<90){const O=Math.random()*8+2,B=Math.min(M+O,90);return B<30?b("Ø§Ø³ØªØ®Ø±Ø§Ø¬ Ø§Ù„ØµÙˆØª Ù…Ù† Ø§Ù„ÙÙŠØ¯ÙŠÙˆ..."):B<50?b("ØªØ­ÙˆÙŠÙ„ Ø§Ù„ØµÙˆØª..."):B<80?b("ØªÙØ±ÙŠØº Ø§Ù„ØµÙˆØª Ø¨Ø§Ù„Ø°ÙƒØ§Ø¡ Ø§Ù„Ø§ØµØ·Ù†Ø§Ø¹ÙŠ..."):b("Ø¥Ù†Ù‡Ø§Ø¡ Ø§Ù„Ø¹Ù…Ù„ÙŠØ©..."),B}return M})},1e3),P=await G.post(`/lessons/${t}/video/transcribe`);if(clearInterval(S),u(100),b("Ø§ÙƒØªÙ…Ù„ Ø§Ù„ØªÙØ±ÙŠØº!"),P.data.success){const M=P.data.data.transcript;R(M),await Z(M)}}catch(S){N(((I=(w=S.response)==null?void 0:w.data)==null?void 0:I.message)||"ÙØ´Ù„ ÙÙŠ ØªÙØ±ÙŠØº Ø§Ù„ÙÙŠØ¯ÙŠÙˆ"),V("idle"),x(!1)}},Z=async w=>{var I,S,P,M;try{const O=await G.post(`/lessons/${t}/video/detect-language`,{text:w});if(O.data.success){const B={code:O.data.data.language_code,name:O.data.data.language_name};F(B),_(!0);try{const Q=await G.post(`/lessons/${t}/video/save-as-subtitle`,{text:w,language:B.code,language_name:B.name});Q.data.success&&(c(`ØªÙ… Ø§Ù„ØªÙØ±ÙŠØº Ø¨Ù†Ø¬Ø§Ø­! Ø§Ù„Ù„ØºØ© Ø§Ù„Ù…ÙƒØªØ´ÙØ©: ${B.name}`),i&&i(Q.data.data))}catch(Q){N("ØªÙ… Ø§Ù„ØªÙØ±ÙŠØº Ø¨Ù†Ø¬Ø§Ø­ Ù„ÙƒÙ† ÙØ´Ù„ Ø­ÙØ¸ Ø§Ù„ØªØ±Ø¬Ù…Ø©: "+(((S=(I=Q.response)==null?void 0:I.data)==null?void 0:S.message)||"Ø®Ø·Ø£ ØºÙŠØ± Ù…Ø¹Ø±ÙˆÙ"))}finally{_(!1)}}}catch{F({code:"en",name:"English"}),_(!0);try{const B=await G.post(`/lessons/${t}/video/save-as-subtitle`,{text:w,language:"en",language_name:"English"});B.data.success&&(c("ØªÙ… Ø§Ù„ØªÙØ±ÙŠØº ÙˆØ­ÙØ¸Ù‡ ÙƒÙ€ English (Ø§ÙØªØ±Ø§Ø¶ÙŠ)"),i&&i(B.data.data))}catch(B){N("ØªÙ… Ø§Ù„ØªÙØ±ÙŠØº Ø¨Ù†Ø¬Ø§Ø­ Ù„ÙƒÙ† ÙØ´Ù„ Ø­ÙØ¸ Ø§Ù„ØªØ±Ø¬Ù…Ø©: "+(((M=(P=B.response)==null?void 0:P.data)==null?void 0:M.message)||"Ø®Ø·Ø£ ØºÙŠØ± Ù…Ø¹Ø±ÙˆÙ"))}finally{_(!1)}}V("transcribed"),x(!1)},U=async()=>{var w,I;if(y.length===0){N("ÙŠØ±Ø¬Ù‰ Ø§Ø®ØªÙŠØ§Ø± Ù„ØºØ© ÙˆØ§Ø­Ø¯Ø© Ø¹Ù„Ù‰ Ø§Ù„Ø£Ù‚Ù„");return}try{L(!0),N(null),c(null);let S=0,P=0;for(const M of y)try{const O=await G.post(`/lessons/${t}/video/translate`,{text:m,target_language:M.code,target_language_name:M.name});if(O.data.success){const B=await G.post(`/lessons/${t}/video/save-as-subtitle`,{text:O.data.data.translated_text,language:M.code,language_name:M.name});B.data.success?(S++,i&&i(B.data.data)):P++}else P++}catch(O){P++,console.error(`Failed to translate to ${M.name}:`,O)}S>0?(c(`ØªÙ… Ø¥Ø¶Ø§ÙØ© ${S} ØªØ±Ø¬Ù…Ø© Ø¨Ù†Ø¬Ø§Ø­!${P>0?` (ÙØ´Ù„ ${P})`:""}`),$([]),n(!1)):N("ÙØ´Ù„ ÙÙŠ Ø¥Ø¶Ø§ÙØ© Ø§Ù„ØªØ±Ø¬Ù…Ø§Øª")}catch(S){N(((I=(w=S.response)==null?void 0:w.data)==null?void 0:I.message)||"Ø­Ø¯Ø« Ø®Ø·Ø£ Ø£Ø«Ù†Ø§Ø¡ Ø¥Ø¶Ø§ÙØ© Ø§Ù„ØªØ±Ø¬Ù…Ø§Øª")}finally{L(!1)}},q=w=>{k&&w.code===k.code||$(I=>I.find(P=>P.code===w.code)?I.filter(P=>P.code!==w.code):[...I,w])},te=w=>{navigator.clipboard.writeText(w),alert("ØªÙ… Ø§Ù„Ù†Ø³Ø® Ø¥Ù„Ù‰ Ø§Ù„Ø­Ø§ÙØ¸Ø©")},se=()=>{R(""),F(null),V("idle"),N(null),c(null),n(!1),$([])};return e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("h3",{className:`text-lg font-semibold ${a?"text-gray-100":"text-gray-900"}`,children:"ØªÙØ±ÙŠØº Ø§Ù„ÙÙŠØ¯ÙŠÙˆ ÙˆØ¥Ù†Ø´Ø§Ø¡ ØªØ±Ø¬Ù…Ø§Øª"}),v!=="idle"&&e.jsx("button",{onClick:se,className:`text-sm transition-colors ${a?"text-gray-400 hover:text-gray-200":"text-gray-500 hover:text-gray-700"}`,children:"Ø¥Ø¹Ø§Ø¯Ø© ØªØ¹ÙŠÙŠÙ†"})]}),h&&e.jsx("div",{className:`rounded-lg p-4 text-sm border ${a?"bg-red-900/30 border-red-800 text-red-300":"bg-red-50 border-red-200 text-red-700"}`,children:h}),E&&e.jsx("div",{className:`rounded-lg p-4 text-sm border ${a?"bg-green-900/30 border-green-800 text-green-300":"bg-green-50 border-green-200 text-green-700"}`,children:E}),!l&&e.jsx("div",{className:`rounded-lg p-4 text-sm border ${a?"bg-yellow-900/30 border-yellow-800 text-yellow-300":"bg-yellow-50 border-yellow-200 text-yellow-700"}`,children:"ÙŠØ¬Ø¨ Ø±ÙØ¹ Ø§Ù„ÙÙŠØ¯ÙŠÙˆ Ø£ÙˆÙ„Ø§Ù‹ Ù‚Ø¨Ù„ Ø§Ø³ØªØ®Ø¯Ø§Ù… Ø®Ø§ØµÙŠØ© Ø§Ù„ØªÙØ±ÙŠØº Ø§Ù„ØªÙ„Ù‚Ø§Ø¦ÙŠ"}),l&&v==="idle"&&e.jsxs("div",{className:`rounded-xl p-6 border-2 border-dashed ${a?"border-purple-700 bg-purple-900/20":"border-purple-200 bg-purple-50/50"}`,children:[e.jsxs("div",{className:"text-center mb-6",children:[e.jsx("div",{className:`inline-flex items-center justify-center w-16 h-16 rounded-full mb-4 ${a?"bg-purple-800":"bg-purple-100"}`,children:e.jsx("svg",{className:`w-8 h-8 ${a?"text-purple-300":"text-purple-600"}`,fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9.663 17h4.673M12 3v1m6.364 1.636l-.707.707M21 12h-1M4 12H3m3.343-5.657l-.707-.707m2.828 9.9a5 5 0 117.072 0l-.548.547A3.374 3.374 0 0014 18.469V19a2 2 0 11-4 0v-.531c0-.895-.356-1.754-.988-2.386l-.548-.547z"})})}),e.jsx("h4",{className:`text-xl font-bold mb-2 ${a?"text-gray-100":"text-gray-900"}`,children:"ØªÙØ±ÙŠØº ØªÙ„Ù‚Ø§Ø¦ÙŠ Ø¨Ø§Ù„Ø°ÙƒØ§Ø¡ Ø§Ù„Ø§ØµØ·Ù†Ø§Ø¹ÙŠ"}),e.jsx("p",{className:`text-sm ${a?"text-gray-400":"text-gray-600"}`,children:"3 Ø®Ø·ÙˆØ§Øª Ø¨Ø³ÙŠØ·Ø© ÙÙ‚Ø·"})]}),e.jsxs("div",{className:"grid grid-cols-3 gap-4 mb-6",children:[e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:`inline-flex items-center justify-center w-10 h-10 rounded-full mb-2 ${a?"bg-blue-800 text-blue-300":"bg-blue-100 text-blue-600"}`,children:e.jsx("span",{className:"font-bold",children:"1"})}),e.jsx("p",{className:`text-xs ${a?"text-gray-400":"text-gray-600"}`,children:"ØªÙØ±ÙŠØº Ø§Ù„ØµÙˆØª"})]}),e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:`inline-flex items-center justify-center w-10 h-10 rounded-full mb-2 ${a?"bg-green-800 text-green-300":"bg-green-100 text-green-600"}`,children:e.jsx("span",{className:"font-bold",children:"2"})}),e.jsx("p",{className:`text-xs ${a?"text-gray-400":"text-gray-600"}`,children:"Ø­ÙØ¸ Ø§Ù„ØªØ±Ø¬Ù…Ø©"})]}),e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:`inline-flex items-center justify-center w-10 h-10 rounded-full mb-2 ${a?"bg-purple-800 text-purple-300":"bg-purple-100 text-purple-600"}`,children:e.jsx("span",{className:"font-bold",children:"3"})}),e.jsx("p",{className:`text-xs ${a?"text-gray-400":"text-gray-600"}`,children:"ØªØ±Ø¬Ù…Ø© Ù„Ù„ØºØ§Øª"})]})]}),e.jsx("button",{onClick:j,disabled:g,className:"w-full px-6 py-4 bg-gradient-to-r from-purple-600 to-indigo-600 text-white rounded-xl hover:from-purple-700 hover:to-indigo-700 disabled:opacity-50 disabled:cursor-not-allowed font-bold text-lg transition-all shadow-lg hover:shadow-xl flex items-center justify-center gap-3",children:g?e.jsxs(e.Fragment,{children:[e.jsx(ee,{}),"Ø¬Ø§Ø±ÙŠ Ø§Ù„ØªÙØ±ÙŠØº..."]}):e.jsxs(e.Fragment,{children:[e.jsxs("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:[e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M14.752 11.168l-3.197-2.132A1 1 0 0010 9.87v4.263a1 1 0 001.555.832l3.197-2.132a1 1 0 000-1.664z"}),e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})]}),"Ø§Ø¨Ø¯Ø£ Ø§Ù„ØªÙØ±ÙŠØº Ø§Ù„Ø¢Ù†"]})}),e.jsxs("div",{className:`mt-4 flex items-center justify-center gap-4 text-xs ${a?"text-gray-500":"text-gray-400"}`,children:[e.jsxs("span",{className:"flex items-center gap-1",children:[e.jsx("svg",{className:"w-4 h-4",fill:"currentColor",viewBox:"0 0 20 20",children:e.jsx("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zm3.707-9.293a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z",clipRule:"evenodd"})}),"Ø¯Ù‚Ø© Ø¹Ø§Ù„ÙŠØ©"]}),e.jsxs("span",{className:"flex items-center gap-1",children:[e.jsx("svg",{className:"w-4 h-4",fill:"currentColor",viewBox:"0 0 20 20",children:e.jsx("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zm3.707-9.293a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z",clipRule:"evenodd"})}),"ØªÙˆÙ‚ÙŠØª Ø¯Ù‚ÙŠÙ‚"]}),e.jsxs("span",{className:"flex items-center gap-1",children:[e.jsx("svg",{className:"w-4 h-4",fill:"currentColor",viewBox:"0 0 20 20",children:e.jsx("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zm3.707-9.293a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z",clipRule:"evenodd"})}),"Ø­ÙØ¸ ØªÙ„Ù‚Ø§Ø¦ÙŠ"]})]})]}),v==="transcribing"&&e.jsxs("div",{className:`rounded-lg p-6 border ${a?"bg-blue-900/30 border-blue-800":"bg-blue-50 border-blue-200"}`,children:[e.jsx("div",{className:"flex justify-center",children:e.jsx(ee,{})}),e.jsx("p",{className:`mt-4 font-medium text-center ${a?"text-blue-300":"text-blue-700"}`,children:f||"Ø¬Ø§Ø±ÙŠ ØªÙØ±ÙŠØº Ø§Ù„ÙÙŠØ¯ÙŠÙˆ..."}),e.jsxs("div",{className:"mt-4",children:[e.jsxs("div",{className:`flex justify-between text-sm mb-1 ${a?"text-blue-400":"text-blue-600"}`,children:[e.jsx("span",{children:"Ø§Ù„ØªÙ‚Ø¯Ù…"}),e.jsxs("span",{children:[z,"%"]})]}),e.jsx("div",{className:`w-full rounded-full h-2.5 ${a?"bg-blue-900":"bg-blue-100"}`,children:e.jsx("div",{className:"bg-blue-600 h-2.5 rounded-full transition-all duration-500",style:{width:`${z}%`}})})]}),e.jsx("p",{className:`mt-4 text-sm text-center ${a?"text-blue-400":"text-blue-600"}`,children:"Ù‡Ø°Ù‡ Ø§Ù„Ø¹Ù…Ù„ÙŠØ© Ù‚Ø¯ ØªØ³ØªØºØ±Ù‚ Ø¹Ø¯Ø© Ø¯Ù‚Ø§Ø¦Ù‚ Ø­Ø³Ø¨ Ø·ÙˆÙ„ Ø§Ù„ÙÙŠØ¯ÙŠÙˆ"}),e.jsx("p",{className:"mt-2 text-xs text-center text-blue-500",children:"Ù„Ø§ ØªÙ‚Ù… Ø¨Ø¥ØºÙ„Ø§Ù‚ Ù‡Ø°Ù‡ Ø§Ù„ØµÙØ­Ø© Ø£Ø«Ù†Ø§Ø¡ Ø§Ù„ØªÙØ±ÙŠØº"})]}),v==="transcribed"&&e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:`flex items-center gap-3 p-4 rounded-xl border ${a?"bg-green-900/30 border-green-800":"bg-green-50 border-green-200"}`,children:[e.jsx("div",{className:`w-10 h-10 rounded-full flex items-center justify-center ${a?"bg-green-800":"bg-green-100"}`,children:e.jsx("svg",{className:`w-6 h-6 ${a?"text-green-300":"text-green-600"}`,fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5 13l4 4L19 7"})})}),e.jsxs("div",{children:[e.jsx("p",{className:`font-semibold ${a?"text-green-300":"text-green-800"}`,children:"ØªÙ… Ø§Ù„ØªÙØ±ÙŠØº Ø¨Ù†Ø¬Ø§Ø­!"}),k&&e.jsxs("p",{className:`text-sm ${a?"text-green-400":"text-green-600"}`,children:["Ø§Ù„Ù„ØºØ© Ø§Ù„Ù…ÙƒØªØ´ÙØ©: ",k.name]})]})]}),e.jsxs("details",{className:`rounded-xl overflow-hidden border ${a?"border-gray-700":"border-gray-200"}`,children:[e.jsxs("summary",{className:`px-4 py-3 cursor-pointer flex items-center justify-between ${a?"bg-gray-700 hover:bg-gray-650":"bg-gray-50 hover:bg-gray-100"}`,children:[e.jsx("span",{className:`font-medium ${a?"text-gray-200":"text-gray-800"}`,children:"Ø¹Ø±Ø¶ Ø§Ù„Ù†Øµ Ø§Ù„Ù…ÙØ±Øº"}),e.jsx("div",{className:"flex gap-2",children:e.jsx("button",{onClick:w=>{w.preventDefault(),te(m)},className:`text-sm px-3 py-1 rounded transition-colors ${a?"bg-gray-600 text-gray-200 hover:bg-gray-500":"bg-white border text-gray-700 hover:bg-gray-50"}`,children:"Ù†Ø³Ø®"})})]}),e.jsx("div",{className:`p-4 max-h-64 overflow-y-auto ${a?"bg-gray-800":"bg-white"}`,children:e.jsx("pre",{className:`whitespace-pre-wrap text-sm font-mono ${a?"text-gray-300":"text-gray-700"}`,children:m})})]}),!T&&e.jsxs("button",{onClick:()=>n(!0),className:"w-full px-4 py-3 bg-gradient-to-r from-green-500 to-teal-600 text-white rounded-lg hover:from-green-600 hover:to-teal-700 font-medium transition-all shadow-md hover:shadow-lg flex items-center justify-center gap-2",children:[e.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 4v16m8-8H4"})}),"Ø¥Ø¶Ø§ÙØ© ØªØ±Ø¬Ù…Ø§Øª Ù„Ù„ØºØ§Øª Ø£Ø®Ø±Ù‰"]}),T&&e.jsxs("div",{className:"border rounded-lg overflow-hidden bg-white",children:[e.jsxs("div",{className:"bg-gradient-to-r from-green-50 to-teal-50 px-4 py-3 border-b",children:[e.jsx("h4",{className:"font-medium text-green-800",children:"Ø§Ø®ØªØ± Ø§Ù„Ù„ØºØ§Øª Ù„Ù„ØªØ±Ø¬Ù…Ø©"}),e.jsx("p",{className:"text-sm text-green-600 mt-1",children:"Ø§Ø®ØªØ± Ù„ØºØ© Ø£Ùˆ Ø£ÙƒØ«Ø± Ù„ØªØ±Ø¬Ù…Ø© Ø§Ù„Ù†Øµ Ø§Ù„Ø£ØµÙ„ÙŠ Ø¥Ù„ÙŠÙ‡Ø§"})]}),e.jsxs("div",{className:"p-4",children:[e.jsx("div",{className:"grid grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-2",children:D.map(w=>{const I=k&&w.code===k.code,S=y.find(P=>P.code===w.code);return e.jsxs("button",{onClick:()=>q(w),disabled:I,className:`px-3 py-2 rounded-lg text-sm font-medium transition-all ${I?"bg-gray-100 text-gray-400 cursor-not-allowed":S?"bg-green-500 text-white hover:bg-green-600":"bg-gray-50 text-gray-700 hover:bg-gray-100 border border-gray-200"}`,children:[w.name,I&&" (Ø§Ù„Ø£ØµÙ„ÙŠØ©)"]},w.code)})}),e.jsxs("div",{className:"flex gap-2 mt-4 pt-4 border-t",children:[e.jsx("button",{onClick:U,disabled:p||y.length===0,className:"flex-1 px-4 py-2 bg-green-500 text-white rounded-lg hover:bg-green-600 disabled:opacity-50 disabled:cursor-not-allowed font-medium",children:p?e.jsxs("span",{className:"flex items-center justify-center gap-2",children:[e.jsx(ee,{}),"Ø¬Ø§Ø±ÙŠ Ø§Ù„ØªØ±Ø¬Ù…Ø©..."]}):`ØªØ±Ø¬Ù…Ø© Ø¥Ù„Ù‰ ${y.length} Ù„ØºØ©`}),e.jsx("button",{onClick:()=>{n(!1),$([])},disabled:p,className:"px-4 py-2 bg-gray-200 text-gray-700 rounded-lg hover:bg-gray-300 disabled:opacity-50",children:"Ø¥Ù„ØºØ§Ø¡"})]})]})]})]}),v==="idle"&&l&&e.jsx("p",{className:`text-xs text-center ${a?"text-gray-600":"text-gray-400"}`,children:"ÙŠØ³ØªØ®Ø¯Ù… AssemblyAI â€¢ ØªÙˆÙ‚ÙŠØªØ§Øª Ø¯Ù‚ÙŠÙ‚Ø© (~400ms) â€¢ Ø­ÙØ¸ ØªÙ„Ù‚Ø§Ø¦ÙŠ"})]})}function Fe({video:t,darkMode:l}){var oe;const i=s.useRef(null),a=s.useRef(null),[g,x]=s.useState(!1),[C,_]=s.useState(0),[h,N]=s.useState(0),[E,c]=s.useState(1),[m,R]=s.useState(!1),[k,F]=s.useState(1),[v,V]=s.useState(null),[T,n]=s.useState(!1),[y,$]=s.useState(!0),[p,L]=s.useState(!1),[z,u]=s.useState(!1),[f,b]=s.useState(!1),[A,D]=s.useState(0),[j,Z]=s.useState({show:!1,direction:null,side:null}),[U,q]=s.useState(!1),[te,se]=s.useState(!1),[w,I]=s.useState(""),S=s.useRef(null),P=s.useRef(0),M=s.useRef(null),O=s.useRef(null),B=()=>{$(!0),S.current&&clearTimeout(S.current),g&&(S.current=setTimeout(()=>{$(!1)},3e3))};s.useEffect(()=>{const r=i.current;if(!r)return;const o=()=>{N(r.duration),console.log("âœ… Video ready:",r.duration)},d=()=>{_(r.currentTime)},H=()=>x(!0),W=()=>{x(!1),$(!0)},Y=()=>L(!0),ie=()=>L(!1),de=je=>{console.error("âŒ Video error:",r.error)},ce=()=>{if(r.buffered.length>0){const we=r.buffered.end(r.buffered.length-1)/r.duration*100;D(we)}};return r.addEventListener("loadedmetadata",o),r.addEventListener("timeupdate",d),r.addEventListener("play",H),r.addEventListener("pause",W),r.addEventListener("waiting",Y),r.addEventListener("canplay",ie),r.addEventListener("error",de),r.addEventListener("progress",ce),()=>{r.removeEventListener("loadedmetadata",o),r.removeEventListener("timeupdate",d),r.removeEventListener("play",H),r.removeEventListener("pause",W),r.removeEventListener("waiting",Y),r.removeEventListener("canplay",ie),r.removeEventListener("error",de),r.removeEventListener("progress",ce),S.current&&clearTimeout(S.current)}},[g]),s.useEffect(()=>{const r=i.current;if(!r||!t)return;const o=t.proxy_video_url||t.video_url;o&&r.src!==o&&(r.load(),console.log("ðŸŽ¬ Video preload started:",o))},[t]),s.useEffect(()=>{if(t.subtitles&&t.subtitles.length>0){const r=t.subtitles.find(o=>o.language==="ar");r&&V(r)}},[t.subtitles]),s.useEffect(()=>{const r=i.current;if(!r)return;const o=r.textTracks;for(let W=0;W<o.length;W++)o[W].mode="hidden";let d=null;if(v){for(let W=0;W<o.length;W++)if(o[W].language===v.language){d=o[W],d.mode="hidden";break}}const H=()=>{if(d&&d.activeCues&&d.activeCues.length>0){const W=d.activeCues[0].text;I(W)}else I("")};return d&&d.addEventListener("cuechange",H),()=>{d&&d.removeEventListener("cuechange",H)}},[v]),s.useEffect(()=>{const r=()=>{n(!!document.fullscreenElement)};return document.addEventListener("fullscreenchange",r),()=>document.removeEventListener("fullscreenchange",r)},[]),s.useEffect(()=>{const r=o=>{var H;const d=i.current;if(d&&!(o.target.tagName==="INPUT"||o.target.tagName==="TEXTAREA"))switch(o.key){case" ":case"k":o.preventDefault(),d.paused?d.play():d.pause();break;case"ArrowLeft":o.preventDefault(),d.currentTime=Math.max(0,d.currentTime-10);break;case"ArrowRight":o.preventDefault(),d.currentTime=Math.min(d.duration,d.currentTime+10);break;case"ArrowUp":o.preventDefault(),d.volume=Math.min(1,d.volume+.1),c(d.volume);break;case"ArrowDown":o.preventDefault(),d.volume=Math.max(0,d.volume-.1),c(d.volume);break;case"m":case"M":o.preventDefault(),d.muted=!d.muted,R(d.muted);break;case"f":case"F":o.preventDefault(),document.fullscreenElement?document.exitFullscreen():(H=a.current)==null||H.requestFullscreen();break;case"p":case"P":o.preventDefault(),document.pictureInPictureElement?document.exitPictureInPicture():document.pictureInPictureEnabled&&d.requestPictureInPicture();break}};return document.addEventListener("keydown",r),()=>document.removeEventListener("keydown",r)},[]);const Q=()=>{const r=i.current;r&&(g?r.pause():r.play())},K=r=>{const o=i.current;if(!o)return;const d=o.currentTime+r;o.currentTime=Math.max(0,Math.min(o.duration||1/0,d))},he=r=>{const o=i.current;if(!o)return;const d=parseFloat(r.target.value);o.currentTime=d,_(d)},be=r=>{const o=parseFloat(r.target.value);c(o),i.current&&(i.current.volume=o),o>0&&R(!1)},pe=()=>{const r=i.current;r&&(r.muted=!m,R(!m))},fe=r=>{const o=i.current;o&&(o.playbackRate=r,F(r),b(!1))},re=()=>{const r=a.current;r&&(document.fullscreenElement?(document.exitFullscreen(),n(!1)):(r.requestFullscreen(),n(!0)))},ae=r=>{if(!r||isNaN(r))return"0:00";const o=Math.floor(r/60),d=Math.floor(r%60);return`${o}:${d<10?"0":""}${d}`},ne=(r,o)=>{const d=Date.now(),H=d-P.current,W=window.matchMedia("(hover: hover)").matches;M.current&&(clearTimeout(M.current),M.current=null),H<300&&H>0&&O.current===o?W?re():(K(o==="right"?10:-10),Z({show:!0,direction:o==="right"?"forward":"backward",side:o}),setTimeout(()=>Z({show:!1,direction:null,side:null}),500)):M.current=setTimeout(()=>{Q(),B(),M.current=null},250),P.current=d,O.current=o},ye=async()=>{const r=i.current;if(r)try{document.pictureInPictureElement?(await document.exitPictureInPicture(),q(!1)):document.pictureInPictureEnabled&&(await r.requestPictureInPicture(),q(!0))}catch(o){console.error("PiP error:",o)}},ve=t.proxy_video_url||t.video_url,le=h>0?C/h*100:0;return e.jsxs("div",{ref:a,className:`select-none
 relative group outline-none ${T?"fixed inset-0 z-50 bg-black":""}`,dir:"ltr",tabIndex:0,onMouseMove:B,onMouseLeave:()=>g&&$(!1),children:[e.jsxs("div",{className:`relative rounded-lg overflow-hidden ${l?"bg-gray-900":"bg-black"} ${T?"h-full w-full flex items-center justify-center":""}`,children:[e.jsxs("video",{ref:i,className:`w-full ${T?"h-full object-contain":""}`,crossOrigin:"anonymous",playsInline:!0,preload:"auto",style:{width:"100%",minHeight:T?"auto":"400px",maxHeight:T?"100vh":"600px",aspectRatio:"16/9",backgroundColor:"#000",cursor:"pointer"},children:[e.jsx("source",{src:ve,type:t.mime_type||"video/mp4"}),(oe=t.subtitles)==null?void 0:oe.map(r=>e.jsx("track",{kind:"subtitles",src:r.proxy_vtt_url||r.vtt_url,srcLang:r.language,label:r.language_name,default:r.language==="ar"},r.id))]}),p&&e.jsx("div",{className:"absolute inset-0 flex items-center justify-center bg-black bg-opacity-50",children:e.jsx("div",{className:"animate-spin rounded-full h-16 w-16 border-t-2 border-b-2 border-blue-500"})}),e.jsxs("div",{className:"absolute inset-0 flex z-10",children:[e.jsx("div",{className:"w-1/2 h-full cursor-pointer",onClick:r=>ne(r,"left")}),e.jsx("div",{className:"w-1/2 h-full cursor-pointer",onClick:r=>ne(r,"right")})]}),!g&&!p&&e.jsx("div",{className:"absolute inset-0 flex items-center justify-center z-20 pointer-events-none",children:e.jsx("div",{className:"bg-blue-500 rounded-full p-6 shadow-lg",children:e.jsx("svg",{className:"w-12 h-12 text-white",fill:"currentColor",viewBox:"0 0 20 20",children:e.jsx("path",{d:"M6.3 2.841A1.5 1.5 0 004 4.11V15.89a1.5 1.5 0 002.3 1.269l9.344-5.89a1.5 1.5 0 000-2.538L6.3 2.84z"})})})}),j.show&&e.jsxs("div",{className:`absolute top-0 bottom-0 ${j.side==="right"?"right-0 w-1/3":"left-0 w-1/3"} flex items-center justify-center pointer-events-none z-15`,children:[e.jsx("div",{className:"bg-white/30 rounded-full p-4 animate-ping",children:j.direction==="forward"?e.jsx("svg",{className:"w-10 h-10 text-white",fill:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{d:"M4 18l8.5-6L4 6v12zm9-12v12l8.5-6L13 6z"})}):e.jsx("svg",{className:"w-10 h-10 text-white",fill:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{d:"M11 18V6l-8.5 6 8.5 6zm.5-6l8.5 6V6l-8.5 6z"})})}),e.jsx("span",{className:"absolute bottom-1/4 text-white text-lg font-bold",children:j.direction==="forward"?"+10":"-10"})]}),w&&e.jsx("div",{className:"absolute left-0 right-0 z-25 flex justify-center pointer-events-none",style:{bottom:"100px"},children:e.jsx("div",{className:"px-4 py-2 rounded-lg text-center max-w-[80%]",style:{backgroundColor:"rgba(0, 0, 0, 0.85)",color:"white",fontSize:"1.25rem",lineHeight:"1.6",textShadow:"2px 2px 4px rgba(0,0,0,0.8)",direction:(v==null?void 0:v.language)==="ar"?"rtl":"ltr"},dangerouslySetInnerHTML:{__html:w}})}),e.jsxs("div",{className:`absolute bottom-0 left-0 right-0 z-30 bg-gradient-to-t from-black via-black/80 to-transparent transition-opacity duration-300 ${y||!g?"opacity-100":"opacity-0"}`,style:{pointerEvents:y||!g?"auto":"none"},children:[e.jsxs("div",{className:"px-4 pt-6 pb-2",children:[e.jsxs("div",{className:"relative h-1 bg-gray-700 rounded-lg group/progress",children:[e.jsx("div",{className:"absolute top-0 left-0 h-full bg-gray-500 rounded-lg transition-all",style:{width:`${A}%`}}),e.jsx("div",{className:"absolute top-0 left-0 h-full bg-blue-500 rounded-lg transition-all",style:{width:`${le}%`}}),e.jsx("input",{type:"range",min:0,max:h||0,step:.1,value:C,onChange:he,className:"absolute top-0 left-0 w-full h-full opacity-0 cursor-pointer"}),e.jsx("div",{className:"absolute top-1/2 -translate-y-1/2 w-3 h-3 bg-blue-500 rounded-full shadow-lg opacity-0 group-hover/progress:opacity-100 transition-opacity pointer-events-none",style:{left:`${le}%`,transform:"translate(-50%, -50%)"}})]}),e.jsxs("div",{className:"flex justify-between mt-1 text-xs text-white/80",children:[e.jsxs("span",{children:[ae(C)," / ",ae(h)]}),e.jsx("span",{})]})]}),e.jsxs("div",{className:"flex items-center justify-between px-4 pb-4",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("button",{onClick:Q,className:"text-white hover:text-blue-400 transition-colors",children:g?e.jsx("svg",{className:"w-8 h-8",fill:"currentColor",viewBox:"0 0 20 20",children:e.jsx("path",{fillRule:"evenodd",d:"M18 10a8 8 0 11-16 0 8 8 0 0116 0zM7 8a1 1 0 012 0v4a1 1 0 11-2 0V8zm5-1a1 1 0 00-1 1v4a1 1 0 102 0V8a1 1 0 00-1-1z",clipRule:"evenodd"})}):e.jsx("svg",{className:"w-8 h-8",fill:"currentColor",viewBox:"0 0 20 20",children:e.jsx("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zM9.555 7.168A1 1 0 008 8v4a1 1 0 001.555.832l3-2a1 1 0 000-1.664l-3-2z",clipRule:"evenodd"})})}),e.jsx("button",{onClick:()=>K(-10),className:"text-white hover:text-blue-400 transition-colors",title:"Skip backward 10s (â†)",children:e.jsx("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12.066 11.2a1 1 0 000 1.6l5.334 4A1 1 0 0019 16V8a1 1 0 00-1.6-.8l-5.333 4zM4.066 11.2a1 1 0 000 1.6l5.334 4A1 1 0 0011 16V8a1 1 0 00-1.6-.8l-5.334 4z"})})}),e.jsx("button",{onClick:()=>K(10),className:"text-white hover:text-blue-400 transition-colors",title:"Skip forward 10s (â†’)",children:e.jsx("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M11.933 12.8a1 1 0 000-1.6L6.6 7.2A1 1 0 005 8v8a1 1 0 001.6.8l5.333-4zM19.933 12.8a1 1 0 000-1.6l-5.333-4A1 1 0 0013 8v8a1 1 0 001.6.8l5.333-4z"})})}),e.jsxs("div",{className:"relative flex items-center",onMouseEnter:()=>u(!0),onMouseLeave:()=>u(!1),children:[e.jsx("button",{onClick:pe,className:"text-white hover:text-blue-400 transition-colors",title:"Mute (M)",children:m||E===0?e.jsx("svg",{className:"w-6 h-6",fill:"currentColor",viewBox:"0 0 20 20",children:e.jsx("path",{fillRule:"evenodd",d:"M9.383 3.076A1 1 0 0110 4v12a1 1 0 01-1.707.707L4.586 13H2a1 1 0 01-1-1V8a1 1 0 011-1h2.586l3.707-3.707a1 1 0 011.09-.217zM12.293 7.293a1 1 0 011.414 0L15 8.586l1.293-1.293a1 1 0 111.414 1.414L16.414 10l1.293 1.293a1 1 0 01-1.414 1.414L15 11.414l-1.293 1.293a1 1 0 01-1.414-1.414L13.586 10l-1.293-1.293a1 1 0 010-1.414z",clipRule:"evenodd"})}):E<.5?e.jsx("svg",{className:"w-6 h-6",fill:"currentColor",viewBox:"0 0 20 20",children:e.jsx("path",{fillRule:"evenodd",d:"M9.383 3.076A1 1 0 0110 4v12a1 1 0 01-1.707.707L4.586 13H2a1 1 0 01-1-1V8a1 1 0 011-1h2.586l3.707-3.707a1 1 0 011.09-.217zM12.293 7.293a1 1 0 011.414 0 4 4 0 010 5.656 1 1 0 01-1.414-1.414 2 2 0 000-2.828 1 1 0 010-1.414z",clipRule:"evenodd"})}):e.jsx("svg",{className:"w-6 h-6",fill:"currentColor",viewBox:"0 0 20 20",children:e.jsx("path",{fillRule:"evenodd",d:"M9.383 3.076A1 1 0 0110 4v12a1 1 0 01-1.707.707L4.586 13H2a1 1 0 01-1-1V8a1 1 0 011-1h2.586l3.707-3.707a1 1 0 011.09-.217zM14.657 2.929a1 1 0 011.414 0A9.972 9.972 0 0119 10a9.972 9.972 0 01-2.929 7.071 1 1 0 01-1.414-1.414A7.971 7.971 0 0017 10c0-2.21-.894-4.208-2.343-5.657a1 1 0 010-1.414zm-2.829 2.828a1 1 0 011.415 0A5.983 5.983 0 0115 10a5.984 5.984 0 01-1.757 4.243 1 1 0 01-1.415-1.415A3.984 3.984 0 0013 10a3.983 3.983 0 00-1.172-2.828 1 1 0 010-1.415z",clipRule:"evenodd"})})}),e.jsx("div",{className:`overflow-hidden transition-all duration-200 ${z?"w-20 ml-2":"w-0 ml-0"}`,children:e.jsxs("div",{className:"relative h-1 bg-gray-600 rounded-full",children:[e.jsx("div",{className:"absolute top-0 left-0 h-full bg-white rounded-full",style:{width:`${E*100}%`}}),e.jsx("input",{type:"range",min:0,max:1,step:.05,value:E,onChange:be,className:"absolute top-0 left-0 w-full h-full opacity-0 cursor-pointer"})]})})]})]}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsxs("div",{className:"relative",children:[e.jsxs("button",{onClick:()=>b(!f),className:"text-white hover:text-blue-400 transition-colors text-sm font-medium px-2 py-1 rounded hover:bg-white/10",children:[k,"x"]}),f&&e.jsx("div",{className:"absolute bottom-full left-0 mb-2 bg-gray-800 rounded-lg shadow-lg overflow-hidden min-w-[80px]",children:[.25,.5,.75,1,1.25,1.5,1.75,2].map(r=>e.jsxs("button",{onClick:()=>fe(r),className:`w-full px-3 py-2 text-sm text-right hover:bg-blue-600 transition-colors ${k===r?"bg-blue-500 text-white":"text-gray-300"}`,children:[r,"x ",r===1&&"(Ø¹Ø§Ø¯ÙŠ)"]},r))})]}),t.subtitles&&t.subtitles.length>0&&e.jsx("div",{className:"relative",children:e.jsxs("select",{value:(v==null?void 0:v.id)||"",onChange:r=>{const o=t.subtitles.find(d=>d.id===parseInt(r.target.value));V(o||null)},className:"bg-transparent text-white text-sm border border-white/30 rounded px-2 py-1 hover:bg-white/10 cursor-pointer",children:[e.jsx("option",{value:"",className:"bg-gray-800",children:"Ø¨Ø¯ÙˆÙ† ØªØ±Ø¬Ù…Ø©"}),t.subtitles.map(r=>e.jsx("option",{value:r.id,className:"bg-gray-800",children:r.language_name},r.id))]})}),document.pictureInPictureEnabled&&e.jsx("button",{onClick:ye,className:"text-white hover:text-blue-400 transition-colors",title:"Picture in Picture (P)",children:e.jsxs("svg",{className:"w-6 h-6",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,children:[e.jsx("rect",{x:"2",y:"4",width:"20",height:"14",rx:"2"}),e.jsx("rect",{x:"12",y:"10",width:"8",height:"6",rx:"1",className:U?"fill-blue-400 stroke-blue-400":"fill-gray-600"})]})}),e.jsx("button",{onClick:re,className:"text-white hover:text-blue-400 transition-colors",title:"Fullscreen (F)",children:T?e.jsx("svg",{className:"w-6 h-6",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,children:e.jsx("path",{d:"M8 3v4a1 1 0 01-1 1H3M16 3v4a1 1 0 001 1h4M8 21v-4a1 1 0 00-1-1H3M16 21v-4a1 1 0 011-1h4"})}):e.jsx("svg",{className:"w-6 h-6",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,children:e.jsx("path",{d:"M3 8V5a2 2 0 012-2h3M21 8V5a2 2 0 00-2-2h-3M3 16v3a2 2 0 002 2h3M21 16v3a2 2 0 01-2 2h-3"})})})]})]})]})]}),e.jsx("div",{className:`mt-2 p-3 rounded-lg text-xs ${l?"bg-gray-800 text-gray-400":"bg-gray-100 text-gray-600"}`,children:e.jsxs("div",{className:"flex flex-wrap gap-x-4 gap-y-1",children:[e.jsxs("span",{children:[e.jsx("kbd",{className:"px-1 bg-gray-700 text-white rounded",children:"Space"})," Play/Pause"]}),e.jsxs("span",{children:[e.jsx("kbd",{className:"px-1 bg-gray-700 text-white rounded",children:"â†"})," Skip -10s"]}),e.jsxs("span",{children:[e.jsx("kbd",{className:"px-1 bg-gray-700 text-white rounded",children:"â†’"})," Skip +10s"]}),e.jsxs("span",{children:[e.jsx("kbd",{className:"px-1 bg-gray-700 text-white rounded",children:"â†‘â†“"})," Volume"]}),e.jsxs("span",{children:[e.jsx("kbd",{className:"px-1 bg-gray-700 text-white rounded",children:"M"})," Mute"]}),e.jsxs("span",{children:[e.jsx("kbd",{className:"px-1 bg-gray-700 text-white rounded",children:"F"})," Fullscreen"]}),e.jsxs("span",{children:[e.jsx("kbd",{className:"px-1 bg-gray-700 text-white rounded",children:"P"})," PiP"]})]})}),e.jsx("style",{jsx:!0,children:`
        .slider::-webkit-slider-thumb {
          appearance: none;
          width: 14px;
          height: 14px;
          border-radius: 50%;
          background: #3b82f6;
          cursor: pointer;
          box-shadow: 0 0 0 3px rgba(59, 130, 246, 0.3);
        }

        .slider::-moz-range-thumb {
          width: 14px;
          height: 14px;
          border-radius: 50%;
          background: #3b82f6;
          cursor: pointer;
          border: none;
          box-shadow: 0 0 0 3px rgba(59, 130, 246, 0.3);
        }

        /* Subtitle styling */
        video::cue {
          background-color: rgba(0, 0, 0, 0.8);
          color: white;
          font-size: 1.25rem;
          font-family: 'Segoe UI', Tahoma, sans-serif;
          line-height: 1.5;
          padding: 0.25rem 0.5rem;
          border-radius: 4px;
        }

        /* Position subtitles above controls */
        video::-webkit-media-text-track-container {
          bottom: 80px !important;
          transform: translateY(-20px);
        }

        video::-webkit-media-text-track-display {
          bottom: 80px !important;
        }
      `})]})}function Ve({lessonId:t,initialSummary:l,onUpdate:i,video:a}){const{darkMode:g}=J(),[x,C]=s.useState(l||""),[_,h]=s.useState(!1),[N,E]=s.useState(!1),[c,m]=s.useState(!1),[R,k]=s.useState(null),[F,v]=s.useState(!1);s.useEffect(()=>{C(l||"")},[l]);const V=async()=>{var $,p;if(!F){h(!1);return}E(!0),k(null);try{(await G.put(`/lessons/${t}`,{summary:x})).data.success&&(h(!1),v(!1),i&&i(x))}catch(L){k(((p=($=L.response)==null?void 0:$.data)==null?void 0:p.message)||"ÙØ´Ù„ Ø­ÙØ¸ Ø§Ù„Ù…Ù„Ø®Øµ")}finally{E(!1)}},T=()=>{C(l||""),h(!1),v(!1),k(null)},n=$=>{C($.target.value),v($.target.value!==l)},y=async()=>{var $,p;if(!a){k("ÙŠØ¬Ø¨ Ø±ÙØ¹ Ø§Ù„ÙÙŠØ¯ÙŠÙˆ Ø£ÙˆÙ„Ø§Ù‹");return}m(!0),k(null);try{const L=await G.post(`/lessons/${t}/video/transcribe`);if(!L.data.success)throw new Error("ÙØ´Ù„ ÙÙŠ ØªÙØ±ÙŠØº Ø§Ù„ÙÙŠØ¯ÙŠÙˆ");const z=L.data.data.transcript,u=await G.post(`/lessons/${t}/video/summarize`,{text:z});if(u.data.success){const f=u.data.data.summary;C(f),v(!0),h(!0)}}catch(L){k(((p=($=L.response)==null?void 0:$.data)==null?void 0:p.message)||"ÙØ´Ù„ ÙÙŠ Ø¥Ù†Ø´Ø§Ø¡ Ø§Ù„Ù…Ù„Ø®Øµ Ø§Ù„ØªÙ„Ù‚Ø§Ø¦ÙŠ")}finally{m(!1)}};return e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("h3",{className:`text-lg font-semibold ${g?"text-gray-100":"text-gray-900"}`,children:"Ù…Ù„Ø®Øµ Ø§Ù„Ø¯Ø±Ø³"}),e.jsxs("div",{className:"flex gap-2",children:[a&&!_&&e.jsx("button",{onClick:y,disabled:c,className:"px-3 py-1 text-sm bg-purple-500 text-white rounded hover:bg-purple-600 disabled:opacity-50",children:c?e.jsxs("span",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-white"}),"Ø¬Ø§Ø±ÙŠ Ø§Ù„Ø¥Ù†Ø´Ø§Ø¡..."]}):"Ø¥Ù†Ø´Ø§Ø¡ Ù…Ù„Ø®Øµ ØªÙ„Ù‚Ø§Ø¦ÙŠ"}),!_&&e.jsx("button",{onClick:()=>h(!0),className:"px-3 py-1 text-sm bg-blue-500 text-white rounded hover:bg-blue-600",children:x?"ØªØ¹Ø¯ÙŠÙ„":"Ø¥Ø¶Ø§ÙØ© Ù…Ù„Ø®Øµ"})]})]}),_?e.jsxs("div",{className:"space-y-3",children:[e.jsx("textarea",{value:x,onChange:n,placeholder:"Ø§ÙƒØªØ¨ Ù…Ù„Ø®Øµ Ø§Ù„Ø¯Ø±Ø³ Ù‡Ù†Ø§...",className:`w-full h-48 px-3 py-2 border rounded focus:ring-2 focus:ring-blue-500 focus:border-blue-500 resize-none ${g?"bg-gray-700 border-gray-600 text-gray-100 placeholder-gray-400":"bg-white border-gray-300 text-gray-900"}`,disabled:N}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("p",{className:`text-xs ${g?"text-gray-400":"text-gray-500"}`,children:[x.length," Ø­Ø±Ù"]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx("button",{onClick:T,disabled:N,className:`px-4 py-2 text-sm border rounded disabled:opacity-50 ${g?"border-gray-600 text-gray-300 hover:bg-gray-700":"border-gray-300 text-gray-700 hover:bg-gray-50"}`,children:"Ø¥Ù„ØºØ§Ø¡"}),e.jsx("button",{onClick:V,disabled:N||!F,className:"px-4 py-2 text-sm bg-blue-500 text-white rounded hover:bg-blue-600 disabled:opacity-50",children:N?e.jsxs("span",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-white"}),"Ø¬Ø§Ø±ÙŠ Ø§Ù„Ø­ÙØ¸..."]}):"Ø­ÙØ¸"})]})]})]}):e.jsx("div",{className:`p-4 rounded-lg min-h-32 ${g?"bg-gray-700":"bg-gray-50"}`,children:x?e.jsx("p",{className:`whitespace-pre-wrap ${g?"text-gray-200":"text-gray-700"}`,children:x}):e.jsx("p",{className:`italic ${g?"text-gray-500":"text-gray-400"}`,children:"Ù„Ø§ ÙŠÙˆØ¬Ø¯ Ù…Ù„Ø®Øµ Ù„Ù‡Ø°Ø§ Ø§Ù„Ø¯Ø±Ø³ Ø¨Ø¹Ø¯"})}),R&&e.jsx("div",{className:`p-3 border rounded text-sm ${g?"bg-red-900/30 border-red-800 text-red-300":"bg-red-50 border-red-200 text-red-700"}`,children:R})]})}const We=({lessonId:t,isInstructor:l=!1})=>{const i=me(),[a,g]=s.useState([]),[x,C]=s.useState(!0),[_,h]=s.useState(!1),[N,E]=s.useState(!1),[c,m]=s.useState({num_questions:10,difficulty:"medium",duration:15,passing_score:70,max_attempts:3,question_types:["multiple_choice","true_false"],language:"ar"});s.useEffect(()=>{t&&R()},[t]);const R=async()=>{try{C(!0);const y=await(await fetch(`/api/lessons/${t}/quizzes`,{headers:{Accept:"application/json",Authorization:`Bearer ${localStorage.getItem("auth_token")}`}})).json();y.success&&g(y.data)}catch(n){console.error("Error fetching quizzes:",n)}finally{C(!1)}},k=async()=>{try{h(!0);const y=await(await fetch(`/api/lessons/${t}/quizzes/generate`,{method:"POST",headers:{Accept:"application/json","Content-Type":"application/json",Authorization:`Bearer ${localStorage.getItem("auth_token")}`},body:JSON.stringify(c)})).json();y.success?(alert("ØªÙ… Ø¥Ù†Ø´Ø§Ø¡ Ø§Ù„Ø§Ø®ØªØ¨Ø§Ø± Ø¨Ù†Ø¬Ø§Ø­ Ø¨Ø§Ø³ØªØ®Ø¯Ø§Ù… Ø§Ù„Ø°ÙƒØ§Ø¡ Ø§Ù„Ø§ØµØ·Ù†Ø§Ø¹ÙŠ!"),E(!1),R()):alert("ÙØ´Ù„ Ø¥Ù†Ø´Ø§Ø¡ Ø§Ù„Ø§Ø®ØªØ¨Ø§Ø±: "+y.message)}catch(n){console.error("Error generating quiz:",n),alert("ÙØ´Ù„ Ø¥Ù†Ø´Ø§Ø¡ Ø§Ù„Ø§Ø®ØªØ¨Ø§Ø±")}finally{h(!1)}},F=async n=>{if(confirm("Ù‡Ù„ Ø£Ù†Øª Ù…ØªØ£ÙƒØ¯ Ù…Ù† Ø­Ø°Ù Ù‡Ø°Ø§ Ø§Ù„Ø§Ø®ØªØ¨Ø§Ø±ØŸ"))try{(await(await fetch(`/api/quizzes/${n}`,{method:"DELETE",headers:{Accept:"application/json",Authorization:`Bearer ${localStorage.getItem("auth_token")}`}})).json()).success&&(alert("ØªÙ… Ø­Ø°Ù Ø§Ù„Ø§Ø®ØªØ¨Ø§Ø± Ø¨Ù†Ø¬Ø§Ø­"),R())}catch(y){console.error("Error deleting quiz:",y),alert("ÙØ´Ù„ Ø­Ø°Ù Ø§Ù„Ø§Ø®ØªØ¨Ø§Ø±")}},v=n=>{i(`/quizzes/${n}/take`)},V=n=>{const y={easy:"bg-green-100 dark:bg-green-900/20 text-green-600 dark:text-green-400",medium:"bg-yellow-100 dark:bg-yellow-900/20 text-yellow-600 dark:text-yellow-400",hard:"bg-red-100 dark:bg-red-900/20 text-red-600 dark:text-red-400"};return y[n]||y.medium},T=n=>({easy:"Ø³Ù‡Ù„",medium:"Ù…ØªÙˆØ³Ø·",hard:"ØµØ¹Ø¨"})[n]||"Ù…ØªÙˆØ³Ø·";return x?e.jsx("div",{className:"flex items-center justify-center py-12",children:e.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600"})}):e.jsxs("div",{className:"space-y-4",dir:"rtl",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("h2",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:"Ø§Ù„Ø§Ø®ØªØ¨Ø§Ø±Ø§Øª"}),l&&e.jsxs("button",{onClick:()=>E(!0),className:"flex items-center gap-2 px-4 py-2 bg-gradient-to-r from-purple-600 to-blue-600 text-white rounded-lg hover:from-purple-700 hover:to-blue-700 transition",children:[e.jsx(ge,{className:"w-5 h-5"}),"Ø¥Ù†Ø´Ø§Ø¡ Ø¨Ø§Ù„Ø°ÙƒØ§Ø¡ Ø§Ù„Ø§ØµØ·Ù†Ø§Ø¹ÙŠ"]})]}),a.length===0?e.jsxs("div",{className:"bg-gray-50 dark:bg-gray-800 rounded-lg p-12 text-center",children:[e.jsx("p",{className:"text-gray-600 dark:text-gray-400 mb-4",children:"Ù„Ø§ ØªÙˆØ¬Ø¯ Ø§Ø®ØªØ¨Ø§Ø±Ø§Øª Ù…ØªØ§Ø­Ø© Ù„Ù‡Ø°Ø§ Ø§Ù„Ø¯Ø±Ø³"}),l&&e.jsx("button",{onClick:()=>E(!0),className:"px-6 py-3 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition",children:"Ø¥Ù†Ø´Ø§Ø¡ Ø§Ø®ØªØ¨Ø§Ø± Ø§Ù„Ø¢Ù†"})]}):e.jsx("div",{className:"grid gap-4",children:a.map(n=>e.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-md p-6 border border-gray-200 dark:border-gray-700 hover:border-blue-400 dark:hover:border-blue-500 transition",children:[e.jsxs("div",{className:"flex items-start justify-between mb-4",children:[e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[e.jsx("h3",{className:"text-xl font-semibold text-gray-900 dark:text-white",children:n.title}),e.jsx("span",{className:`px-3 py-1 rounded-full text-xs font-medium ${V(n.difficulty)}`,children:T(n.difficulty)})]}),n.description&&e.jsx("p",{className:"text-gray-600 dark:text-gray-400 text-sm",children:n.description})]}),l&&e.jsx("div",{className:"flex gap-2",children:e.jsx("button",{onClick:()=>F(n.id),className:"p-2 text-red-600 hover:bg-red-50 dark:hover:bg-red-900/20 rounded-lg transition",title:"Ø­Ø°Ù Ø§Ù„Ø§Ø®ØªØ¨Ø§Ø±",children:e.jsx(ze,{className:"w-5 h-5"})})})]}),e.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4 mb-4",children:[e.jsxs("div",{className:"flex items-center gap-2 text-sm text-gray-600 dark:text-gray-400",children:[e.jsx(Se,{className:"w-4 h-4"}),e.jsxs("span",{children:[n.duration_minutes," Ø¯Ù‚ÙŠÙ‚Ø©"]})]}),e.jsxs("div",{className:"flex items-center gap-2 text-sm text-gray-600 dark:text-gray-400",children:[e.jsx(Ce,{className:"w-4 h-4"}),e.jsxs("span",{children:[n.questions_count," Ø³Ø¤Ø§Ù„"]})]}),e.jsxs("div",{className:"flex items-center gap-2 text-sm text-gray-600 dark:text-gray-400",children:[e.jsx(xe,{className:"w-4 h-4"}),e.jsxs("span",{children:["Ø¯Ø±Ø¬Ø© Ø§Ù„Ù†Ø¬Ø§Ø­: ",n.passing_score,"%"]})]}),e.jsx("div",{className:"flex items-center gap-2 text-sm text-gray-600 dark:text-gray-400",children:e.jsxs("span",{children:["Ø§Ù„Ù…Ø­Ø§ÙˆÙ„Ø§Øª: ",n.user_attempts,"/",n.max_attempts]})})]}),n.has_passed?e.jsx("div",{className:"bg-green-50 dark:bg-green-900/20 border border-green-200 dark:border-green-800 rounded-lg p-4 mb-4",children:e.jsxs("div",{className:"flex items-center gap-2 text-green-700 dark:text-green-400",children:[e.jsx(xe,{className:"w-5 h-5"}),e.jsxs("span",{className:"font-medium",children:["Ù„Ù‚Ø¯ Ù†Ø¬Ø­Øª ÙÙŠ Ù‡Ø°Ø§ Ø§Ù„Ø§Ø®ØªØ¨Ø§Ø±! Ø£Ø¹Ù„Ù‰ Ù†ØªÙŠØ¬Ø©: ",n.best_score,"%"]})]})}):n.best_score!==null&&n.best_score!==void 0?e.jsx("div",{className:"bg-yellow-50 dark:bg-yellow-900/20 border border-yellow-200 dark:border-yellow-800 rounded-lg p-4 mb-4",children:e.jsxs("div",{className:"flex items-center gap-2 text-yellow-700 dark:text-yellow-400",children:[e.jsx(Pe,{className:"w-5 h-5"}),e.jsxs("span",{className:"font-medium",children:["Ø£ÙØ¶Ù„ Ù†ØªÙŠØ¬Ø©: ",n.best_score,"% - ÙŠÙ…ÙƒÙ†Ùƒ Ø§Ù„Ù…Ø­Ø§ÙˆÙ„Ø© Ù…Ø±Ø© Ø£Ø®Ø±Ù‰"]})]})}):null,e.jsxs("div",{className:"flex items-center gap-3",children:[n.can_take?e.jsxs("button",{onClick:()=>v(n.id),className:"flex items-center gap-2 px-6 py-3 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition font-medium",children:[e.jsx(_e,{className:"w-5 h-5"}),n.user_attempts>0?"Ø¥Ø¹Ø§Ø¯Ø© Ø§Ù„Ù…Ø­Ø§ÙˆÙ„Ø©":"Ø¨Ø¯Ø¡ Ø§Ù„Ø§Ø®ØªØ¨Ø§Ø±"]}):e.jsx("div",{className:"px-6 py-3 bg-gray-100 dark:bg-gray-700 text-gray-500 dark:text-gray-400 rounded-lg",children:"Ù„Ù‚Ø¯ Ø§Ø³ØªÙ†ÙØ°Øª Ø¬Ù…ÙŠØ¹ Ø§Ù„Ù…Ø­Ø§ÙˆÙ„Ø§Øª"}),n.user_attempts>0&&e.jsxs("button",{onClick:()=>i(`/quizzes/${n.id}/attempts`),className:"px-6 py-3 border-2 border-gray-300 dark:border-gray-600 text-gray-700 dark:text-gray-300 rounded-lg hover:border-blue-400 dark:hover:border-blue-500 transition",children:["Ø¹Ø±Ø¶ Ø§Ù„Ù…Ø­Ø§ÙˆÙ„Ø§Øª (",n.user_attempts,")"]})]})]},n.id))}),N&&e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:e.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg max-w-2xl w-full p-6 max-h-[90vh] overflow-y-auto",children:[e.jsx("h3",{className:"text-2xl font-bold text-gray-900 dark:text-white mb-6",children:"Ø¥Ù†Ø´Ø§Ø¡ Ø§Ø®ØªØ¨Ø§Ø± Ø¨Ø§Ù„Ø°ÙƒØ§Ø¡ Ø§Ù„Ø§ØµØ·Ù†Ø§Ø¹ÙŠ"}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Ø¹Ø¯Ø¯ Ø§Ù„Ø£Ø³Ø¦Ù„Ø©"}),e.jsx("input",{type:"number",min:"1",max:"50",value:c.num_questions,onChange:n=>m({...c,num_questions:parseInt(n.target.value)}),className:"w-full px-4 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-blue-500 dark:bg-gray-700 dark:text-white"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Ù…Ø³ØªÙˆÙ‰ Ø§Ù„ØµØ¹ÙˆØ¨Ø©"}),e.jsxs("select",{value:c.difficulty,onChange:n=>m({...c,difficulty:n.target.value}),className:"w-full px-4 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-blue-500 dark:bg-gray-700 dark:text-white",children:[e.jsx("option",{value:"easy",children:"Ø³Ù‡Ù„"}),e.jsx("option",{value:"medium",children:"Ù…ØªÙˆØ³Ø·"}),e.jsx("option",{value:"hard",children:"ØµØ¹Ø¨"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Ù„ØºØ© Ø§Ù„Ø£Ø³Ø¦Ù„Ø©"}),e.jsxs("select",{value:c.language,onChange:n=>m({...c,language:n.target.value}),className:"w-full px-4 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-blue-500 dark:bg-gray-700 dark:text-white",children:[e.jsx("option",{value:"ar",children:"Ø§Ù„Ø¹Ø±Ø¨ÙŠØ©"}),e.jsx("option",{value:"en",children:"English"}),e.jsx("option",{value:"fr",children:"FranÃ§ais"}),e.jsx("option",{value:"de",children:"Deutsch"}),e.jsx("option",{value:"es",children:"EspaÃ±ol"}),e.jsx("option",{value:"tr",children:"TÃ¼rkÃ§e"}),e.jsx("option",{value:"ur",children:"Ø§Ø±Ø¯Ùˆ"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Ø§Ù„Ù…Ø¯Ø© (Ø¯Ù‚ÙŠÙ‚Ø©)"}),e.jsx("input",{type:"number",min:"5",max:"180",value:c.duration,onChange:n=>m({...c,duration:parseInt(n.target.value)}),className:"w-full px-4 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-blue-500 dark:bg-gray-700 dark:text-white"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Ø¯Ø±Ø¬Ø© Ø§Ù„Ù†Ø¬Ø§Ø­ (%)"}),e.jsx("input",{type:"number",min:"0",max:"100",value:c.passing_score,onChange:n=>m({...c,passing_score:parseInt(n.target.value)}),className:"w-full px-4 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-blue-500 dark:bg-gray-700 dark:text-white"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Ø§Ù„Ø­Ø¯ Ø§Ù„Ø£Ù‚ØµÙ‰ Ù„Ù„Ù…Ø­Ø§ÙˆÙ„Ø§Øª"}),e.jsx("input",{type:"number",min:"1",max:"10",value:c.max_attempts,onChange:n=>m({...c,max_attempts:parseInt(n.target.value)}),className:"w-full px-4 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-blue-500 dark:bg-gray-700 dark:text-white"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Ø£Ù†ÙˆØ§Ø¹ Ø§Ù„Ø£Ø³Ø¦Ù„Ø©"}),e.jsx("div",{className:"space-y-2",children:[{value:"multiple_choice",label:"Ø§Ø®ØªÙŠØ§Ø± Ù…Ù† Ù…ØªØ¹Ø¯Ø¯"},{value:"true_false",label:"ØµØ­ Ø£Ùˆ Ø®Ø·Ø£"},{value:"fill_blank",label:"Ø¥ÙƒÙ…Ø§Ù„ Ø§Ù„ÙØ±Ø§Øº"},{value:"short_answer",label:"Ø¥Ø¬Ø§Ø¨Ø© Ù‚ØµÙŠØ±Ø©"}].map(n=>e.jsxs("label",{className:"flex items-center gap-2",children:[e.jsx("input",{type:"checkbox",checked:c.question_types.includes(n.value),onChange:y=>{y.target.checked?m({...c,question_types:[...c.question_types,n.value]}):m({...c,question_types:c.question_types.filter($=>$!==n.value)})},className:"w-4 h-4 text-blue-600"}),e.jsx("span",{className:"text-gray-700 dark:text-gray-300",children:n.label})]},n.value))})]})]}),e.jsxs("div",{className:"flex gap-3 mt-6",children:[e.jsx("button",{onClick:k,disabled:_||c.question_types.length===0,className:"flex-1 flex items-center justify-center gap-2 px-6 py-3 bg-gradient-to-r from-purple-600 to-blue-600 text-white rounded-lg hover:from-purple-700 hover:to-blue-700 disabled:opacity-50 disabled:cursor-not-allowed transition",children:_?e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"animate-spin rounded-full h-5 w-5 border-b-2 border-white"}),"Ø¬Ø§Ø±ÙŠ Ø§Ù„Ø¥Ù†Ø´Ø§Ø¡..."]}):e.jsxs(e.Fragment,{children:[e.jsx(ge,{className:"w-5 h-5"}),"Ø¥Ù†Ø´Ø§Ø¡ Ø¨Ø§Ù„Ø°ÙƒØ§Ø¡ Ø§Ù„Ø§ØµØ·Ù†Ø§Ø¹ÙŠ"]})}),e.jsx("button",{onClick:()=>E(!1),disabled:_,className:"px-6 py-3 border-2 border-gray-300 dark:border-gray-600 text-gray-700 dark:text-gray-300 rounded-lg hover:border-gray-400 disabled:opacity-50 transition",children:"Ø¥Ù„ØºØ§Ø¡"})]}),e.jsx("div",{className:"mt-4 p-4 bg-blue-50 dark:bg-blue-900/20 border border-blue-200 dark:border-blue-800 rounded-lg",children:e.jsx("p",{className:"text-sm text-blue-800 dark:text-blue-200",children:"ðŸ’¡ Ø³ÙŠØªÙ… Ø§Ø³ØªØ®Ø¯Ø§Ù… Ø§Ù„Ø°ÙƒØ§Ø¡ Ø§Ù„Ø§ØµØ·Ù†Ø§Ø¹ÙŠ Gemini Ù„ØªÙˆÙ„ÙŠØ¯ Ø£Ø³Ø¦Ù„Ø© Ø°ÙƒÙŠØ© Ø¨Ù†Ø§Ø¡Ù‹ Ø¹Ù„Ù‰ Ù…Ø­ØªÙˆÙ‰ Ø§Ù„Ø¯Ø±Ø³"})})]})})]})};function Ue(){var $;const{darkMode:t}=J(),{id:l}=Ne(),i=me(),[a,g]=s.useState(null),[x,C]=s.useState(null),[_,h]=s.useState(!0),[N,E]=s.useState(null),[c,m]=s.useState("view"),[R,k]=s.useState(!1),F=s.useRef(!1);s.useEffect(()=>{v()},[l]);const v=async()=>{var p,L,z,u,f;if(console.log("ðŸ“š [LessonMedia] Fetching lesson:",l),F.current){console.log("â­ï¸ [LessonMedia] Already fetching, skipping");return}F.current=!0;try{h(!0),E(null),console.log("ðŸ“¥ [LessonMedia] Fetching lesson data...");const b=await G.get(`/lessons/${l}`),A=b.data.data||b.data;console.log("âœ… [LessonMedia] Lesson data loaded:",A),g(A);try{console.log("ðŸ“¥ [LessonMedia] Fetching video data...");const j=(await G.get(`/lessons/${l}/video`)).data.data;console.log("âœ… [LessonMedia] Video data loaded:",{has_video:!!j,proxy_video_url:j==null?void 0:j.proxy_video_url,video_url:j==null?void 0:j.video_url,mime_type:j==null?void 0:j.mime_type,subtitles_count:((p=j==null?void 0:j.subtitles)==null?void 0:p.length)||0,subtitles:j==null?void 0:j.subtitles}),C(j)}catch(D){((L=D.response)==null?void 0:L.status)===404?(console.log("â„¹ï¸ [LessonMedia] No video found (404), switching to upload tab"),C(null),m("upload")):(console.warn("âš ï¸ [LessonMedia] Failed to load video:",D),C(null))}}catch(b){console.error("âŒ [LessonMedia] Error loading lesson:",b);const A=(z=b.response)==null?void 0:z.status,D=((f=(u=b.response)==null?void 0:u.data)==null?void 0:f.message)||"ÙØ´Ù„ ØªØ­Ù…ÙŠÙ„ Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„Ø¯Ø±Ø³";E(A===404?"Ø§Ù„Ø¯Ø±Ø³ ØºÙŠØ± Ù…ÙˆØ¬ÙˆØ¯ Ø£Ùˆ Ù„ÙŠØ³ Ù„Ø¯ÙŠÙƒ ØµÙ„Ø§Ø­ÙŠØ© Ø§Ù„ÙˆØµÙˆÙ„ Ø¥Ù„ÙŠÙ‡":A===403?"Ù„ÙŠØ³ Ù„Ø¯ÙŠÙƒ ØµÙ„Ø§Ø­ÙŠØ© Ù„Ù„ÙˆØµÙˆÙ„ Ø¥Ù„Ù‰ Ù‡Ø°Ø§ Ø§Ù„Ø¯Ø±Ø³":D)}finally{h(!1),F.current=!1}},V=p=>{C(p),p&&c==="upload"&&m("view")},T=(p,L=null)=>{L?C(z=>({...z,subtitles:z.subtitles.filter(u=>u.id!==L)})):p&&C(z=>{var f;const u=(f=z.subtitles)==null?void 0:f.findIndex(b=>b.id===p.id);if(u!==-1){const b=[...z.subtitles];return b[u]=p,{...z,subtitles:b}}else return{...z,subtitles:[...z.subtitles||[],p]}})},n=()=>{k(!0),setTimeout(()=>{const p=document.getElementById("ai-generator-section");p&&p.scrollIntoView({behavior:"smooth",block:"center"}),k(!1)},100)},y=p=>{g(L=>({...L,summary:p}))};return _?e.jsx(ue,{}):N?e.jsx("div",{className:`min-h-screen transition-colors duration-300 ${t?"bg-gray-900":"bg-gray-50"}`,children:e.jsx("div",{className:"container mx-auto px-4 py-8",children:e.jsx("div",{className:`border rounded-lg p-4 ${t?"bg-red-900/30 border-red-800 text-red-300":"bg-red-50 border-red-200 text-red-700"}`,children:N})})}):a?e.jsx("div",{className:`min-h-screen transition-colors duration-300 ${t?"bg-gray-900":"bg-gray-50"}`,children:e.jsxs("div",{className:"container mx-auto px-4 py-8",children:[e.jsxs("div",{className:"mb-6",children:[e.jsxs("button",{onClick:()=>i(-1),className:`mb-4 flex items-center gap-2 transition-colors ${t?"text-blue-400 hover:text-blue-300":"text-blue-500 hover:text-blue-700"}`,children:[e.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 19l-7-7 7-7"})}),"Ø±Ø¬ÙˆØ¹"]}),e.jsx("h1",{className:`text-3xl font-bold ${t?"text-gray-100":"text-gray-900"}`,children:a.name}),a.description&&e.jsx("p",{className:`mt-2 ${t?"text-gray-400":"text-gray-600"}`,children:a.description})]}),e.jsx("div",{className:`mb-6 border-b ${t?"border-gray-700":"border-gray-200"}`,children:e.jsxs("nav",{className:"flex gap-4",children:[e.jsx("button",{onClick:()=>m("view"),className:`pb-2 px-1 border-b-2 font-medium transition-colors ${c==="view"?t?"border-blue-400 text-blue-400":"border-blue-500 text-blue-600":t?"border-transparent text-gray-400 hover:text-gray-300":"border-transparent text-gray-500 hover:text-gray-700"}`,children:"Ù…Ø´Ø§Ù‡Ø¯Ø© Ø§Ù„Ø¯Ø±Ø³"}),e.jsx("button",{onClick:()=>m("upload"),className:`pb-2 px-1 border-b-2 font-medium transition-colors ${c==="upload"?t?"border-blue-400 text-blue-400":"border-blue-500 text-blue-600":t?"border-transparent text-gray-400 hover:text-gray-300":"border-transparent text-gray-500 hover:text-gray-700"}`,children:"Ø¥Ø¯Ø§Ø±Ø© Ø§Ù„ÙˆØ³Ø§Ø¦Ø·"}),e.jsx("button",{onClick:()=>m("summary"),className:`pb-2 px-1 border-b-2 font-medium transition-colors ${c==="summary"?t?"border-blue-400 text-blue-400":"border-blue-500 text-blue-600":t?"border-transparent text-gray-400 hover:text-gray-300":"border-transparent text-gray-500 hover:text-gray-700"}`,children:"Ø§Ù„Ù…Ù„Ø®Øµ"}),e.jsx("button",{onClick:()=>m("quiz"),className:`pb-2 px-1 border-b-2 font-medium transition-colors ${c==="quiz"?t?"border-blue-400 text-blue-400":"border-blue-500 text-blue-600":t?"border-transparent text-gray-400 hover:text-gray-300":"border-transparent text-gray-500 hover:text-gray-700"}`,children:"Ø§Ù„Ø§Ø®ØªØ¨Ø§Ø±Ø§Øª"})]})}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[e.jsxs("div",{className:"lg:col-span-2",children:[c==="view"&&e.jsx("div",{className:"space-y-6",children:x?e.jsx(Fe,{video:x,darkMode:t}):e.jsxs("div",{className:`text-center py-16 rounded-lg shadow transition-colors duration-300 ${t?"bg-gray-800":"bg-white"}`,children:[e.jsx("svg",{className:`mx-auto h-16 w-16 ${t?"text-gray-600":"text-gray-400"}`,fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.5,d:"M15 10l4.553-2.276A1 1 0 0121 8.618v6.764a1 1 0 01-1.447.894L15 14M5 18h8a2 2 0 002-2V8a2 2 0 00-2-2H5a2 2 0 00-2 2v8a2 2 0 002 2z"})}),e.jsx("h3",{className:`mt-4 text-lg font-medium ${t?"text-gray-300":"text-gray-900"}`,children:"Ù„Ø§ ÙŠÙˆØ¬Ø¯ ÙÙŠØ¯ÙŠÙˆ"}),e.jsx("p",{className:`mt-2 text-sm ${t?"text-gray-400":"text-gray-500"}`,children:"Ø§Ø¨Ø¯Ø£ Ø¨Ø±ÙØ¹ ÙÙŠØ¯ÙŠÙˆ Ù„Ù‡Ø°Ø§ Ø§Ù„Ø¯Ø±Ø³ Ù„Ù„Ø§Ø³ØªÙØ§Ø¯Ø© Ù…Ù† ÙƒØ§ÙØ© Ø§Ù„Ù…ÙŠØ²Ø§Øª"}),e.jsxs("button",{onClick:()=>m("upload"),className:"mt-6 inline-flex items-center gap-2 px-6 py-3 bg-blue-500 text-white rounded-lg hover:bg-blue-600 transition-colors shadow-sm",children:[e.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M7 16a4 4 0 01-.88-7.903A5 5 0 1115.9 6L16 6a5 5 0 011 9.9M15 13l-3-3m0 0l-3 3m3-3v12"})}),"Ø±ÙØ¹ ÙÙŠØ¯ÙŠÙˆ Ø§Ù„Ø¢Ù†"]})]})}),c==="upload"&&e.jsxs("div",{className:"space-y-6",children:[e.jsx("div",{className:`rounded-lg shadow p-6 transition-colors duration-300 ${t?"bg-gray-800":"bg-white"}`,children:e.jsx(ke,{lessonId:l,existingVideo:x,onUploadSuccess:V})}),e.jsx("div",{id:"ai-generator-section",className:`rounded-lg shadow p-6 transition-all ${t?"bg-gray-800":"bg-white"} ${R?t?"ring-4 ring-purple-500":"ring-4 ring-purple-300":""}`,children:e.jsx(Ie,{lessonId:l,video:x,onSuccess:T})}),e.jsx("div",{className:`rounded-lg shadow p-6 transition-colors duration-300 ${t?"bg-gray-800":"bg-white"}`,children:e.jsx(Be,{lessonId:l,video:x,onUploadSuccess:T,onOpenAIGenerator:n})})]}),c==="summary"&&e.jsx("div",{className:`rounded-lg shadow p-6 transition-colors duration-300 ${t?"bg-gray-800":"bg-white"}`,children:e.jsx(Ve,{lessonId:l,initialSummary:a.summary,onUpdate:y,video:x})}),c==="quiz"&&e.jsx("div",{className:`rounded-lg shadow p-6 transition-colors duration-300 ${t?"bg-gray-800":"bg-white"}`,children:e.jsx(We,{lessonId:l,isInstructor:!0})})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:`rounded-lg shadow p-6 transition-colors duration-300 ${t?"bg-gray-800":"bg-white"}`,children:[e.jsx("h3",{className:`font-semibold mb-4 ${t?"text-gray-100":"text-gray-900"}`,children:"Ù…Ø¹Ù„ÙˆÙ…Ø§Øª Ø§Ù„Ø¯Ø±Ø³"}),e.jsxs("dl",{className:"space-y-2 text-sm",children:[a.duration&&e.jsxs("div",{children:[e.jsx("dt",{className:`${t?"text-gray-400":"text-gray-600"}`,children:"Ø§Ù„Ù…Ø¯Ø©"}),e.jsx("dd",{className:`font-medium ${t?"text-gray-200":"text-gray-900"}`,children:a.duration})]}),a.type&&e.jsxs("div",{children:[e.jsx("dt",{className:`${t?"text-gray-400":"text-gray-600"}`,children:"Ø§Ù„Ù†ÙˆØ¹"}),e.jsx("dd",{className:`font-medium ${t?"text-gray-200":"text-gray-900"}`,children:a.type})]}),e.jsxs("div",{children:[e.jsx("dt",{className:`${t?"text-gray-400":"text-gray-600"}`,children:"Ø§Ù„Ø­Ø§Ù„Ø©"}),e.jsx("dd",{children:e.jsx("span",{className:`inline-block px-2 py-1 text-xs rounded ${a.completed?"bg-green-100 text-green-800":"bg-yellow-100 text-yellow-800"}`,children:a.completed?"Ù…ÙƒØªÙ…Ù„":"ØºÙŠØ± Ù…ÙƒØªÙ…Ù„"})})]})]})]}),e.jsxs("div",{className:`rounded-lg shadow p-6 transition-colors duration-300 ${t?"bg-gray-800":"bg-white"}`,children:[e.jsx("h3",{className:`font-semibold mb-4 ${t?"text-gray-100":"text-gray-900"}`,children:"Ø­Ø§Ù„Ø© Ø§Ù„ÙˆØ³Ø§Ø¦Ø·"}),e.jsxs("div",{className:"space-y-3 text-sm",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:t?"text-gray-400":"text-gray-600",children:"Ø§Ù„ÙÙŠØ¯ÙŠÙˆ"}),e.jsx("span",{className:`flex items-center gap-1 ${x?"text-green-600":"text-gray-400"}`,children:x?e.jsxs(e.Fragment,{children:[e.jsx("svg",{className:"w-4 h-4",fill:"currentColor",viewBox:"0 0 20 20",children:e.jsx("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zm3.707-9.293a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z",clipRule:"evenodd"})}),"Ù…ÙˆØ¬ÙˆØ¯"]}):"ØºÙŠØ± Ù…ÙˆØ¬ÙˆØ¯"})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:t?"text-gray-400":"text-gray-600",children:"Ø§Ù„ØªØ±Ø¬Ù…Ø§Øª"}),e.jsx("span",{className:`font-medium ${t?"text-gray-200":"text-gray-900"}`,children:(($=x==null?void 0:x.subtitles)==null?void 0:$.length)||0})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:t?"text-gray-400":"text-gray-600",children:"Ø§Ù„Ù…Ù„Ø®Øµ"}),e.jsx("span",{className:`flex items-center gap-1 ${a.summary?"text-green-600":"text-gray-400"}`,children:a.summary?e.jsxs(e.Fragment,{children:[e.jsx("svg",{className:"w-4 h-4",fill:"currentColor",viewBox:"0 0 20 20",children:e.jsx("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zm3.707-9.293a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z",clipRule:"evenodd"})}),"Ù…ÙˆØ¬ÙˆØ¯"]}):"ØºÙŠØ± Ù…ÙˆØ¬ÙˆØ¯"})]})]})]}),e.jsxs("div",{className:`rounded-lg shadow p-6 transition-colors duration-300 ${t?"bg-gray-800":"bg-white"}`,children:[e.jsx("h3",{className:`font-semibold mb-4 ${t?"text-gray-100":"text-gray-900"}`,children:"Ø¥Ø¬Ø±Ø§Ø¡Ø§Øª Ø³Ø±ÙŠØ¹Ø©"}),e.jsxs("div",{className:"space-y-2",children:[!x&&e.jsx("button",{onClick:()=>m("upload"),className:"w-full px-4 py-2 bg-blue-500 text-white rounded hover:bg-blue-600 text-sm",children:"Ø±ÙØ¹ ÙÙŠØ¯ÙŠÙˆ"}),x&&(!x.subtitles||x.subtitles.length===0)&&e.jsx("button",{onClick:()=>m("upload"),className:"w-full px-4 py-2 bg-green-500 text-white rounded hover:bg-green-600 text-sm",children:"Ø¥Ø¶Ø§ÙØ© ØªØ±Ø¬Ù…Ø©"}),!a.summary&&e.jsx("button",{onClick:()=>m("summary"),className:"w-full px-4 py-2 bg-purple-500 text-white rounded hover:bg-purple-600 text-sm",children:"Ø¥Ø¶Ø§ÙØ© Ù…Ù„Ø®Øµ"}),a.link&&e.jsx("a",{href:a.link,target:"_blank",rel:"noopener noreferrer",className:`w-full block text-center px-4 py-2 rounded text-sm transition-colors ${t?"bg-gray-700 text-gray-300 hover:bg-gray-600":"bg-gray-200 text-gray-800 hover:bg-gray-300"}`,children:"ÙØªØ­ Ø±Ø§Ø¨Ø· Ø§Ù„Ø¯Ø±Ø³"})]})]})]})]})]})}):e.jsx(ue,{})}export{Ue as default};
