import{j as r}from"./charts-8gUIbWxc.js";import{b as t}from"./vendor-125d4HLq.js";import{u as C}from"./index-Ca2M97Gg.js";function $(s,c=500){const[a,d]=t.useState(s);return t.useEffect(()=>{const i=setTimeout(()=>{d(s)},c);return()=>{clearTimeout(i)}},[s,c]),a}function T({value:s,onChange:c,options:a=[],placeholder:d="اختر...",searchPlaceholder:i="ابحث...",className:v="",disabled:g=!1,required:j=!1,label:h,emptyMessage:w="لا توجد نتائج"}){const{darkMode:o}=C(),[l,b]=t.useState(!1),[y,m]=t.useState(""),x=$(y,300),f=t.useRef(null),p=t.useMemo(()=>{if(!x.trim())return a;const e=x.toLowerCase();return a.filter(n=>(n.label||n.name||String(n.value)).toLowerCase().includes(e))},[a,x]),u=t.useMemo(()=>a.find(e=>String(e.value)===String(s)),[a,s]);t.useEffect(()=>{const e=n=>{f.current&&!f.current.contains(n.target)&&(b(!1),m(""))};return l&&document.addEventListener("mousedown",e),()=>{document.removeEventListener("mousedown",e)}},[l]);const S=e=>{c(e),b(!1),m("")},k=`relative ${v}`,N=`w-full border-2 rounded-lg px-4 py-2.5 focus:ring-2 focus:ring-blue-500 font-medium transition-all text-right ${o?"bg-gray-900 border-gray-700 text-gray-200 focus:border-blue-500":"bg-white border-gray-300 focus:border-blue-500"} ${g?"opacity-50 cursor-not-allowed":"cursor-pointer"}`;return r.jsxs("div",{className:k,ref:f,children:[h&&r.jsxs("label",{className:`block text-sm font-bold mb-2 ${o?"text-gray-300":"text-gray-700"}`,children:[h,j&&r.jsx("span",{className:"text-red-500 mr-1",children:"*"})]}),r.jsxs("div",{className:"relative",children:[r.jsx("button",{type:"button",onClick:()=>!g&&b(!l),disabled:g,className:N,children:r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsx("span",{className:u?"":"text-gray-400",children:u?u.label||u.name:d}),r.jsx("svg",{className:`w-5 h-5 transition-transform ${l?"transform rotate-180":""}`,fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 9l-7 7-7-7"})})]})}),l&&r.jsxs("div",{className:`absolute z-50 w-full mt-1 rounded-lg shadow-lg border-2 ${o?"bg-gray-800 border-gray-700":"bg-white border-gray-200"} max-h-64 overflow-hidden`,children:[r.jsx("div",{className:"p-2 border-b border-gray-200 dark:border-gray-700",children:r.jsx("input",{type:"text",value:y,onChange:e=>m(e.target.value),placeholder:i,className:`w-full px-3 py-2 rounded border ${o?"bg-gray-900 border-gray-600 text-gray-200 placeholder-gray-500":"bg-white border-gray-300"} focus:outline-none focus:ring-2 focus:ring-blue-500`,autoFocus:!0,onClick:e=>e.stopPropagation()})}),r.jsx("div",{className:"max-h-48 overflow-y-auto",children:p.length===0?r.jsx("div",{className:`px-4 py-3 text-center text-sm ${o?"text-gray-400":"text-gray-500"}`,children:w}):p.map(e=>{const n=String(e.value)===String(s);return r.jsx("button",{type:"button",onClick:()=>S(e.value),className:`w-full text-right px-4 py-2 hover:bg-blue-50 dark:hover:bg-gray-700 transition-colors ${n?"bg-blue-100 dark:bg-blue-900 text-blue-700 dark:text-blue-300":o?"text-gray-200":"text-gray-900"}`,children:e.label||e.name},e.value)})})]})]})]})}export{T as S};
