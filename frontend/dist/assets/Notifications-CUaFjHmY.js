import{j as t}from"./charts-8gUIbWxc.js";import{b as n}from"./vendor-125d4HLq.js";import{n as d,F as N,u as j}from"./index-DB2kzkDV.js";function w(){const[l,i]=n.useState([]),[g,x]=n.useState(!0),[r,m]=n.useState(1),[o,h]=n.useState(1);n.useEffect(()=>{u()},[r]);const u=async()=>{try{x(!0);const e=await d.getNotifications(r);i(e.data||[]),h(e.last_page||1)}catch(e){if((e==null?void 0:e.name)==="CanceledError"||(e==null?void 0:e.code)==="ERR_CANCELED")return;console.error("Failed to fetch notifications:",e)}finally{x(!1)}},p=async e=>{try{await d.deleteNotification(e),i(a=>a.filter(s=>s.id!==e))}catch(a){if((a==null?void 0:a.name)==="CanceledError"||(a==null?void 0:a.code)==="ERR_CANCELED")return;console.error("Failed to delete notification:",a)}},b=async(e,a)=>{if(!a)try{await d.markAsRead(e),i(s=>s.map(c=>c.id===e?{...c,read_at:new Date().toISOString()}:c))}catch(s){if((s==null?void 0:s.name)==="CanceledError"||(s==null?void 0:s.code)==="ERR_CANCELED")return;console.error("Failed to mark as read:",s)}},y=e=>({task_created:"bg-blue-100 text-blue-800",task_completed:"bg-green-100 text-green-800",lesson_completed:"bg-purple-100 text-purple-800",course_completed:"bg-yellow-100 text-yellow-800",project_created:"bg-indigo-100 text-indigo-800",team_invitation:"bg-pink-100 text-pink-800",referral_success:"bg-orange-100 text-orange-800"})[e]||"bg-gray-100 text-gray-800",f=e=>new Date(e).toLocaleString("en-US",{month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"});return g&&r===1?t.jsx("div",{className:"flex justify-center items-center h-64",children:t.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-indigo-600"})}):t.jsxs("div",{className:"max-w-4xl mx-auto p-6",children:[t.jsxs("div",{className:"flex items-center justify-between mb-6",children:[t.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"All Notifications"}),l.length>0&&t.jsx("button",{onClick:async()=>{await d.clearAll(),i([])},className:"text-sm text-red-600 hover:text-red-800",children:"Clear all"})]}),l.length===0?t.jsx("div",{className:"text-center py-12",children:t.jsx("p",{className:"text-gray-500",children:"No notifications yet"})}):t.jsxs(t.Fragment,{children:[t.jsx("div",{className:"space-y-4",children:l.map(e=>t.jsx("div",{className:`bg-white rounded-lg shadow p-4 border-l-4 ${e.read_at?"border-gray-300 opacity-75":"border-indigo-600"} hover:shadow-md transition-shadow`,onClick:()=>b(e.id,!!e.read_at),children:t.jsxs("div",{className:"flex items-start justify-between",children:[t.jsxs("div",{className:"flex-1",children:[t.jsxs("div",{className:"flex items-center space-x-2 mb-2",children:[t.jsx("span",{className:`px-2 py-1 text-xs font-semibold rounded ${y(e.type)}`,children:e.type.replace(/_/g," ").toUpperCase()}),!e.read_at&&t.jsx("span",{className:"inline-flex items-center px-2 py-1 text-xs font-semibold text-white bg-blue-600 rounded",children:"NEW"})]}),t.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-1",children:e.title}),e.message&&t.jsx("p",{className:"text-gray-700 mb-2",children:e.message}),t.jsx("p",{className:"text-sm text-gray-500",children:f(e.created_at)})]}),t.jsx("button",{onClick:a=>{a.stopPropagation(),p(e.id)},className:"ml-4 text-gray-400 hover:text-red-600",children:t.jsx(N,{className:"h-5 w-5"})})]})},e.id))}),o>1&&t.jsxs("div",{className:"mt-6 flex justify-center space-x-2",children:[t.jsx("button",{onClick:()=>m(e=>Math.max(1,e-1)),disabled:r===1,className:"px-4 py-2 border border-gray-300 rounded-md text-sm font-medium text-gray-700 bg-white hover:bg-gray-50 disabled:opacity-50 disabled:cursor-not-allowed",children:"Previous"}),t.jsxs("span",{className:"px-4 py-2 text-sm text-gray-700",children:["Page ",r," of ",o]}),t.jsx("button",{onClick:()=>m(e=>Math.min(o,e+1)),disabled:r===o,className:"px-4 py-2 border border-gray-300 rounded-md text-sm font-medium text-gray-700 bg-white hover:bg-gray-50 disabled:opacity-50 disabled:cursor-not-allowed",children:"Next"})]})]})]})}function E(){const{darkMode:l}=j();return t.jsx("div",{className:`min-h-screen transition-colors duration-300 ${l?"bg-gray-900":"bg-gray-50"}`,children:t.jsx(w,{})})}export{E as default};
