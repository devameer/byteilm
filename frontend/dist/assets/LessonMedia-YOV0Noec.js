import{j as e}from"./charts-8gUIbWxc.js";import{b as a,i as ve,c as je}from"./vendor-125d4HLq.js";import{b as W,u as ye}from"./index-DB2kzkDV.js";import{L as he,C as we}from"./LessonMediaSkeleton-DPE0ddTS.js";function ne({size:s="md",text:m="Ø¬Ø§Ø±ÙŠ Ø§Ù„ØªØ­Ù…ÙŠÙ„..."}){const u={sm:"w-6 h-6",md:"w-12 h-12",lg:"w-16 h-16"};return e.jsxs("div",{className:"flex flex-col items-center justify-center py-12",children:[e.jsxs("div",{className:`${u[s]} relative`,children:[e.jsx("div",{className:"absolute inset-0 rounded-full border-4 border-gray-200"}),e.jsx("div",{className:"absolute inset-0 rounded-full border-4 border-blue-600 border-t-transparent animate-spin"})]}),m&&e.jsx("p",{className:"mt-4 text-gray-600 text-sm font-medium",children:m})]})}const se={ar:"Ø§Ù„Ø¹Ø±Ø¨ÙŠØ©",en:"English",fr:"FranÃ§ais",es:"EspaÃ±ol",de:"Deutsch"};function Ne({lessonId:s,video:m,onUploadSuccess:u,onOpenAIGenerator:h}){const[c,g]=a.useState(!1),[E,y]=a.useState(null),[b,H]=a.useState("ar"),[M,L]=a.useState(null),[S,N]=a.useState(""),[V,A]=a.useState(!1),[T,G]=a.useState(!1),R=a.useRef(null),F=async l=>{var D,v;const o=l.target.files[0];if(!o)return;const k=o.name.split(".").pop().toLowerCase();if(!["srt","vtt"].includes(k)){y("Ù†ÙˆØ¹ Ù…Ù„Ù Ø§Ù„ØªØ±Ø¬Ù…Ø© ØºÙŠØ± Ù…Ø¯Ø¹ÙˆÙ…. Ø§Ù„Ø£Ù†ÙˆØ§Ø¹ Ø§Ù„Ù…Ø¯Ø¹ÙˆÙ…Ø©: SRT, VTT");return}const f=5*1024*1024;if(o.size>f){y("Ø­Ø¬Ù… Ù…Ù„Ù Ø§Ù„ØªØ±Ø¬Ù…Ø© ÙŠØ¬Ø¨ Ø£Ù† Ù„Ø§ ÙŠØªØ¬Ø§ÙˆØ² 5 Ù…ÙŠØ¬Ø§Ø¨Ø§ÙŠØª");return}y(null),g(!0);const U=new FormData;U.append("subtitle",o),U.append("language",b),U.append("language_name",se[b]);try{const q=await W.post(`/lessons/${s}/video/subtitles`,U,{headers:{"Content-Type":"multipart/form-data"}});q.data.success&&(u(q.data.data),R.current&&(R.current.value=""),A(!1))}catch(q){y(((v=(D=q.response)==null?void 0:D.data)==null?void 0:v.message)||"ÙØ´Ù„ Ø±ÙØ¹ Ù…Ù„Ù Ø§Ù„ØªØ±Ø¬Ù…Ø©")}finally{g(!1)}},P=async l=>{var o,k;if(confirm("Ù‡Ù„ Ø£Ù†Øª Ù…ØªØ£ÙƒØ¯ Ù…Ù† Ø­Ø°Ù Ù…Ù„Ù Ø§Ù„ØªØ±Ø¬Ù…Ø©ØŸ"))try{(await W.delete(`/subtitles/${l}`)).data.success&&u(null,l)}catch(f){y(((k=(o=f.response)==null?void 0:o.data)==null?void 0:k.message)||"ÙØ´Ù„ Ø­Ø°Ù Ù…Ù„Ù Ø§Ù„ØªØ±Ø¬Ù…Ø©")}},z=l=>{L(l.id),N(l.language),y(null)},d=()=>{L(null),N(""),y(null)},I=async l=>{var o,k;if(!S){y("ÙŠØ±Ø¬Ù‰ Ø§Ø®ØªÙŠØ§Ø± Ø§Ù„Ù„ØºØ©");return}g(!0),y(null);try{const f=await W.patch(`/subtitles/${l}/language`,{language:S,language_name:se[S]});f.data.success&&(u(f.data.data),L(null),N(""))}catch(f){y(((k=(o=f.response)==null?void 0:o.data)==null?void 0:k.message)||"ÙØ´Ù„ ØªØ­Ø¯ÙŠØ« Ù„ØºØ© Ø§Ù„ØªØ±Ø¬Ù…Ø©")}finally{g(!1)}};return m?e.jsxs("div",{className:"space-y-4",children:[e.jsx("h3",{className:"text-lg font-semibold",children:"Ø§Ù„ØªØ±Ø¬Ù…Ø§Øª"}),m.subtitles&&m.subtitles.length>0&&e.jsxs("div",{className:"space-y-2",children:[e.jsx("h4",{className:"text-sm font-medium text-gray-700",children:"Ø§Ù„ØªØ±Ø¬Ù…Ø§Øª Ø§Ù„Ù…ÙˆØ¬ÙˆØ¯Ø©:"}),m.subtitles.map(l=>e.jsx("div",{className:"p-3 bg-gray-50 border rounded",children:M===l.id?e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"ØªØ¹Ø¯ÙŠÙ„ Ø§Ù„Ù„ØºØ©"}),e.jsx("select",{value:S,onChange:o=>N(o.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded focus:ring-2 focus:ring-blue-500 focus:border-blue-500",disabled:c,children:Object.entries(se).map(([o,k])=>e.jsx("option",{value:o,children:k},o))})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx("button",{onClick:()=>I(l.id),disabled:c,className:"px-3 py-1 text-sm bg-green-500 text-white rounded hover:bg-green-600 disabled:opacity-50",children:c?"Ø¬Ø§Ø±ÙŠ Ø§Ù„Ø­ÙØ¸...":"Ø­ÙØ¸"}),e.jsx("button",{onClick:d,disabled:c,className:"px-3 py-1 text-sm bg-gray-500 text-white rounded hover:bg-gray-600 disabled:opacity-50",children:"Ø¥Ù„ØºØ§Ø¡"})]})]}):e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"font-medium",children:l.language_name}),e.jsxs("p",{className:"text-sm text-gray-600",children:[l.file_name," â€¢ ",l.formatted_size]})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx("button",{onClick:()=>z(l),className:"px-3 py-1 text-sm bg-blue-500 text-white rounded hover:bg-blue-600",children:"ØªØ¹Ø¯ÙŠÙ„ Ø§Ù„Ù„ØºØ©"}),e.jsx("button",{onClick:()=>P(l.id),className:"px-3 py-1 text-sm bg-red-500 text-white rounded hover:bg-red-600",children:"Ø­Ø°Ù"})]})]})},l.id))]}),e.jsxs("div",{className:"border rounded-lg p-4",children:[e.jsx("h4",{className:"text-sm font-medium text-gray-700 mb-3",children:"Ø¥Ø¶Ø§ÙØ© ØªØ±Ø¬Ù…Ø© Ø¬Ø¯ÙŠØ¯Ø©:"}),!V&&!T&&e.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[e.jsxs("button",{onClick:()=>G(!0),className:"flex flex-col items-center justify-center p-4 border-2 border-dashed border-purple-300 rounded-lg hover:border-purple-500 hover:bg-purple-50 transition-all",children:[e.jsx("svg",{className:"w-8 h-8 text-purple-500 mb-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9.663 17h4.673M12 3v1m6.364 1.636l-.707.707M21 12h-1M4 12H3m3.343-5.657l-.707-.707m2.828 9.9a5 5 0 117.072 0l-.548.547A3.374 3.374 0 0014 18.469V19a2 2 0 11-4 0v-.531c0-.895-.356-1.754-.988-2.386l-.548-.547z"})}),e.jsx("span",{className:"text-sm font-medium text-purple-700",children:"ØªØ­ÙˆÙŠÙ„ Ø¹Ø¨Ø± AI"}),e.jsx("span",{className:"text-xs text-gray-500 mt-1",children:"ØªÙØ±ÙŠØº ÙˆØªØ±Ø¬Ù…Ø© ØªÙ„Ù‚Ø§Ø¦ÙŠØ©"})]}),e.jsxs("button",{onClick:()=>A(!0),className:"flex flex-col items-center justify-center p-4 border-2 border-dashed border-blue-300 rounded-lg hover:border-blue-500 hover:bg-blue-50 transition-all",children:[e.jsx("svg",{className:"w-8 h-8 text-blue-500 mb-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M7 16a4 4 0 01-.88-7.903A5 5 0 1115.9 6L16 6a5 5 0 011 9.9M15 13l-3-3m0 0l-3 3m3-3v12"})}),e.jsx("span",{className:"text-sm font-medium text-blue-700",children:"Ø¥Ø¶Ø§ÙØ© Ù…Ù„Ù"}),e.jsx("span",{className:"text-xs text-gray-500 mt-1",children:"Ø±ÙØ¹ Ù…Ù„Ù VTT Ø£Ùˆ SRT"})]})]}),V&&e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsx("span",{className:"text-sm font-medium text-gray-700",children:"Ø±ÙØ¹ Ù…Ù„Ù ØªØ±Ø¬Ù…Ø©"}),e.jsx("button",{onClick:()=>{A(!1),y(null)},className:"text-xs text-gray-500 hover:text-gray-700",children:"Ø¥Ù„ØºØ§Ø¡"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Ø§Ù„Ù„ØºØ©"}),e.jsx("select",{value:b,onChange:l=>H(l.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded focus:ring-2 focus:ring-blue-500 focus:border-blue-500",disabled:c,children:Object.entries(se).map(([l,o])=>e.jsx("option",{value:l,children:o},l))})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Ù…Ù„Ù Ø§Ù„ØªØ±Ø¬Ù…Ø©"}),e.jsx("input",{ref:R,type:"file",accept:".srt,.vtt",onChange:F,disabled:c,className:"w-full px-3 py-2 border border-gray-300 rounded focus:ring-2 focus:ring-blue-500 focus:border-blue-500"}),e.jsx("p",{className:"mt-1 text-xs text-gray-500",children:"Ø§Ù„Ø£Ù†ÙˆØ§Ø¹ Ø§Ù„Ù…Ø¯Ø¹ÙˆÙ…Ø©: SRT, VTT (Ø­ØªÙ‰ 5 Ù…ÙŠØ¬Ø§Ø¨Ø§ÙŠØª)"})]}),c&&e.jsxs("div",{className:"flex items-center justify-center py-2",children:[e.jsx("div",{className:"animate-spin rounded-full h-6 w-6 border-b-2 border-blue-500"}),e.jsx("span",{className:"mr-2 text-sm text-gray-600",children:"Ø¬Ø§Ø±ÙŠ Ø§Ù„Ø±ÙØ¹..."})]})]}),T&&e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsx("span",{className:"text-sm font-medium text-gray-700",children:"Ø§Ù„ØªØ­ÙˆÙŠÙ„ Ø¹Ø¨Ø± AI"}),e.jsx("button",{onClick:()=>{G(!1),y(null)},className:"text-xs text-gray-500 hover:text-gray-700",children:"Ø¥Ù„ØºØ§Ø¡"})]}),e.jsxs("div",{className:"p-4 bg-gradient-to-r from-purple-50 to-indigo-50 border border-purple-200 rounded-lg",children:[e.jsx("p",{className:"text-sm text-gray-700 mb-3",children:"Ø§Ø³ØªØ®Ø¯Ù… Ø§Ù„Ø°ÙƒØ§Ø¡ Ø§Ù„Ø§ØµØ·Ù†Ø§Ø¹ÙŠ Ù„ØªÙØ±ÙŠØº Ø§Ù„ÙÙŠØ¯ÙŠÙˆ ØªÙ„Ù‚Ø§Ø¦ÙŠØ§Ù‹ ÙˆØ¥Ù†Ø´Ø§Ø¡ Ø§Ù„ØªØ±Ø¬Ù…Ø§Øª"}),h?e.jsx("button",{onClick:()=>{G(!1),h()},className:"w-full px-4 py-2 bg-gradient-to-r from-purple-500 to-indigo-600 text-white rounded-lg hover:from-purple-600 hover:to-indigo-700 font-medium transition-all",children:"Ø§Ù†ØªÙ‚Ù„ Ø¥Ù„Ù‰ Ø£Ø¯Ø§Ø© Ø§Ù„ØªÙØ±ÙŠØº Ø§Ù„ØªÙ„Ù‚Ø§Ø¦ÙŠ"}):e.jsx("p",{className:"text-xs text-gray-600 text-center",children:"ÙŠÙˆØ¬Ø¯ Ø£Ø¯Ø§Ø© Ø§Ù„ØªÙØ±ÙŠØº Ø§Ù„ØªÙ„Ù‚Ø§Ø¦ÙŠ ÙÙŠ Ù†ÙØ³ Ø§Ù„ØµÙØ­Ø© Ø£Ø¹Ù„Ø§Ù‡"})]})]})]}),E&&e.jsx("div",{className:"p-3 bg-red-50 border border-red-200 rounded text-red-700 text-sm",children:E})]}):e.jsx("div",{className:"p-4 bg-yellow-50 border border-yellow-200 rounded text-yellow-700",children:"ÙŠØ¬Ø¨ Ø±ÙØ¹ Ø§Ù„ÙÙŠØ¯ÙŠÙˆ Ø£ÙˆÙ„Ø§Ù‹ Ù‚Ø¨Ù„ Ø¥Ø¶Ø§ÙØ© Ø§Ù„ØªØ±Ø¬Ù…Ø§Øª"})}function ke({lessonId:s,video:m,onSuccess:u}){const[h,c]=a.useState(!1),[g,E]=a.useState(!1),[y,b]=a.useState(null),[H,M]=a.useState(null),[L,S]=a.useState(""),[N,V]=a.useState(null),[A,T]=a.useState("idle"),[G,R]=a.useState(!1),[F,P]=a.useState([]),[z,d]=a.useState(!1),[I,l]=a.useState(0),[o,k]=a.useState(""),f=a.useRef(null);a.useEffect(()=>()=>{f.current&&clearInterval(f.current)},[]);const U=[{code:"ar",name:"Ø§Ù„Ø¹Ø±Ø¨ÙŠØ©"},{code:"en",name:"English"},{code:"fr",name:"FranÃ§ais"},{code:"es",name:"EspaÃ±ol"},{code:"de",name:"Deutsch"},{code:"it",name:"Italiano"},{code:"pt",name:"PortuguÃªs"},{code:"ru",name:"Ğ ÑƒÑÑĞºĞ¸Ğ¹"},{code:"zh",name:"ä¸­æ–‡"},{code:"ja",name:"æ—¥æœ¬èª"},{code:"ko",name:"í•œêµ­ì–´"},{code:"tr",name:"TÃ¼rkÃ§e"},{code:"hi",name:"à¤¹à¤¿à¤¨à¥à¤¦à¥€"},{code:"ur",name:"Ø§Ø±Ø¯Ùˆ"}],D=async()=>{var p,i;if(!m){b("ÙŠØ¬Ø¨ Ø±ÙØ¹ Ø§Ù„ÙÙŠØ¯ÙŠÙˆ Ø£ÙˆÙ„Ø§Ù‹");return}try{c(!0),b(null),M(null),T("transcribing"),l(0),k("Ø¬Ø§Ø±ÙŠ Ø§Ù„Ø§ØªØµØ§Ù„...");const $=setInterval(()=>{l(j=>{if(j<90){const C=Math.random()*5+1,w=Math.min(j+C,90);return w<20?k("Ø±ÙØ¹ Ø§Ù„ÙÙŠØ¯ÙŠÙˆ..."):w<50?k("Ù…Ø¹Ø§Ù„Ø¬Ø© Ø§Ù„Ù…Ù„Ù..."):w<80?k("ØªÙØ±ÙŠØº Ø§Ù„ÙÙŠØ¯ÙŠÙˆ..."):k("Ø¥Ù†Ù‡Ø§Ø¡ Ø§Ù„Ø¹Ù…Ù„ÙŠØ©..."),w}return j})},2e3),x=await W.post(`/lessons/${s}/video/transcribe`);if(clearInterval($),l(100),k("Ø§ÙƒØªÙ…Ù„ Ø§Ù„ØªÙØ±ÙŠØº!"),x.data.success){const j=x.data.data.transcript;S(j),await v(j)}}catch($){b(((i=(p=$.response)==null?void 0:p.data)==null?void 0:i.message)||"ÙØ´Ù„ ÙÙŠ ØªÙØ±ÙŠØº Ø§Ù„ÙÙŠØ¯ÙŠÙˆ"),T("idle"),c(!1)}},v=async p=>{var i,$,x,j;try{const C=await W.post(`/lessons/${s}/video/detect-language`,{text:p});if(C.data.success){const w={code:C.data.data.language_code,name:C.data.data.language_name};V(w),E(!0);try{const _=await W.post(`/lessons/${s}/video/save-as-subtitle`,{text:p,language:w.code,language_name:w.name});_.data.success&&(M(`ØªÙ… Ø§Ù„ØªÙØ±ÙŠØº Ø¨Ù†Ø¬Ø§Ø­! Ø§Ù„Ù„ØºØ© Ø§Ù„Ù…ÙƒØªØ´ÙØ©: ${w.name}`),u&&u(_.data.data))}catch(_){b("ØªÙ… Ø§Ù„ØªÙØ±ÙŠØº Ø¨Ù†Ø¬Ø§Ø­ Ù„ÙƒÙ† ÙØ´Ù„ Ø­ÙØ¸ Ø§Ù„ØªØ±Ø¬Ù…Ø©: "+((($=(i=_.response)==null?void 0:i.data)==null?void 0:$.message)||"Ø®Ø·Ø£ ØºÙŠØ± Ù…Ø¹Ø±ÙˆÙ"))}finally{E(!1)}}}catch{V({code:"en",name:"English"}),E(!0);try{const w=await W.post(`/lessons/${s}/video/save-as-subtitle`,{text:p,language:"en",language_name:"English"});w.data.success&&(M("ØªÙ… Ø§Ù„ØªÙØ±ÙŠØº ÙˆØ­ÙØ¸Ù‡ ÙƒÙ€ English (Ø§ÙØªØ±Ø§Ø¶ÙŠ)"),u&&u(w.data.data))}catch(w){b("ØªÙ… Ø§Ù„ØªÙØ±ÙŠØº Ø¨Ù†Ø¬Ø§Ø­ Ù„ÙƒÙ† ÙØ´Ù„ Ø­ÙØ¸ Ø§Ù„ØªØ±Ø¬Ù…Ø©: "+(((j=(x=w.response)==null?void 0:x.data)==null?void 0:j.message)||"Ø®Ø·Ø£ ØºÙŠØ± Ù…Ø¹Ø±ÙˆÙ"))}finally{E(!1)}}T("transcribed"),c(!1)},q=async()=>{var p,i;if(F.length===0){b("ÙŠØ±Ø¬Ù‰ Ø§Ø®ØªÙŠØ§Ø± Ù„ØºØ© ÙˆØ§Ø­Ø¯Ø© Ø¹Ù„Ù‰ Ø§Ù„Ø£Ù‚Ù„");return}try{d(!0),b(null),M(null);let $=0,x=0;for(const j of F)try{const C=await W.post(`/lessons/${s}/video/translate`,{text:L,target_language:j.code,target_language_name:j.name});if(C.data.success){const w=await W.post(`/lessons/${s}/video/save-as-subtitle`,{text:C.data.data.translated_text,language:j.code,language_name:j.name});w.data.success?($++,u&&u(w.data.data)):x++}else x++}catch(C){x++,console.error(`Failed to translate to ${j.name}:`,C)}$>0?(M(`ØªÙ… Ø¥Ø¶Ø§ÙØ© ${$} ØªØ±Ø¬Ù…Ø© Ø¨Ù†Ø¬Ø§Ø­!${x>0?` (ÙØ´Ù„ ${x})`:""}`),P([]),R(!1)):b("ÙØ´Ù„ ÙÙŠ Ø¥Ø¶Ø§ÙØ© Ø§Ù„ØªØ±Ø¬Ù…Ø§Øª")}catch($){b(((i=(p=$.response)==null?void 0:p.data)==null?void 0:i.message)||"Ø­Ø¯Ø« Ø®Ø·Ø£ Ø£Ø«Ù†Ø§Ø¡ Ø¥Ø¶Ø§ÙØ© Ø§Ù„ØªØ±Ø¬Ù…Ø§Øª")}finally{d(!1)}},ae=p=>{N&&p.code===N.code||P(i=>i.find(x=>x.code===p.code)?i.filter(x=>x.code!==p.code):[...i,p])},ee=(p,i)=>{const $=le(p),x=new Blob([$],{type:"text/vtt;charset=utf-8"}),j=URL.createObjectURL(x),C=document.createElement("a");C.href=j,C.download=`${s}_${i}_subtitles.vtt`,document.body.appendChild(C),C.click(),document.body.removeChild(C),URL.revokeObjectURL(j)},le=p=>{let i=`WEBVTT

`;const $=p.split(`
`);let x=1,j="00:00:00.000";for(let C=0;C<$.length;C++){const w=$[C].trim();if(!w)continue;const _=w.match(/\[(\d{1,2}):(\d{2}):(\d{2})\]|\[(\d{1,2}):(\d{2})\]/);if(_){let K,Y,X;_[1]?(K=_[1].padStart(2,"0"),Y=_[2],X=_[3]):(K="00",Y=_[4].padStart(2,"0"),X=_[5]);const Q=`${K}:${Y}:${X}.000`,J=w.replace(/\[[\d:]+\]\s*/,"").trim();J&&(i+=`${x}
`,i+=`${j} --> ${Q}
`,i+=`${J}

`,x++,j=Q)}else if(w){const K=j.split(":"),Y=parseInt(K[0]),X=parseInt(K[1]),J=parseFloat(K[2])+3,Z=`${Y.toString().padStart(2,"0")}:${X.toString().padStart(2,"0")}:${J.toFixed(3).padStart(6,"0")}`;i+=`${x}
`,i+=`${j} --> ${Z}
`,i+=`${w}

`,x++,j=Z}}return i},oe=p=>{navigator.clipboard.writeText(p),alert("ØªÙ… Ø§Ù„Ù†Ø³Ø® Ø¥Ù„Ù‰ Ø§Ù„Ø­Ø§ÙØ¸Ø©")},te=()=>{S(""),V(null),T("idle"),b(null),M(null),R(!1),P([])};return e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("h3",{className:"text-lg font-semibold",children:"ØªÙØ±ÙŠØº Ø§Ù„ÙÙŠØ¯ÙŠÙˆ ÙˆØ¥Ù†Ø´Ø§Ø¡ ØªØ±Ø¬Ù…Ø§Øª"}),A!=="idle"&&e.jsx("button",{onClick:te,className:"text-sm text-gray-500 hover:text-gray-700",children:"Ø¥Ø¹Ø§Ø¯Ø© ØªØ¹ÙŠÙŠÙ†"})]}),y&&e.jsx("div",{className:"bg-red-50 border border-red-200 rounded-lg p-4 text-red-700 text-sm",children:y}),H&&e.jsx("div",{className:"bg-green-50 border border-green-200 rounded-lg p-4 text-green-700 text-sm",children:H}),!m&&e.jsx("div",{className:"bg-yellow-50 border border-yellow-200 rounded-lg p-4 text-yellow-700 text-sm",children:"ÙŠØ¬Ø¨ Ø±ÙØ¹ Ø§Ù„ÙÙŠØ¯ÙŠÙˆ Ø£ÙˆÙ„Ø§Ù‹ Ù‚Ø¨Ù„ Ø§Ø³ØªØ®Ø¯Ø§Ù… Ø®Ø§ØµÙŠØ© Ø§Ù„ØªÙØ±ÙŠØº Ø§Ù„ØªÙ„Ù‚Ø§Ø¦ÙŠ"}),m&&A==="idle"&&e.jsxs("div",{className:"space-y-4",children:[e.jsx("p",{className:"text-sm text-gray-600",children:"Ù‚Ù… Ø¨ØªÙØ±ÙŠØº Ø§Ù„ÙÙŠØ¯ÙŠÙˆ ØªÙ„Ù‚Ø§Ø¦ÙŠØ§Ù‹ Ø¨Ø§Ø³ØªØ®Ø¯Ø§Ù… Ø§Ù„Ø°ÙƒØ§Ø¡ Ø§Ù„Ø§ØµØ·Ù†Ø§Ø¹ÙŠ (Gemini AI). Ø³ÙŠØªÙ… Ø§Ø³ØªØ®Ø±Ø§Ø¬ Ø§Ù„Ù†Øµ Ù…Ø¹ Ø§Ù„Ø·ÙˆØ§Ø¨Ø¹ Ø§Ù„Ø²Ù…Ù†ÙŠØ© ÙˆØªØ­Ø¯ÙŠØ¯ Ø§Ù„Ù„ØºØ© ØªÙ„Ù‚Ø§Ø¦ÙŠØ§Ù‹."}),e.jsx("button",{onClick:D,disabled:h,className:"w-full px-4 py-3 bg-gradient-to-r from-purple-500 to-indigo-600 text-white rounded-lg hover:from-purple-600 hover:to-indigo-700 disabled:opacity-50 disabled:cursor-not-allowed font-medium transition-all shadow-md hover:shadow-lg",children:h?e.jsxs("span",{className:"flex items-center justify-center gap-2",children:[e.jsx(ne,{}),"Ø¬Ø§Ø±ÙŠ Ø§Ù„ØªÙØ±ÙŠØº..."]}):"Ø¨Ø¯Ø¡ Ø§Ù„ØªÙØ±ÙŠØº Ø§Ù„ØªÙ„Ù‚Ø§Ø¦ÙŠ"})]}),A==="transcribing"&&e.jsxs("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-6",children:[e.jsx("div",{className:"flex justify-center",children:e.jsx(ne,{})}),e.jsx("p",{className:"mt-4 text-blue-700 font-medium text-center",children:o||"Ø¬Ø§Ø±ÙŠ ØªÙØ±ÙŠØº Ø§Ù„ÙÙŠØ¯ÙŠÙˆ..."}),e.jsxs("div",{className:"mt-4",children:[e.jsxs("div",{className:"flex justify-between text-sm text-blue-600 mb-1",children:[e.jsx("span",{children:"Ø§Ù„ØªÙ‚Ø¯Ù…"}),e.jsxs("span",{children:[I,"%"]})]}),e.jsx("div",{className:"w-full bg-blue-100 rounded-full h-2.5",children:e.jsx("div",{className:"bg-blue-600 h-2.5 rounded-full transition-all duration-500",style:{width:`${I}%`}})})]}),e.jsx("p",{className:"mt-4 text-sm text-blue-600 text-center",children:"Ù‡Ø°Ù‡ Ø§Ù„Ø¹Ù…Ù„ÙŠØ© Ù‚Ø¯ ØªØ³ØªØºØ±Ù‚ Ø¹Ø¯Ø© Ø¯Ù‚Ø§Ø¦Ù‚ Ø­Ø³Ø¨ Ø·ÙˆÙ„ Ø§Ù„ÙÙŠØ¯ÙŠÙˆ"}),e.jsx("p",{className:"mt-2 text-xs text-blue-500 text-center",children:"Ù„Ø§ ØªÙ‚Ù… Ø¨Ø¥ØºÙ„Ø§Ù‚ Ù‡Ø°Ù‡ Ø§Ù„ØµÙØ­Ø© Ø£Ø«Ù†Ø§Ø¡ Ø§Ù„ØªÙØ±ÙŠØº"})]}),A==="transcribed"&&e.jsxs("div",{className:"space-y-4",children:[N&&e.jsxs("div",{className:"flex items-center gap-2 bg-blue-50 border border-blue-200 rounded-lg p-3",children:[e.jsx("svg",{className:"w-5 h-5 text-blue-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M3 5h12M9 3v2m1.048 9.5A18.022 18.022 0 016.412 9m6.088 9h7M11 21l5-10 5 10M12.751 5C11.783 10.77 8.07 15.61 3 18.129"})}),e.jsxs("span",{className:"text-sm text-blue-800 font-medium",children:["Ø§Ù„Ù„ØºØ© Ø§Ù„Ù…ÙƒØªØ´ÙØ©: ",N.name," (",N.code,")"]})]}),e.jsxs("div",{className:"border rounded-lg overflow-hidden",children:[e.jsxs("div",{className:"bg-gray-50 px-4 py-3 border-b flex items-center justify-between",children:[e.jsx("h4",{className:"font-medium",children:"Ø§Ù„Ù†Øµ Ø§Ù„Ø£ØµÙ„ÙŠ (Ù…Ø­ÙÙˆØ¸ ØªÙ„Ù‚Ø§Ø¦ÙŠØ§Ù‹)"}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx("button",{onClick:()=>oe(L),className:"text-sm px-3 py-1 bg-white border rounded hover:bg-gray-50",children:"Ù†Ø³Ø®"}),e.jsx("button",{onClick:()=>ee(L,"original"),className:"text-sm px-3 py-1 bg-blue-500 text-white rounded hover:bg-blue-600",children:"ØªØ­Ù…ÙŠÙ„ VTT"})]})]}),e.jsx("div",{className:"p-4 max-h-96 overflow-y-auto bg-white",children:e.jsx("pre",{className:"whitespace-pre-wrap text-sm font-mono",children:L})})]}),!G&&e.jsxs("button",{onClick:()=>R(!0),className:"w-full px-4 py-3 bg-gradient-to-r from-green-500 to-teal-600 text-white rounded-lg hover:from-green-600 hover:to-teal-700 font-medium transition-all shadow-md hover:shadow-lg flex items-center justify-center gap-2",children:[e.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 4v16m8-8H4"})}),"Ø¥Ø¶Ø§ÙØ© ØªØ±Ø¬Ù…Ø§Øª Ù„Ù„ØºØ§Øª Ø£Ø®Ø±Ù‰"]}),G&&e.jsxs("div",{className:"border rounded-lg overflow-hidden bg-white",children:[e.jsxs("div",{className:"bg-gradient-to-r from-green-50 to-teal-50 px-4 py-3 border-b",children:[e.jsx("h4",{className:"font-medium text-green-800",children:"Ø§Ø®ØªØ± Ø§Ù„Ù„ØºØ§Øª Ù„Ù„ØªØ±Ø¬Ù…Ø©"}),e.jsx("p",{className:"text-sm text-green-600 mt-1",children:"Ø§Ø®ØªØ± Ù„ØºØ© Ø£Ùˆ Ø£ÙƒØ«Ø± Ù„ØªØ±Ø¬Ù…Ø© Ø§Ù„Ù†Øµ Ø§Ù„Ø£ØµÙ„ÙŠ Ø¥Ù„ÙŠÙ‡Ø§"})]}),e.jsxs("div",{className:"p-4",children:[e.jsx("div",{className:"grid grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-2",children:U.map(p=>{const i=N&&p.code===N.code,$=F.find(x=>x.code===p.code);return e.jsxs("button",{onClick:()=>ae(p),disabled:i,className:`px-3 py-2 rounded-lg text-sm font-medium transition-all ${i?"bg-gray-100 text-gray-400 cursor-not-allowed":$?"bg-green-500 text-white hover:bg-green-600":"bg-gray-50 text-gray-700 hover:bg-gray-100 border border-gray-200"}`,children:[p.name,i&&" (Ø§Ù„Ø£ØµÙ„ÙŠØ©)"]},p.code)})}),e.jsxs("div",{className:"flex gap-2 mt-4 pt-4 border-t",children:[e.jsx("button",{onClick:q,disabled:z||F.length===0,className:"flex-1 px-4 py-2 bg-green-500 text-white rounded-lg hover:bg-green-600 disabled:opacity-50 disabled:cursor-not-allowed font-medium",children:z?e.jsxs("span",{className:"flex items-center justify-center gap-2",children:[e.jsx(ne,{}),"Ø¬Ø§Ø±ÙŠ Ø§Ù„ØªØ±Ø¬Ù…Ø©..."]}):`ØªØ±Ø¬Ù…Ø© Ø¥Ù„Ù‰ ${F.length} Ù„ØºØ©`}),e.jsx("button",{onClick:()=>{R(!1),P([])},disabled:z,className:"px-4 py-2 bg-gray-200 text-gray-700 rounded-lg hover:bg-gray-300 disabled:opacity-50",children:"Ø¥Ù„ØºØ§Ø¡"})]})]})]})]}),e.jsxs("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-4 text-sm text-blue-800",children:[e.jsx("h4",{className:"font-medium mb-2",children:"Ù…Ù„Ø§Ø­Ø¸Ø§Øª:"}),e.jsxs("ul",{className:"space-y-1 list-disc list-inside",children:[e.jsx("li",{children:"Ø§Ù„Ø­Ø¯ Ø§Ù„Ø£Ù‚ØµÙ‰ Ù„Ø­Ø¬Ù… Ø§Ù„ÙÙŠØ¯ÙŠÙˆ Ù„Ù„ØªÙØ±ÙŠØº Ø§Ù„ØªÙ„Ù‚Ø§Ø¦ÙŠ: 20 Ù…ÙŠØ¬Ø§Ø¨Ø§ÙŠØª"}),e.jsx("li",{children:"ÙŠØ³ØªØ®Ø¯Ù… Ù‡Ø°Ø§ Ø§Ù„Ù†Ø¸Ø§Ù… Gemini AI Ù„ØªÙØ±ÙŠØº Ø§Ù„ÙÙŠØ¯ÙŠÙˆ ØªÙ„Ù‚Ø§Ø¦ÙŠØ§Ù‹"}),e.jsx("li",{children:"ÙŠØªÙ… ØªØ­Ø¯ÙŠØ¯ Ù„ØºØ© Ø§Ù„Ù†Øµ ØªÙ„Ù‚Ø§Ø¦ÙŠØ§Ù‹ Ø¨Ø¹Ø¯ Ø§Ù„ØªÙØ±ÙŠØº"}),e.jsx("li",{children:"ÙŠØªÙ… Ø§Ø³ØªØ®Ø±Ø§Ø¬ Ø§Ù„Ù†Øµ Ù…Ø±Ø© ÙˆØ§Ø­Ø¯Ø© ÙÙ‚Ø·ØŒ Ø«Ù… ØªØ±Ø¬Ù…ØªÙ‡ Ù„Ù„ØºØ§Øª Ø§Ù„Ø£Ø®Ø±Ù‰"}),e.jsx("li",{children:"Ù„Ù„ÙÙŠØ¯ÙŠÙˆÙ‡Ø§Øª Ø§Ù„Ø£ÙƒØ¨Ø± Ù…Ù† 20 Ù…ÙŠØ¬Ø§Ø¨Ø§ÙŠØªØŒ ÙŠØ±Ø¬Ù‰ Ø±ÙØ¹ Ù…Ù„Ù Ø§Ù„ØªØ±Ø¬Ù…Ø© ÙŠØ¯ÙˆÙŠØ§Ù‹"}),e.jsx("li",{children:"ÙŠÙ…ÙƒÙ†Ùƒ Ø¥Ø¶Ø§ÙØ© ØªØ±Ø¬Ù…Ø§Øª Ù„Ø£ÙŠ Ù„ØºØ© Ù…Ù† Ø§Ù„Ù„ØºØ§Øª Ø§Ù„Ù…Ø¯Ø¹ÙˆÙ…Ø©"}),e.jsx("li",{children:"Ø¹Ù…Ù„ÙŠØ© Ø§Ù„ØªÙØ±ÙŠØº Ø³Ø±ÙŠØ¹Ø© Ù„Ù„ÙÙŠØ¯ÙŠÙˆÙ‡Ø§Øª Ø§Ù„ØµØºÙŠØ±Ø© (Ø£Ù‚Ù„ Ù…Ù† Ø¯Ù‚ÙŠÙ‚Ø© Ø¹Ø§Ø¯Ø©Ù‹)"}),e.jsx("li",{children:"ØªØ£ÙƒØ¯ Ù…Ù† Ø¥Ø¶Ø§ÙØ© GEMINI_API_KEY ÙÙŠ Ù…Ù„Ù .env"})]})]})]})}function Se({video:s,darkMode:m}){var de;const u=a.useRef(null),h=a.useRef(null),[c,g]=a.useState(!1),[E,y]=a.useState(0),[b,H]=a.useState(0),[M,L]=a.useState(1),[S,N]=a.useState(!1),[V,A]=a.useState(1),[T,G]=a.useState(null),[R,F]=a.useState(!1),[P,z]=a.useState(!0),[d,I]=a.useState(!1),[l,o]=a.useState(!1),[k,f]=a.useState(!1),[U,D]=a.useState(0),[v,q]=a.useState({show:!1,direction:null,side:null}),[ae,ee]=a.useState(!1),[le,oe]=a.useState(!1),[te,p]=a.useState(""),i=a.useRef(null),$=a.useRef(0),x=a.useRef(null),j=a.useRef(null),C=()=>{z(!0),i.current&&clearTimeout(i.current),c&&(i.current=setTimeout(()=>{z(!1)},3e3))};a.useEffect(()=>{const t=u.current;if(!t)return;const r=()=>{H(t.duration),console.log("âœ… Video ready:",t.duration)},n=()=>{y(t.currentTime)},O=()=>g(!0),B=()=>{g(!1),z(!0)},re=()=>I(!0),ue=()=>I(!1),xe=be=>{console.error("âŒ Video error:",t.error)},me=()=>{if(t.buffered.length>0){const fe=t.buffered.end(t.buffered.length-1)/t.duration*100;D(fe)}};return t.addEventListener("loadedmetadata",r),t.addEventListener("timeupdate",n),t.addEventListener("play",O),t.addEventListener("pause",B),t.addEventListener("waiting",re),t.addEventListener("canplay",ue),t.addEventListener("error",xe),t.addEventListener("progress",me),()=>{t.removeEventListener("loadedmetadata",r),t.removeEventListener("timeupdate",n),t.removeEventListener("play",O),t.removeEventListener("pause",B),t.removeEventListener("waiting",re),t.removeEventListener("canplay",ue),t.removeEventListener("error",xe),t.removeEventListener("progress",me),i.current&&clearTimeout(i.current)}},[c]),a.useEffect(()=>{if(s.subtitles&&s.subtitles.length>0){const t=s.subtitles.find(r=>r.language==="ar");t&&G(t)}},[s.subtitles]),a.useEffect(()=>{const t=u.current;if(!t)return;const r=t.textTracks;for(let B=0;B<r.length;B++)r[B].mode="hidden";let n=null;if(T){for(let B=0;B<r.length;B++)if(r[B].language===T.language){n=r[B],n.mode="hidden";break}}const O=()=>{if(n&&n.activeCues&&n.activeCues.length>0){const B=n.activeCues[0].text;p(B)}else p("")};return n&&n.addEventListener("cuechange",O),()=>{n&&n.removeEventListener("cuechange",O)}},[T]),a.useEffect(()=>{const t=()=>{F(!!document.fullscreenElement)};return document.addEventListener("fullscreenchange",t),()=>document.removeEventListener("fullscreenchange",t)},[]),a.useEffect(()=>{const t=r=>{var O;const n=u.current;if(n&&!(r.target.tagName==="INPUT"||r.target.tagName==="TEXTAREA"))switch(r.key){case" ":case"k":r.preventDefault(),n.paused?n.play():n.pause();break;case"ArrowLeft":r.preventDefault(),n.currentTime=Math.max(0,n.currentTime-10);break;case"ArrowRight":r.preventDefault(),n.currentTime=Math.min(n.duration,n.currentTime+10);break;case"ArrowUp":r.preventDefault(),n.volume=Math.min(1,n.volume+.1),L(n.volume);break;case"ArrowDown":r.preventDefault(),n.volume=Math.max(0,n.volume-.1),L(n.volume);break;case"m":case"M":r.preventDefault(),n.muted=!n.muted,N(n.muted);break;case"f":case"F":r.preventDefault(),document.fullscreenElement?document.exitFullscreen():(O=h.current)==null||O.requestFullscreen();break;case"p":case"P":r.preventDefault(),document.pictureInPictureElement?document.exitPictureInPicture():document.pictureInPictureEnabled&&n.requestPictureInPicture();break}};return document.addEventListener("keydown",t),()=>document.removeEventListener("keydown",t)},[]);const w=()=>{const t=u.current;t&&(c?t.pause():t.play())},_=t=>{const r=u.current;if(!r)return;const n=r.currentTime+t;r.currentTime=Math.max(0,Math.min(r.duration||1/0,n))},K=t=>{const r=u.current;if(!r)return;const n=parseFloat(t.target.value);r.currentTime=n,y(n)},Y=t=>{const r=parseFloat(t.target.value);L(r),u.current&&(u.current.volume=r),r>0&&N(!1)},X=()=>{const t=u.current;t&&(t.muted=!S,N(!S))},Q=t=>{const r=u.current;r&&(r.playbackRate=t,A(t),f(!1))},J=()=>{const t=h.current;t&&(document.fullscreenElement?(document.exitFullscreen(),F(!1)):(t.requestFullscreen(),F(!0)))},Z=t=>{if(!t||isNaN(t))return"0:00";const r=Math.floor(t/60),n=Math.floor(t%60);return`${r}:${n<10?"0":""}${n}`},ie=(t,r)=>{const n=Date.now(),O=n-$.current,B=window.matchMedia("(hover: hover)").matches;x.current&&(clearTimeout(x.current),x.current=null),O<300&&O>0&&j.current===r?B?J():(_(r==="right"?10:-10),q({show:!0,direction:r==="right"?"forward":"backward",side:r}),setTimeout(()=>q({show:!1,direction:null,side:null}),500)):x.current=setTimeout(()=>{w(),C(),x.current=null},250),$.current=n,j.current=r},ge=async()=>{const t=u.current;if(t)try{document.pictureInPictureElement?(await document.exitPictureInPicture(),ee(!1)):document.pictureInPictureEnabled&&(await t.requestPictureInPicture(),ee(!0))}catch(r){console.error("PiP error:",r)}},pe=s.proxy_video_url||s.video_url,ce=b>0?E/b*100:0;return e.jsxs("div",{ref:h,className:`select-none
 relative group outline-none ${R?"fixed inset-0 z-50 bg-black":""}`,dir:"ltr",tabIndex:0,onMouseMove:C,onMouseLeave:()=>c&&z(!1),children:[e.jsxs("div",{className:`relative rounded-lg overflow-hidden ${m?"bg-gray-900":"bg-black"} ${R?"h-full w-full flex items-center justify-center":""}`,children:[e.jsxs("video",{ref:u,className:`w-full ${R?"h-full object-contain":""}`,crossOrigin:"anonymous",playsInline:!0,preload:"auto",style:{width:"100%",minHeight:R?"auto":"400px",maxHeight:R?"100vh":"600px",aspectRatio:"16/9",backgroundColor:"#000",cursor:"pointer"},children:[e.jsx("source",{src:pe,type:s.mime_type||"video/mp4"}),(de=s.subtitles)==null?void 0:de.map(t=>e.jsx("track",{kind:"subtitles",src:t.proxy_vtt_url||t.vtt_url,srcLang:t.language,label:t.language_name,default:t.language==="ar"},t.id))]}),d&&e.jsx("div",{className:"absolute inset-0 flex items-center justify-center bg-black bg-opacity-50",children:e.jsx("div",{className:"animate-spin rounded-full h-16 w-16 border-t-2 border-b-2 border-blue-500"})}),e.jsxs("div",{className:"absolute inset-0 flex z-10",children:[e.jsx("div",{className:"w-1/2 h-full cursor-pointer",onClick:t=>ie(t,"left")}),e.jsx("div",{className:"w-1/2 h-full cursor-pointer",onClick:t=>ie(t,"right")})]}),!c&&!d&&e.jsx("div",{className:"absolute inset-0 flex items-center justify-center z-20 pointer-events-none",children:e.jsx("div",{className:"bg-blue-500 rounded-full p-6 shadow-lg",children:e.jsx("svg",{className:"w-12 h-12 text-white",fill:"currentColor",viewBox:"0 0 20 20",children:e.jsx("path",{d:"M6.3 2.841A1.5 1.5 0 004 4.11V15.89a1.5 1.5 0 002.3 1.269l9.344-5.89a1.5 1.5 0 000-2.538L6.3 2.84z"})})})}),v.show&&e.jsxs("div",{className:`absolute top-0 bottom-0 ${v.side==="right"?"right-0 w-1/3":"left-0 w-1/3"} flex items-center justify-center pointer-events-none z-15`,children:[e.jsx("div",{className:"bg-white/30 rounded-full p-4 animate-ping",children:v.direction==="forward"?e.jsx("svg",{className:"w-10 h-10 text-white",fill:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{d:"M4 18l8.5-6L4 6v12zm9-12v12l8.5-6L13 6z"})}):e.jsx("svg",{className:"w-10 h-10 text-white",fill:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{d:"M11 18V6l-8.5 6 8.5 6zm.5-6l8.5 6V6l-8.5 6z"})})}),e.jsx("span",{className:"absolute bottom-1/4 text-white text-lg font-bold",children:v.direction==="forward"?"+10":"-10"})]}),te&&e.jsx("div",{className:"absolute left-0 right-0 z-25 flex justify-center pointer-events-none",style:{bottom:"100px"},children:e.jsx("div",{className:"px-4 py-2 rounded-lg text-center max-w-[80%]",style:{backgroundColor:"rgba(0, 0, 0, 0.85)",color:"white",fontSize:"1.25rem",lineHeight:"1.6",textShadow:"2px 2px 4px rgba(0,0,0,0.8)",direction:(T==null?void 0:T.language)==="ar"?"rtl":"ltr"},dangerouslySetInnerHTML:{__html:te}})}),e.jsxs("div",{className:`absolute bottom-0 left-0 right-0 z-30 bg-gradient-to-t from-black via-black/80 to-transparent transition-opacity duration-300 ${P||!c?"opacity-100":"opacity-0"}`,style:{pointerEvents:P||!c?"auto":"none"},children:[e.jsxs("div",{className:"px-4 pt-6 pb-2",children:[e.jsxs("div",{className:"relative h-1 bg-gray-700 rounded-lg group/progress",children:[e.jsx("div",{className:"absolute top-0 left-0 h-full bg-gray-500 rounded-lg transition-all",style:{width:`${U}%`}}),e.jsx("div",{className:"absolute top-0 left-0 h-full bg-blue-500 rounded-lg transition-all",style:{width:`${ce}%`}}),e.jsx("input",{type:"range",min:0,max:b||0,step:.1,value:E,onChange:K,className:"absolute top-0 left-0 w-full h-full opacity-0 cursor-pointer"}),e.jsx("div",{className:"absolute top-1/2 -translate-y-1/2 w-3 h-3 bg-blue-500 rounded-full shadow-lg opacity-0 group-hover/progress:opacity-100 transition-opacity pointer-events-none",style:{left:`${ce}%`,transform:"translate(-50%, -50%)"}})]}),e.jsxs("div",{className:"flex justify-between mt-1 text-xs text-white/80",children:[e.jsxs("span",{children:[Z(E)," / ",Z(b)]}),e.jsx("span",{})]})]}),e.jsxs("div",{className:"flex items-center justify-between px-4 pb-4",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("button",{onClick:w,className:"text-white hover:text-blue-400 transition-colors",children:c?e.jsx("svg",{className:"w-8 h-8",fill:"currentColor",viewBox:"0 0 20 20",children:e.jsx("path",{fillRule:"evenodd",d:"M18 10a8 8 0 11-16 0 8 8 0 0116 0zM7 8a1 1 0 012 0v4a1 1 0 11-2 0V8zm5-1a1 1 0 00-1 1v4a1 1 0 102 0V8a1 1 0 00-1-1z",clipRule:"evenodd"})}):e.jsx("svg",{className:"w-8 h-8",fill:"currentColor",viewBox:"0 0 20 20",children:e.jsx("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zM9.555 7.168A1 1 0 008 8v4a1 1 0 001.555.832l3-2a1 1 0 000-1.664l-3-2z",clipRule:"evenodd"})})}),e.jsx("button",{onClick:()=>_(-10),className:"text-white hover:text-blue-400 transition-colors",title:"Skip backward 10s (â†)",children:e.jsx("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12.066 11.2a1 1 0 000 1.6l5.334 4A1 1 0 0019 16V8a1 1 0 00-1.6-.8l-5.333 4zM4.066 11.2a1 1 0 000 1.6l5.334 4A1 1 0 0011 16V8a1 1 0 00-1.6-.8l-5.334 4z"})})}),e.jsx("button",{onClick:()=>_(10),className:"text-white hover:text-blue-400 transition-colors",title:"Skip forward 10s (â†’)",children:e.jsx("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M11.933 12.8a1 1 0 000-1.6L6.6 7.2A1 1 0 005 8v8a1 1 0 001.6.8l5.333-4zM19.933 12.8a1 1 0 000-1.6l-5.333-4A1 1 0 0013 8v8a1 1 0 001.6.8l5.333-4z"})})}),e.jsxs("div",{className:"relative flex items-center",onMouseEnter:()=>o(!0),onMouseLeave:()=>o(!1),children:[e.jsx("button",{onClick:X,className:"text-white hover:text-blue-400 transition-colors",title:"Mute (M)",children:S||M===0?e.jsx("svg",{className:"w-6 h-6",fill:"currentColor",viewBox:"0 0 20 20",children:e.jsx("path",{fillRule:"evenodd",d:"M9.383 3.076A1 1 0 0110 4v12a1 1 0 01-1.707.707L4.586 13H2a1 1 0 01-1-1V8a1 1 0 011-1h2.586l3.707-3.707a1 1 0 011.09-.217zM12.293 7.293a1 1 0 011.414 0L15 8.586l1.293-1.293a1 1 0 111.414 1.414L16.414 10l1.293 1.293a1 1 0 01-1.414 1.414L15 11.414l-1.293 1.293a1 1 0 01-1.414-1.414L13.586 10l-1.293-1.293a1 1 0 010-1.414z",clipRule:"evenodd"})}):M<.5?e.jsx("svg",{className:"w-6 h-6",fill:"currentColor",viewBox:"0 0 20 20",children:e.jsx("path",{fillRule:"evenodd",d:"M9.383 3.076A1 1 0 0110 4v12a1 1 0 01-1.707.707L4.586 13H2a1 1 0 01-1-1V8a1 1 0 011-1h2.586l3.707-3.707a1 1 0 011.09-.217zM12.293 7.293a1 1 0 011.414 0 4 4 0 010 5.656 1 1 0 01-1.414-1.414 2 2 0 000-2.828 1 1 0 010-1.414z",clipRule:"evenodd"})}):e.jsx("svg",{className:"w-6 h-6",fill:"currentColor",viewBox:"0 0 20 20",children:e.jsx("path",{fillRule:"evenodd",d:"M9.383 3.076A1 1 0 0110 4v12a1 1 0 01-1.707.707L4.586 13H2a1 1 0 01-1-1V8a1 1 0 011-1h2.586l3.707-3.707a1 1 0 011.09-.217zM14.657 2.929a1 1 0 011.414 0A9.972 9.972 0 0119 10a9.972 9.972 0 01-2.929 7.071 1 1 0 01-1.414-1.414A7.971 7.971 0 0017 10c0-2.21-.894-4.208-2.343-5.657a1 1 0 010-1.414zm-2.829 2.828a1 1 0 011.415 0A5.983 5.983 0 0115 10a5.984 5.984 0 01-1.757 4.243 1 1 0 01-1.415-1.415A3.984 3.984 0 0013 10a3.983 3.983 0 00-1.172-2.828 1 1 0 010-1.415z",clipRule:"evenodd"})})}),e.jsx("div",{className:`overflow-hidden transition-all duration-200 ${l?"w-20 ml-2":"w-0 ml-0"}`,children:e.jsxs("div",{className:"relative h-1 bg-gray-600 rounded-full",children:[e.jsx("div",{className:"absolute top-0 left-0 h-full bg-white rounded-full",style:{width:`${M*100}%`}}),e.jsx("input",{type:"range",min:0,max:1,step:.05,value:M,onChange:Y,className:"absolute top-0 left-0 w-full h-full opacity-0 cursor-pointer"})]})})]})]}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsxs("div",{className:"relative",children:[e.jsxs("button",{onClick:()=>f(!k),className:"text-white hover:text-blue-400 transition-colors text-sm font-medium px-2 py-1 rounded hover:bg-white/10",children:[V,"x"]}),k&&e.jsx("div",{className:"absolute bottom-full left-0 mb-2 bg-gray-800 rounded-lg shadow-lg overflow-hidden min-w-[80px]",children:[.25,.5,.75,1,1.25,1.5,1.75,2].map(t=>e.jsxs("button",{onClick:()=>Q(t),className:`w-full px-3 py-2 text-sm text-right hover:bg-blue-600 transition-colors ${V===t?"bg-blue-500 text-white":"text-gray-300"}`,children:[t,"x ",t===1&&"(Ø¹Ø§Ø¯ÙŠ)"]},t))})]}),s.subtitles&&s.subtitles.length>0&&e.jsx("div",{className:"relative",children:e.jsxs("select",{value:(T==null?void 0:T.id)||"",onChange:t=>{const r=s.subtitles.find(n=>n.id===parseInt(t.target.value));G(r||null)},className:"bg-transparent text-white text-sm border border-white/30 rounded px-2 py-1 hover:bg-white/10 cursor-pointer",children:[e.jsx("option",{value:"",className:"bg-gray-800",children:"Ø¨Ø¯ÙˆÙ† ØªØ±Ø¬Ù…Ø©"}),s.subtitles.map(t=>e.jsx("option",{value:t.id,className:"bg-gray-800",children:t.language_name},t.id))]})}),document.pictureInPictureEnabled&&e.jsx("button",{onClick:ge,className:"text-white hover:text-blue-400 transition-colors",title:"Picture in Picture (P)",children:e.jsxs("svg",{className:"w-6 h-6",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,children:[e.jsx("rect",{x:"2",y:"4",width:"20",height:"14",rx:"2"}),e.jsx("rect",{x:"12",y:"10",width:"8",height:"6",rx:"1",className:ae?"fill-blue-400 stroke-blue-400":"fill-gray-600"})]})}),e.jsx("button",{onClick:J,className:"text-white hover:text-blue-400 transition-colors",title:"Fullscreen (F)",children:R?e.jsx("svg",{className:"w-6 h-6",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,children:e.jsx("path",{d:"M8 3v4a1 1 0 01-1 1H3M16 3v4a1 1 0 001 1h4M8 21v-4a1 1 0 00-1-1H3M16 21v-4a1 1 0 011-1h4"})}):e.jsx("svg",{className:"w-6 h-6",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,children:e.jsx("path",{d:"M3 8V5a2 2 0 012-2h3M21 8V5a2 2 0 00-2-2h-3M3 16v3a2 2 0 002 2h3M21 16v3a2 2 0 01-2 2h-3"})})})]})]})]})]}),e.jsx("div",{className:`mt-2 p-3 rounded-lg text-xs ${m?"bg-gray-800 text-gray-400":"bg-gray-100 text-gray-600"}`,children:e.jsxs("div",{className:"flex flex-wrap gap-x-4 gap-y-1",children:[e.jsxs("span",{children:[e.jsx("kbd",{className:"px-1 bg-gray-700 text-white rounded",children:"Space"})," Play/Pause"]}),e.jsxs("span",{children:[e.jsx("kbd",{className:"px-1 bg-gray-700 text-white rounded",children:"â†"})," Skip -10s"]}),e.jsxs("span",{children:[e.jsx("kbd",{className:"px-1 bg-gray-700 text-white rounded",children:"â†’"})," Skip +10s"]}),e.jsxs("span",{children:[e.jsx("kbd",{className:"px-1 bg-gray-700 text-white rounded",children:"â†‘â†“"})," Volume"]}),e.jsxs("span",{children:[e.jsx("kbd",{className:"px-1 bg-gray-700 text-white rounded",children:"M"})," Mute"]}),e.jsxs("span",{children:[e.jsx("kbd",{className:"px-1 bg-gray-700 text-white rounded",children:"F"})," Fullscreen"]}),e.jsxs("span",{children:[e.jsx("kbd",{className:"px-1 bg-gray-700 text-white rounded",children:"P"})," PiP"]})]})}),e.jsx("style",{jsx:!0,children:`
        .slider::-webkit-slider-thumb {
          appearance: none;
          width: 14px;
          height: 14px;
          border-radius: 50%;
          background: #3b82f6;
          cursor: pointer;
          box-shadow: 0 0 0 3px rgba(59, 130, 246, 0.3);
        }

        .slider::-moz-range-thumb {
          width: 14px;
          height: 14px;
          border-radius: 50%;
          background: #3b82f6;
          cursor: pointer;
          border: none;
          box-shadow: 0 0 0 3px rgba(59, 130, 246, 0.3);
        }

        /* Subtitle styling */
        video::cue {
          background-color: rgba(0, 0, 0, 0.8);
          color: white;
          font-size: 1.25rem;
          font-family: 'Segoe UI', Tahoma, sans-serif;
          line-height: 1.5;
          padding: 0.25rem 0.5rem;
          border-radius: 4px;
        }

        /* Position subtitles above controls */
        video::-webkit-media-text-track-container {
          bottom: 80px !important;
          transform: translateY(-20px);
        }

        video::-webkit-media-text-track-display {
          bottom: 80px !important;
        }
      `})]})}function Ce({lessonId:s,initialSummary:m,onUpdate:u,video:h}){const[c,g]=a.useState(m||""),[E,y]=a.useState(!1),[b,H]=a.useState(!1),[M,L]=a.useState(!1),[S,N]=a.useState(null),[V,A]=a.useState(!1);a.useEffect(()=>{g(m||"")},[m]);const T=async()=>{var P,z;if(!V){y(!1);return}H(!0),N(null);try{(await W.put(`/lessons/${s}`,{summary:c})).data.success&&(y(!1),A(!1),u&&u(c))}catch(d){N(((z=(P=d.response)==null?void 0:P.data)==null?void 0:z.message)||"ÙØ´Ù„ Ø­ÙØ¸ Ø§Ù„Ù…Ù„Ø®Øµ")}finally{H(!1)}},G=()=>{g(m||""),y(!1),A(!1),N(null)},R=P=>{g(P.target.value),A(P.target.value!==m)},F=async()=>{var P,z;if(!h){N("ÙŠØ¬Ø¨ Ø±ÙØ¹ Ø§Ù„ÙÙŠØ¯ÙŠÙˆ Ø£ÙˆÙ„Ø§Ù‹");return}L(!0),N(null);try{const d=await W.post(`/lessons/${s}/video/transcribe`);if(!d.data.success)throw new Error("ÙØ´Ù„ ÙÙŠ ØªÙØ±ÙŠØº Ø§Ù„ÙÙŠØ¯ÙŠÙˆ");const I=d.data.data.transcript,l=await W.post(`/lessons/${s}/video/summarize`,{text:I});if(l.data.success){const o=l.data.data.summary;g(o),A(!0),y(!0)}}catch(d){N(((z=(P=d.response)==null?void 0:P.data)==null?void 0:z.message)||"ÙØ´Ù„ ÙÙŠ Ø¥Ù†Ø´Ø§Ø¡ Ø§Ù„Ù…Ù„Ø®Øµ Ø§Ù„ØªÙ„Ù‚Ø§Ø¦ÙŠ")}finally{L(!1)}};return e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("h3",{className:"text-lg font-semibold",children:"Ù…Ù„Ø®Øµ Ø§Ù„Ø¯Ø±Ø³"}),e.jsxs("div",{className:"flex gap-2",children:[h&&!E&&e.jsx("button",{onClick:F,disabled:M,className:"px-3 py-1 text-sm bg-purple-500 text-white rounded hover:bg-purple-600 disabled:opacity-50",children:M?e.jsxs("span",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-white"}),"Ø¬Ø§Ø±ÙŠ Ø§Ù„Ø¥Ù†Ø´Ø§Ø¡..."]}):"Ø¥Ù†Ø´Ø§Ø¡ Ù…Ù„Ø®Øµ ØªÙ„Ù‚Ø§Ø¦ÙŠ"}),!E&&e.jsx("button",{onClick:()=>y(!0),className:"px-3 py-1 text-sm bg-blue-500 text-white rounded hover:bg-blue-600",children:c?"ØªØ¹Ø¯ÙŠÙ„":"Ø¥Ø¶Ø§ÙØ© Ù…Ù„Ø®Øµ"})]})]}),E?e.jsxs("div",{className:"space-y-3",children:[e.jsx("textarea",{value:c,onChange:R,placeholder:"Ø§ÙƒØªØ¨ Ù…Ù„Ø®Øµ Ø§Ù„Ø¯Ø±Ø³ Ù‡Ù†Ø§...",className:"w-full h-48 px-3 py-2 border border-gray-300 rounded focus:ring-2 focus:ring-blue-500 focus:border-blue-500 resize-none",disabled:b}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("p",{className:"text-xs text-gray-500",children:[c.length," Ø­Ø±Ù"]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx("button",{onClick:G,disabled:b,className:"px-4 py-2 text-sm border border-gray-300 rounded hover:bg-gray-50 disabled:opacity-50",children:"Ø¥Ù„ØºØ§Ø¡"}),e.jsx("button",{onClick:T,disabled:b||!V,className:"px-4 py-2 text-sm bg-blue-500 text-white rounded hover:bg-blue-600 disabled:opacity-50",children:b?e.jsxs("span",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-white"}),"Ø¬Ø§Ø±ÙŠ Ø§Ù„Ø­ÙØ¸..."]}):"Ø­ÙØ¸"})]})]})]}):e.jsx("div",{className:"p-4 bg-gray-50 rounded-lg min-h-32",children:c?e.jsx("p",{className:"text-gray-700 whitespace-pre-wrap",children:c}):e.jsx("p",{className:"text-gray-400 italic",children:"Ù„Ø§ ÙŠÙˆØ¬Ø¯ Ù…Ù„Ø®Øµ Ù„Ù‡Ø°Ø§ Ø§Ù„Ø¯Ø±Ø³ Ø¨Ø¹Ø¯"})}),S&&e.jsx("div",{className:"p-3 bg-red-50 border border-red-200 rounded text-red-700 text-sm",children:S})]})}function Te(){var z;const{darkMode:s}=ye(),{id:m}=ve(),u=je(),[h,c]=a.useState(null),[g,E]=a.useState(null),[y,b]=a.useState(!0),[H,M]=a.useState(null),[L,S]=a.useState("view"),[N,V]=a.useState(!1),A=a.useRef(!1);a.useEffect(()=>{T()},[m]);const T=async()=>{var d,I,l,o,k;if(console.log("ğŸ“š [LessonMedia] Fetching lesson:",m),A.current){console.log("â­ï¸ [LessonMedia] Already fetching, skipping");return}A.current=!0;try{b(!0),M(null),console.log("ğŸ“¥ [LessonMedia] Fetching lesson data...");const f=await W.get(`/lessons/${m}`),U=f.data.data||f.data;console.log("âœ… [LessonMedia] Lesson data loaded:",U),c(U);try{console.log("ğŸ“¥ [LessonMedia] Fetching video data...");const v=(await W.get(`/lessons/${m}/video`)).data.data;console.log("âœ… [LessonMedia] Video data loaded:",{has_video:!!v,proxy_video_url:v==null?void 0:v.proxy_video_url,video_url:v==null?void 0:v.video_url,mime_type:v==null?void 0:v.mime_type,subtitles_count:((d=v==null?void 0:v.subtitles)==null?void 0:d.length)||0,subtitles:v==null?void 0:v.subtitles}),E(v)}catch(D){((I=D.response)==null?void 0:I.status)===404?(console.log("â„¹ï¸ [LessonMedia] No video found (404), switching to upload tab"),E(null),S("upload")):(console.warn("âš ï¸ [LessonMedia] Failed to load video:",D),E(null))}}catch(f){console.error("âŒ [LessonMedia] Error loading lesson:",f);const U=(l=f.response)==null?void 0:l.status,D=((k=(o=f.response)==null?void 0:o.data)==null?void 0:k.message)||"ÙØ´Ù„ ØªØ­Ù…ÙŠÙ„ Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„Ø¯Ø±Ø³";M(U===404?"Ø§Ù„Ø¯Ø±Ø³ ØºÙŠØ± Ù…ÙˆØ¬ÙˆØ¯ Ø£Ùˆ Ù„ÙŠØ³ Ù„Ø¯ÙŠÙƒ ØµÙ„Ø§Ø­ÙŠØ© Ø§Ù„ÙˆØµÙˆÙ„ Ø¥Ù„ÙŠÙ‡":U===403?"Ù„ÙŠØ³ Ù„Ø¯ÙŠÙƒ ØµÙ„Ø§Ø­ÙŠØ© Ù„Ù„ÙˆØµÙˆÙ„ Ø¥Ù„Ù‰ Ù‡Ø°Ø§ Ø§Ù„Ø¯Ø±Ø³":D)}finally{b(!1),A.current=!1}},G=d=>{E(d),d&&L==="upload"&&S("view")},R=(d,I=null)=>{I?E(l=>({...l,subtitles:l.subtitles.filter(o=>o.id!==I)})):d&&E(l=>{var k;const o=(k=l.subtitles)==null?void 0:k.findIndex(f=>f.id===d.id);if(o!==-1){const f=[...l.subtitles];return f[o]=d,{...l,subtitles:f}}else return{...l,subtitles:[...l.subtitles||[],d]}})},F=()=>{V(!0),setTimeout(()=>{const d=document.getElementById("ai-generator-section");d&&d.scrollIntoView({behavior:"smooth",block:"center"}),V(!1)},100)},P=d=>{c(I=>({...I,summary:d}))};return y?e.jsx(he,{}):H?e.jsx("div",{className:`min-h-screen transition-colors duration-300 ${s?"bg-gray-900":"bg-gray-50"}`,children:e.jsx("div",{className:"container mx-auto px-4 py-8",children:e.jsx("div",{className:`border rounded-lg p-4 ${s?"bg-red-900/30 border-red-800 text-red-300":"bg-red-50 border-red-200 text-red-700"}`,children:H})})}):h?e.jsx("div",{className:`min-h-screen transition-colors duration-300 ${s?"bg-gray-900":"bg-gray-50"}`,children:e.jsxs("div",{className:"container mx-auto px-4 py-8",children:[e.jsxs("div",{className:"mb-6",children:[e.jsxs("button",{onClick:()=>u(-1),className:`mb-4 flex items-center gap-2 transition-colors ${s?"text-blue-400 hover:text-blue-300":"text-blue-500 hover:text-blue-700"}`,children:[e.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 19l-7-7 7-7"})}),"Ø±Ø¬ÙˆØ¹"]}),e.jsx("h1",{className:`text-3xl font-bold ${s?"text-gray-100":"text-gray-900"}`,children:h.name}),h.description&&e.jsx("p",{className:`mt-2 ${s?"text-gray-400":"text-gray-600"}`,children:h.description})]}),e.jsx("div",{className:`mb-6 border-b ${s?"border-gray-700":"border-gray-200"}`,children:e.jsxs("nav",{className:"flex gap-4",children:[e.jsx("button",{onClick:()=>S("view"),className:`pb-2 px-1 border-b-2 font-medium transition-colors ${L==="view"?s?"border-blue-400 text-blue-400":"border-blue-500 text-blue-600":s?"border-transparent text-gray-400 hover:text-gray-300":"border-transparent text-gray-500 hover:text-gray-700"}`,children:"Ù…Ø´Ø§Ù‡Ø¯Ø© Ø§Ù„Ø¯Ø±Ø³"}),e.jsx("button",{onClick:()=>S("upload"),className:`pb-2 px-1 border-b-2 font-medium transition-colors ${L==="upload"?s?"border-blue-400 text-blue-400":"border-blue-500 text-blue-600":s?"border-transparent text-gray-400 hover:text-gray-300":"border-transparent text-gray-500 hover:text-gray-700"}`,children:"Ø¥Ø¯Ø§Ø±Ø© Ø§Ù„ÙˆØ³Ø§Ø¦Ø·"}),e.jsx("button",{onClick:()=>S("summary"),className:`pb-2 px-1 border-b-2 font-medium transition-colors ${L==="summary"?s?"border-blue-400 text-blue-400":"border-blue-500 text-blue-600":s?"border-transparent text-gray-400 hover:text-gray-300":"border-transparent text-gray-500 hover:text-gray-700"}`,children:"Ø§Ù„Ù…Ù„Ø®Øµ"})]})}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[e.jsxs("div",{className:"lg:col-span-2",children:[L==="view"&&e.jsx("div",{className:"space-y-6",children:g?e.jsx(Se,{video:g,darkMode:s}):e.jsxs("div",{className:`text-center py-16 rounded-lg shadow transition-colors duration-300 ${s?"bg-gray-800":"bg-white"}`,children:[e.jsx("svg",{className:`mx-auto h-16 w-16 ${s?"text-gray-600":"text-gray-400"}`,fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.5,d:"M15 10l4.553-2.276A1 1 0 0121 8.618v6.764a1 1 0 01-1.447.894L15 14M5 18h8a2 2 0 002-2V8a2 2 0 00-2-2H5a2 2 0 00-2 2v8a2 2 0 002 2z"})}),e.jsx("h3",{className:`mt-4 text-lg font-medium ${s?"text-gray-300":"text-gray-900"}`,children:"Ù„Ø§ ÙŠÙˆØ¬Ø¯ ÙÙŠØ¯ÙŠÙˆ"}),e.jsx("p",{className:`mt-2 text-sm ${s?"text-gray-400":"text-gray-500"}`,children:"Ø§Ø¨Ø¯Ø£ Ø¨Ø±ÙØ¹ ÙÙŠØ¯ÙŠÙˆ Ù„Ù‡Ø°Ø§ Ø§Ù„Ø¯Ø±Ø³ Ù„Ù„Ø§Ø³ØªÙØ§Ø¯Ø© Ù…Ù† ÙƒØ§ÙØ© Ø§Ù„Ù…ÙŠØ²Ø§Øª"}),e.jsxs("button",{onClick:()=>S("upload"),className:"mt-6 inline-flex items-center gap-2 px-6 py-3 bg-blue-500 text-white rounded-lg hover:bg-blue-600 transition-colors shadow-sm",children:[e.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M7 16a4 4 0 01-.88-7.903A5 5 0 1115.9 6L16 6a5 5 0 011 9.9M15 13l-3-3m0 0l-3 3m3-3v12"})}),"Ø±ÙØ¹ ÙÙŠØ¯ÙŠÙˆ Ø§Ù„Ø¢Ù†"]})]})}),L==="upload"&&e.jsxs("div",{className:"space-y-6",children:[e.jsx("div",{className:`rounded-lg shadow p-6 transition-colors duration-300 ${s?"bg-gray-800":"bg-white"}`,children:e.jsx(we,{lessonId:m,existingVideo:g,onUploadSuccess:G})}),e.jsx("div",{id:"ai-generator-section",className:`bg-white rounded-lg shadow p-6 transition-all ${N?"ring-4 ring-purple-300":""}`,children:e.jsx(ke,{lessonId:m,video:g,onSuccess:R})}),e.jsx("div",{className:`rounded-lg shadow p-6 transition-colors duration-300 ${s?"bg-gray-800":"bg-white"}`,children:e.jsx(Ne,{lessonId:m,video:g,onUploadSuccess:R,onOpenAIGenerator:F})})]}),L==="summary"&&e.jsx("div",{className:"bg-white rounded-lg shadow p-6",children:e.jsx(Ce,{lessonId:m,initialSummary:h.summary,onUpdate:P,video:g})})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:`rounded-lg shadow p-6 transition-colors duration-300 ${s?"bg-gray-800":"bg-white"}`,children:[e.jsx("h3",{className:`font-semibold mb-4 ${s?"text-gray-100":"text-gray-900"}`,children:"Ù…Ø¹Ù„ÙˆÙ…Ø§Øª Ø§Ù„Ø¯Ø±Ø³"}),e.jsxs("dl",{className:"space-y-2 text-sm",children:[h.duration&&e.jsxs("div",{children:[e.jsx("dt",{className:`${s?"text-gray-400":"text-gray-600"}`,children:"Ø§Ù„Ù…Ø¯Ø©"}),e.jsx("dd",{className:`font-medium ${s?"text-gray-200":"text-gray-900"}`,children:h.duration})]}),h.type&&e.jsxs("div",{children:[e.jsx("dt",{className:`${s?"text-gray-400":"text-gray-600"}`,children:"Ø§Ù„Ù†ÙˆØ¹"}),e.jsx("dd",{className:`font-medium ${s?"text-gray-200":"text-gray-900"}`,children:h.type})]}),e.jsxs("div",{children:[e.jsx("dt",{className:`${s?"text-gray-400":"text-gray-600"}`,children:"Ø§Ù„Ø­Ø§Ù„Ø©"}),e.jsx("dd",{children:e.jsx("span",{className:`inline-block px-2 py-1 text-xs rounded ${h.completed?"bg-green-100 text-green-800":"bg-yellow-100 text-yellow-800"}`,children:h.completed?"Ù…ÙƒØªÙ…Ù„":"ØºÙŠØ± Ù…ÙƒØªÙ…Ù„"})})]})]})]}),e.jsxs("div",{className:`rounded-lg shadow p-6 transition-colors duration-300 ${s?"bg-gray-800":"bg-white"}`,children:[e.jsx("h3",{className:`font-semibold mb-4 ${s?"text-gray-100":"text-gray-900"}`,children:"Ø­Ø§Ù„Ø© Ø§Ù„ÙˆØ³Ø§Ø¦Ø·"}),e.jsxs("div",{className:"space-y-3 text-sm",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:s?"text-gray-400":"text-gray-600",children:"Ø§Ù„ÙÙŠØ¯ÙŠÙˆ"}),e.jsx("span",{className:`flex items-center gap-1 ${g?"text-green-600":"text-gray-400"}`,children:g?e.jsxs(e.Fragment,{children:[e.jsx("svg",{className:"w-4 h-4",fill:"currentColor",viewBox:"0 0 20 20",children:e.jsx("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zm3.707-9.293a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z",clipRule:"evenodd"})}),"Ù…ÙˆØ¬ÙˆØ¯"]}):"ØºÙŠØ± Ù…ÙˆØ¬ÙˆØ¯"})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:s?"text-gray-400":"text-gray-600",children:"Ø§Ù„ØªØ±Ø¬Ù…Ø§Øª"}),e.jsx("span",{className:`font-medium ${s?"text-gray-200":"text-gray-900"}`,children:((z=g==null?void 0:g.subtitles)==null?void 0:z.length)||0})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:s?"text-gray-400":"text-gray-600",children:"Ø§Ù„Ù…Ù„Ø®Øµ"}),e.jsx("span",{className:`flex items-center gap-1 ${h.summary?"text-green-600":"text-gray-400"}`,children:h.summary?e.jsxs(e.Fragment,{children:[e.jsx("svg",{className:"w-4 h-4",fill:"currentColor",viewBox:"0 0 20 20",children:e.jsx("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zm3.707-9.293a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z",clipRule:"evenodd"})}),"Ù…ÙˆØ¬ÙˆØ¯"]}):"ØºÙŠØ± Ù…ÙˆØ¬ÙˆØ¯"})]})]})]}),e.jsxs("div",{className:`rounded-lg shadow p-6 transition-colors duration-300 ${s?"bg-gray-800":"bg-white"}`,children:[e.jsx("h3",{className:`font-semibold mb-4 ${s?"text-gray-100":"text-gray-900"}`,children:"Ø¥Ø¬Ø±Ø§Ø¡Ø§Øª Ø³Ø±ÙŠØ¹Ø©"}),e.jsxs("div",{className:"space-y-2",children:[!g&&e.jsx("button",{onClick:()=>S("upload"),className:"w-full px-4 py-2 bg-blue-500 text-white rounded hover:bg-blue-600 text-sm",children:"Ø±ÙØ¹ ÙÙŠØ¯ÙŠÙˆ"}),g&&(!g.subtitles||g.subtitles.length===0)&&e.jsx("button",{onClick:()=>S("upload"),className:"w-full px-4 py-2 bg-green-500 text-white rounded hover:bg-green-600 text-sm",children:"Ø¥Ø¶Ø§ÙØ© ØªØ±Ø¬Ù…Ø©"}),!h.summary&&e.jsx("button",{onClick:()=>S("summary"),className:"w-full px-4 py-2 bg-purple-500 text-white rounded hover:bg-purple-600 text-sm",children:"Ø¥Ø¶Ø§ÙØ© Ù…Ù„Ø®Øµ"}),h.link&&e.jsx("a",{href:h.link,target:"_blank",rel:"noopener noreferrer",className:`w-full block text-center px-4 py-2 rounded text-sm transition-colors ${s?"bg-gray-700 text-gray-300 hover:bg-gray-600":"bg-gray-200 text-gray-800 hover:bg-gray-300"}`,children:"ÙØªØ­ Ø±Ø§Ø¨Ø· Ø§Ù„Ø¯Ø±Ø³"})]})]})]})]})]})}):e.jsx(he,{})}export{Te as default};
