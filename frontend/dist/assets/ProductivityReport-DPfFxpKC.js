import{j as e,B as F,D as P,L,C as S,a as D,b as B,c as W,d as M,P as V,A as q,p as O,e as T,f as I}from"./charts-VrJjKkAO.js";import{r as a}from"./vendor-xoa7E_IC.js";import{b as w,A as y}from"./index-DX6VYCbL.js";import{F as U}from"./ChartBarIcon-uHSdAZ-F.js";import{F as N}from"./TrophyIcon-DQ4ORbod.js";import{F as z}from"./FireIcon-D00izjZa.js";import{F as G}from"./ClockIcon-Cuv4DrH5.js";function H({title:o,titleId:n,...s},c){return a.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:c,"aria-labelledby":n},s),o?a.createElement("title",{id:n},o):null,a.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M3 16.5v2.25A2.25 2.25 0 0 0 5.25 21h13.5A2.25 2.25 0 0 0 21 18.75V16.5M16.5 12 12 16.5m0 0L7.5 12m4.5 4.5V3"}))}const v=a.forwardRef(H);function J({title:o,titleId:n,...s},c){return a.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:c,"aria-labelledby":n},s),o?a.createElement("title",{id:n},o):null,a.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M6.75 3v2.25M17.25 3v2.25M3 18.75V7.5a2.25 2.25 0 0 1 2.25-2.25h13.5A2.25 2.25 0 0 1 21 7.5v11.25m-18 0A2.25 2.25 0 0 0 5.25 21h13.5A2.25 2.25 0 0 0 21 18.75m-18 0v-7.5A2.25 2.25 0 0 1 5.25 9h13.5A2.25 2.25 0 0 1 21 11.25v7.5"}))}const K=a.forwardRef(J);S.register(D,B,W,M,V,q,O,T,I);function ae(){var b,f,j;const[o,n]=a.useState(!1),[s,c]=a.useState(null),[r,_]=a.useState("this_month"),[d,x]=a.useState({start_date:"",end_date:""}),[m,k]=a.useState([]);a.useEffect(()=>{C()},[]),a.useEffect(()=>{r!=="custom"&&p()},[r]);const C=async()=>{try{const t=await w.get("/reports/types");k(t.data.data.preset_periods)}catch(t){console.error("Error fetching periods:",t)}},p=async()=>{n(!0);try{let t="";if(r==="custom")t=`?start_date=${d.start_date}&end_date=${d.end_date}`;else{const i=m.find(A=>A.id===r);i&&(t=`?start_date=${i.start_date}&end_date=${i.end_date}`)}const l=await w.get(`/reports/productivity${t}`);c(l.data.data)}catch(t){console.error("Error fetching report:",t)}finally{n(!1)}},$=t=>{t.preventDefault(),p()},E=()=>{const t=m.find(i=>i.id===r),l=r==="custom"?`?start_date=${d.start_date}&end_date=${d.end_date}`:`?start_date=${t.start_date}&end_date=${t.end_date}`;window.open(`${y}/api/reports/productivity/export/pdf${l}`,"_blank")},R=()=>{const t=m.find(i=>i.id===r),l=r==="custom"?`?start_date=${d.start_date}&end_date=${d.end_date}`:`?start_date=${t.start_date}&end_date=${t.end_date}`;window.open(`${y}/api/reports/productivity/export/excel${l}`,"_blank")},h=()=>s!=null&&s.daily_breakdown?{labels:s.daily_breakdown.map(t=>t.date),datasets:[{label:"مكتملة",data:s.daily_breakdown.map(t=>t.completed),backgroundColor:"rgba(34, 197, 94, 0.5)",borderColor:"rgb(34, 197, 94)",borderWidth:2},{label:"قيد التنفيذ",data:s.daily_breakdown.map(t=>t.in_progress),backgroundColor:"rgba(59, 130, 246, 0.5)",borderColor:"rgb(59, 130, 246)",borderWidth:2},{label:"معلقة",data:s.daily_breakdown.map(t=>t.pending),backgroundColor:"rgba(234, 179, 8, 0.5)",borderColor:"rgb(234, 179, 8)",borderWidth:2}]}:null,g=()=>s!=null&&s.priority_distribution?{labels:["عالية","متوسطة","منخفضة"],datasets:[{data:[s.priority_distribution.counts.high,s.priority_distribution.counts.medium,s.priority_distribution.counts.low],backgroundColor:["rgba(239, 68, 68, 0.5)","rgba(234, 179, 8, 0.5)","rgba(34, 197, 94, 0.5)"],borderColor:["rgb(239, 68, 68)","rgb(234, 179, 8)","rgb(34, 197, 94)"],borderWidth:2}]}:null,u=()=>s!=null&&s.productivity_trend?{labels:s.productivity_trend.map(t=>`Week ${t.week}`),datasets:[{label:"معدل الإنجاز (%)",data:s.productivity_trend.map(t=>t.completion_rate),fill:!0,backgroundColor:"rgba(59, 130, 246, 0.1)",borderColor:"rgb(59, 130, 246)",tension:.4}]}:null;return o?e.jsx("div",{className:"flex items-center justify-center min-h-screen",children:e.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600"})}):e.jsxs("div",{className:"container mx-auto px-4 py-8",dir:"rtl",children:[e.jsxs("div",{className:"mb-8",children:[e.jsx("h1",{className:"text-3xl font-bold text-gray-900 mb-2",children:"تقرير الإنتاجية الشخصية"}),e.jsx("p",{className:"text-gray-600",children:"تحليل شامل لأدائك وإنتاجيتك"})]}),e.jsxs("div",{className:"bg-white rounded-lg shadow-md p-6 mb-8",children:[e.jsxs("div",{className:"flex items-center gap-4 mb-4",children:[e.jsx(K,{className:"h-6 w-6 text-gray-500"}),e.jsx("h2",{className:"text-xl font-semibold",children:"اختر الفترة الزمنية"})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"فترة محددة مسبقاً"}),e.jsx("select",{value:r,onChange:t=>_(t.target.value),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",children:m.map(t=>e.jsx("option",{value:t.id,children:t.name},t.id))})]}),r==="custom"&&e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"فترة مخصصة"}),e.jsxs("form",{onSubmit:$,className:"flex gap-2",children:[e.jsx("input",{type:"date",value:d.start_date,onChange:t=>x({...d,start_date:t.target.value}),className:"flex-1 px-4 py-2 border border-gray-300 rounded-lg",required:!0}),e.jsx("input",{type:"date",value:d.end_date,onChange:t=>x({...d,end_date:t.target.value}),className:"flex-1 px-4 py-2 border border-gray-300 rounded-lg",required:!0}),e.jsx("button",{type:"submit",className:"px-6 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700",children:"عرض"})]})]})]}),s&&e.jsxs("div",{className:"flex gap-4 mt-4",children:[e.jsxs("button",{onClick:E,className:"flex items-center gap-2 px-4 py-2 bg-red-600 text-white rounded-lg hover:bg-red-700",children:[e.jsx(v,{className:"h-5 w-5"}),"تصدير PDF"]}),e.jsxs("button",{onClick:R,className:"flex items-center gap-2 px-4 py-2 bg-green-600 text-white rounded-lg hover:bg-green-700",children:[e.jsx(v,{className:"h-5 w-5"}),"تصدير Excel"]})]})]}),s&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6 mb-8",children:[e.jsxs("div",{className:"bg-white rounded-lg shadow-md p-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsx("span",{className:"text-gray-600",children:"إجمالي المهام"}),e.jsx(U,{className:"h-6 w-6 text-blue-600"})]}),e.jsx("p",{className:"text-3xl font-bold text-gray-900",children:s.summary.total_tasks})]}),e.jsxs("div",{className:"bg-white rounded-lg shadow-md p-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsx("span",{className:"text-gray-600",children:"المهام المكتملة"}),e.jsx(N,{className:"h-6 w-6 text-green-600"})]}),e.jsx("p",{className:"text-3xl font-bold text-green-600",children:s.summary.completed_tasks})]}),e.jsxs("div",{className:"bg-white rounded-lg shadow-md p-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsx("span",{className:"text-gray-600",children:"معدل الإنجاز"}),e.jsx(z,{className:"h-6 w-6 text-orange-600"})]}),e.jsxs("p",{className:"text-3xl font-bold text-orange-600",children:[s.summary.completion_rate,"%"]})]}),e.jsxs("div",{className:"bg-white rounded-lg shadow-md p-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsx("span",{className:"text-gray-600",children:"متوسط وقت الإنجاز"}),e.jsx(G,{className:"h-6 w-6 text-purple-600"})]}),e.jsx("p",{className:"text-xl font-bold text-purple-600",children:((b=s.summary.average_completion_time)==null?void 0:b.formatted)||"غير متاح"})]})]}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-8 mb-8",children:[e.jsxs("div",{className:"bg-white rounded-lg shadow-md p-6",children:[e.jsx("h3",{className:"text-xl font-semibold mb-4",children:"التوزيع اليومي للمهام"}),h()&&e.jsx(F,{data:h(),options:{responsive:!0}})]}),e.jsxs("div",{className:"bg-white rounded-lg shadow-md p-6",children:[e.jsx("h3",{className:"text-xl font-semibold mb-4",children:"توزيع المهام حسب الأولوية"}),g()&&e.jsx(P,{data:g(),options:{responsive:!0}})]})]}),e.jsxs("div",{className:"bg-white rounded-lg shadow-md p-6 mb-8",children:[e.jsx("h3",{className:"text-xl font-semibold mb-4",children:"منحنى الإنتاجية (أسبوعي)"}),u()&&e.jsx(L,{data:u(),options:{responsive:!0}})]}),((f=s.achievements)==null?void 0:f.length)>0&&e.jsxs("div",{className:"bg-white rounded-lg shadow-md p-6 mb-8",children:[e.jsxs("h3",{className:"text-xl font-semibold mb-4 flex items-center gap-2",children:[e.jsx(N,{className:"h-6 w-6 text-yellow-500"}),"الإنجازات"]}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:s.achievements.map((t,l)=>e.jsxs("div",{className:"bg-gradient-to-r from-yellow-50 to-orange-50 rounded-lg p-4 border-2 border-yellow-200",children:[e.jsx("div",{className:"text-4xl mb-2",children:t.icon}),e.jsx("h4",{className:"font-bold text-gray-900 mb-1",children:t.title}),e.jsx("p",{className:"text-sm text-gray-600",children:t.description})]},l))})]}),((j=s.most_productive_days)==null?void 0:j.length)>0&&e.jsxs("div",{className:"bg-white rounded-lg shadow-md p-6 mb-8",children:[e.jsx("h3",{className:"text-xl font-semibold mb-4",children:"أكثر الأيام إنتاجية"}),e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"min-w-full",children:[e.jsx("thead",{children:e.jsxs("tr",{className:"bg-gray-50",children:[e.jsx("th",{className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase",children:"التاريخ"}),e.jsx("th",{className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase",children:"اليوم"}),e.jsx("th",{className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase",children:"المهام المكتملة"})]})}),e.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:s.most_productive_days.map((t,l)=>e.jsxs("tr",{className:l===0?"bg-green-50":"",children:[e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:t.date}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:t.day_name}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsx("span",{className:"px-3 py-1 inline-flex text-sm leading-5 font-semibold rounded-full bg-green-100 text-green-800",children:t.tasks_completed})})]},l))})]})})]}),e.jsxs("div",{className:"bg-gradient-to-r from-blue-500 to-purple-600 rounded-lg shadow-md p-8 text-white text-center",children:[e.jsx("h3",{className:"text-2xl font-bold mb-4",children:"نقاط الأداء الإجمالية"}),e.jsx("div",{className:"text-6xl font-bold mb-2",children:s.summary.performance_score}),e.jsx("p",{className:"text-xl",children:"من 100"})]})]})]})}export{ae as default};
