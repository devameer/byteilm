import{j as e}from"./charts-VrJjKkAO.js";import{i as H,c as J,r as i,L as $}from"./vendor-xoa7E_IC.js";import{u as K}from"./index-DX6VYCbL.js";import{p as u}from"./projectService-BfEpNZUU.js";import{t as T}from"./taskService-5qNZ7o1f.js";import"./apiHelpers-CkzhrEqp.js";const W={active:"نشط",completed:"مكتمل",on_hold:"معلق",cancelled:"ملغى"},X=s=>({active:s?"bg-blue-900/30 text-blue-300 border-blue-700":"bg-blue-100 text-blue-700 border-blue-200",completed:s?"bg-green-900/30 text-green-300 border-green-700":"bg-green-100 text-green-700 border-green-200",on_hold:s?"bg-yellow-900/30 text-yellow-300 border-yellow-700":"bg-yellow-100 text-yellow-700 border-yellow-200",cancelled:s?"bg-red-900/30 text-red-300 border-red-700":"bg-red-100 text-red-700 border-red-200"}),P={low:"منخفضة",medium:"متوسطة",high:"عالية",urgent:"عاجلة"},Y={pending:"قيد الانتظار",in_progress:"قيد التنفيذ",completed:"مكتملة"};function de(){const{darkMode:s}=K(),{id:x}=H(),E=J(),[r,L]=i.useState(null),[d,D]=i.useState(null),[A,f]=i.useState(!0),[y,c]=i.useState(""),[k,_]=i.useState(!1),[h,F]=i.useState("all"),[j,M]=i.useState(""),[Q,m]=i.useState(!1),[g,p]=i.useState({title:"",priority:"medium",scheduled_date:""}),[N,S]=i.useState(!1),[C,R]=i.useState(!1);i.useEffect(()=>{b()},[x]);const b=async()=>{var t,l,o;f(!0),c("");try{const a=await u.getProject(x);a.success&&L(a.data);const n=await u.getStatistics(x);n.success&&D(n.data)}catch(a){if((a==null?void 0:a.name)==="CanceledError"||(a==null?void 0:a.code)==="ERR_CANCELED"){f(!1);return}const n=((l=(t=a==null?void 0:a.response)==null?void 0:t.data)==null?void 0:l.message)||(a==null?void 0:a.message);n&&!n.includes("timeout")&&!n.includes("canceled")?c(n):((o=a==null?void 0:a.response)==null?void 0:o.status)>=500?c("حدث خطأ في الخادم. يرجى المحاولة لاحقاً"):a!=null&&a.response||console.error("Network error loading project details:",a)}finally{f(!1)}},q=async()=>{var t,l;try{await u.toggleStatus(x),await b()}catch(o){c(((l=(t=o.response)==null?void 0:t.data)==null?void 0:l.message)||"تعذر تغيير حالة المشروع")}},O=async()=>{var l,o;if(window.confirm("سيتم حذف المشروع وجميع المهام المرتبطة به. هل تريد المتابعة؟"))try{await u.deleteProject(x),E("/projects")}catch(a){c(((o=(l=a.response)==null?void 0:l.data)==null?void 0:o.message)||"تعذر حذف المشروع")}},U=async t=>{var l,o;try{await T.completeTask(t),await b()}catch(a){c(((o=(l=a.response)==null?void 0:l.data)==null?void 0:o.message)||"تعذر تحديث حالة المهمة")}},z=async t=>{var a,n;t.preventDefault();const l=new FormData(t.target),o=Number(l.get("progress"));if(!Number.isNaN(o)){_(!0);try{await u.updateProgress(x,o),await b()}catch(G){c(((n=(a=G.response)==null?void 0:a.data)==null?void 0:n.message)||"تعذر تحديث تقدم المشروع")}finally{_(!1)}}},I=async t=>{var l,o;t.preventDefault(),S(!0);try{const a={...g,project_id:x,is_lesson:0};await T.createTask(a),m(!1),p({title:"",priority:"medium",scheduled_date:""}),await b()}catch(a){c(((o=(l=a.response)==null?void 0:l.data)==null?void 0:o.message)||"تعذر إضافة المهمة")}finally{S(!1)}},v=i.useMemo(()=>r!=null&&r.tasks?r.tasks.filter(t=>{const l=h==="all"||t.status===h,o=t.title.toLowerCase().includes(j.toLowerCase());return l&&o}):[],[r==null?void 0:r.tasks,h,j]),w=i.useMemo(()=>{if(!r)return[];const t=[];return r.created_at&&t.push({date:r.created_at,title:"تم إنشاء المشروع",type:"created",icon:"fa-plus-circle"}),r.start_date&&t.push({date:r.start_date,title:"بداية المشروع",type:"start",icon:"fa-play-circle"}),r.tasks&&r.tasks.forEach(l=>{l.completed_at&&t.push({date:l.completed_at,title:`تم إكمال: ${l.title}`,type:"task_completed",icon:"fa-check-circle"})}),r.completed_at&&t.push({date:r.completed_at,title:"تم إكمال المشروع",type:"completed",icon:"fa-flag-checkered"}),r.due_date&&t.push({date:r.due_date,title:"الموعد النهائي",type:"deadline",icon:"fa-calendar-check"}),t.sort((l,o)=>new Date(l.date)-new Date(o.date))},[r]);if(A)return e.jsx("div",{className:`min-h-screen flex items-center justify-center transition-colors duration-300 ${s?"bg-gradient-to-br from-gray-900 via-gray-800 to-gray-900":"bg-gradient-to-br from-gray-50 via-blue-50/30 to-indigo-50/30"}`,children:e.jsxs("div",{className:`rounded-2xl shadow-xl p-12 text-center transition-colors duration-300 ${s?"bg-gray-800":"bg-white"}`,children:[e.jsx("div",{className:"inline-block animate-spin rounded-full h-16 w-16 border-4 border-blue-600 border-t-transparent mb-4"}),e.jsx("p",{className:`font-medium text-lg ${s?"text-gray-300":"text-gray-600"}`,children:"جاري تحميل بيانات المشروع..."})]})});if(!r)return e.jsx("div",{className:`min-h-screen flex items-center justify-center transition-colors duration-300 ${s?"bg-gradient-to-br from-gray-900 via-gray-800 to-gray-900":"bg-gradient-to-br from-gray-50 via-blue-50/30 to-indigo-50/30"}`,children:e.jsxs("div",{className:`rounded-2xl shadow-xl p-12 text-center transition-colors duration-300 ${s?"bg-gray-800":"bg-white"}`,children:[e.jsx("div",{className:`w-20 h-20 rounded-full flex items-center justify-center mx-auto mb-4 ${s?"bg-red-900/30":"bg-red-100"}`,children:e.jsx("i",{className:"fas fa-exclamation-triangle text-red-600 text-3xl"})}),e.jsx("p",{className:`text-lg ${s?"text-gray-300":"text-gray-600"}`,children:y||"لم يتم العثور على المشروع المطلوب"})]})});const V=W[r.status]??r.status,B=X(s)[r.status]??(s?"bg-gray-700 text-gray-300":"bg-gray-100 text-gray-700");return e.jsx("div",{className:`min-h-screen transition-colors duration-300 ${s?"bg-gradient-to-br from-gray-900 via-gray-800 to-gray-900":"bg-gradient-to-br from-gray-50 via-blue-50/30 to-indigo-50/30"}`,children:e.jsxs("div",{className:"max-w-[1600px] mx-auto px-4 py-6 space-y-6",children:[e.jsx("div",{className:`rounded-2xl shadow-lg border-2 p-8 transition-colors duration-300 ${s?"bg-gray-800 border-gray-700":"bg-white border-gray-100"}`,children:e.jsxs("div",{className:"flex flex-wrap items-start justify-between gap-6",children:[e.jsxs("div",{className:"flex-1",children:[e.jsxs("nav",{className:`flex items-center gap-2 text-sm mb-3 ${s?"text-gray-400":"text-gray-600"}`,children:[e.jsxs($,{to:"/projects",className:"hover:text-blue-600 transition-colors flex items-center gap-1",children:[e.jsx("i",{className:"fas fa-project-diagram"}),e.jsx("span",{children:"المشاريع"})]}),e.jsx("i",{className:"fas fa-chevron-left text-xs"}),e.jsx("span",{className:`font-medium ${s?"text-gray-200":"text-gray-900"}`,children:r.name})]}),e.jsx("h1",{className:`text-4xl font-black mb-3 ${s?"text-gray-100":"text-gray-900"}`,children:r.name}),e.jsxs("div",{className:"flex flex-wrap items-center gap-3",children:[e.jsxs("span",{className:`px-4 py-2 rounded-xl text-sm font-bold border-2 ${B}`,children:[e.jsx("i",{className:"fas fa-circle text-xs mr-1"}),V]}),e.jsxs("span",{className:`px-4 py-2 rounded-xl text-sm font-bold border-2 transition-colors duration-300 ${s?"bg-gradient-to-r from-purple-900/30 to-pink-900/30 text-purple-300 border-purple-700":"bg-gradient-to-r from-purple-100 to-pink-100 text-purple-700 border-purple-200"}`,children:[e.jsx("i",{className:"fas fa-flag mr-1"}),P[r.priority]??"غير محدد"]}),r.color&&e.jsxs("div",{className:`flex items-center gap-2 px-4 py-2 rounded-xl border-2 ${s?"bg-gray-900 border-gray-700":"bg-gray-100 border-gray-200"}`,children:[e.jsx("div",{className:"w-4 h-4 rounded-full border-2 border-white shadow",style:{backgroundColor:r.color}}),e.jsx("span",{className:`text-sm font-bold ${s?"text-gray-300":"text-gray-700"}`,children:"لون المشروع"})]})]})]}),e.jsxs("div",{className:"flex flex-wrap gap-2",children:[e.jsxs("button",{onClick:()=>R(!C),className:`px-4 py-2.5 border-2 rounded-lg shadow-sm hover:shadow transition-all flex items-center gap-2 text-sm font-medium ${s?"bg-gray-900 border-gray-700 hover:border-indigo-500 hover:bg-gray-700 text-gray-300":"bg-white border-gray-300 hover:border-indigo-300 hover:bg-indigo-50 text-gray-700"}`,children:[e.jsx("i",{className:"fas fa-clock"}),e.jsx("span",{children:"Timeline"})]}),e.jsxs("button",{onClick:()=>m(!0),className:"px-4 py-2.5 bg-gradient-to-r from-green-600 to-emerald-600 hover:from-green-700 hover:to-emerald-700 text-white rounded-lg shadow-md hover:shadow-lg transition-all flex items-center gap-2 text-sm font-bold",children:[e.jsx("i",{className:"fas fa-plus"}),e.jsx("span",{children:"مهمة جديدة"})]}),e.jsxs("button",{onClick:q,className:"px-4 py-2.5 bg-blue-600 hover:bg-blue-700 text-white rounded-lg shadow-md hover:shadow-lg transition-all flex items-center gap-2 text-sm font-bold",children:[e.jsx("i",{className:"fas fa-sync"}),e.jsx("span",{children:"تبديل الحالة"})]}),e.jsxs("button",{onClick:O,className:"px-4 py-2.5 bg-red-600 hover:bg-red-700 text-white rounded-lg shadow-md hover:shadow-lg transition-all flex items-center gap-2 text-sm font-bold",children:[e.jsx("i",{className:"fas fa-trash"}),e.jsx("span",{children:"حذف"})]})]})]})}),y&&e.jsxs("div",{className:`p-4 border-2 rounded-xl flex items-center gap-3 transition-colors duration-300 ${s?"bg-red-900/30 border-red-800 text-red-300":"bg-red-50 border-red-200 text-red-700"}`,children:[e.jsx("i",{className:"fas fa-exclamation-circle text-xl"}),e.jsx("span",{children:y})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4",children:[e.jsx("div",{className:`rounded-xl shadow-sm border p-6 hover:shadow-md transition-all ${s?"bg-gray-800 border-gray-700":"bg-white border-gray-100"}`,children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:`text-sm mb-1 ${s?"text-gray-400":"text-gray-600"}`,children:"إجمالي المهام"}),e.jsx("p",{className:`text-3xl font-black ${s?"text-gray-100":"text-gray-900"}`,children:(d==null?void 0:d.total_tasks)??0})]}),e.jsx("div",{className:`w-14 h-14 rounded-xl flex items-center justify-center ${s?"bg-blue-900/30":"bg-blue-100"}`,children:e.jsx("i",{className:"fas fa-tasks text-blue-600 text-2xl"})})]})}),e.jsx("div",{className:`rounded-xl shadow-sm border p-6 hover:shadow-md transition-all ${s?"bg-gray-800 border-gray-700":"bg-white border-gray-100"}`,children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:`text-sm mb-1 ${s?"text-gray-400":"text-gray-600"}`,children:"المهام المكتملة"}),e.jsx("p",{className:"text-3xl font-black text-green-600",children:(d==null?void 0:d.completed_tasks)??0})]}),e.jsx("div",{className:`w-14 h-14 rounded-xl flex items-center justify-center ${s?"bg-green-900/30":"bg-green-100"}`,children:e.jsx("i",{className:"fas fa-check-circle text-green-600 text-2xl"})})]})}),e.jsx("div",{className:`rounded-xl shadow-sm border p-6 hover:shadow-md transition-all ${s?"bg-gray-800 border-gray-700":"bg-white border-gray-100"}`,children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:`text-sm mb-1 ${s?"text-gray-400":"text-gray-600"}`,children:"قيد التنفيذ"}),e.jsx("p",{className:"text-3xl font-black text-blue-600",children:(d==null?void 0:d.in_progress_tasks)??0})]}),e.jsx("div",{className:`w-14 h-14 rounded-xl flex items-center justify-center ${s?"bg-blue-900/30":"bg-blue-100"}`,children:e.jsx("i",{className:"fas fa-spinner text-blue-600 text-2xl"})})]})}),e.jsx("div",{className:`rounded-xl shadow-sm border p-6 hover:shadow-md transition-all ${s?"bg-gray-800 border-gray-700":"bg-white border-gray-100"}`,children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:`text-sm mb-1 ${s?"text-gray-400":"text-gray-600"}`,children:"قيد الانتظار"}),e.jsx("p",{className:"text-3xl font-black text-yellow-600",children:(d==null?void 0:d.pending_tasks)??0})]}),e.jsx("div",{className:`w-14 h-14 rounded-xl flex items-center justify-center ${s?"bg-yellow-900/30":"bg-yellow-100"}`,children:e.jsx("i",{className:"fas fa-clock text-yellow-600 text-2xl"})})]})})]}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[e.jsxs("div",{className:"lg:col-span-2 space-y-6",children:[e.jsxs("div",{className:`rounded-xl shadow-sm border p-6 transition-colors duration-300 ${s?"bg-gray-800 border-gray-700":"bg-white border-gray-100"}`,children:[e.jsxs("h2",{className:`text-xl font-black mb-4 flex items-center gap-2 ${s?"text-gray-100":"text-gray-900"}`,children:[e.jsx("i",{className:"fas fa-info-circle text-blue-600"}),e.jsx("span",{children:"معلومات المشروع"})]}),r.description&&e.jsxs("div",{className:"mb-6",children:[e.jsx("h3",{className:`text-sm font-bold mb-2 ${s?"text-gray-300":"text-gray-700"}`,children:"الوصف"}),e.jsx("p",{className:`p-4 rounded-lg leading-relaxed ${s?"bg-gray-900 text-gray-300":"bg-gray-50 text-gray-600"}`,children:r.description})]}),e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4",children:[r.start_date&&e.jsx("div",{className:`rounded-xl p-4 border-2 transition-colors duration-300 ${s?"bg-gradient-to-br from-blue-900/40 to-indigo-900/40 border-blue-800":"bg-gradient-to-br from-blue-50 to-indigo-50 border-blue-100"}`,children:e.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[e.jsx("div",{className:"w-10 h-10 rounded-lg bg-blue-600 flex items-center justify-center",children:e.jsx("i",{className:"fas fa-calendar-alt text-white"})}),e.jsxs("div",{children:[e.jsx("p",{className:`text-xs font-bold ${s?"text-blue-400":"text-blue-700"}`,children:"بداية المشروع"}),e.jsx("p",{className:`text-lg font-black ${s?"text-blue-200":"text-blue-900"}`,children:r.start_date})]})]})}),r.due_date&&e.jsx("div",{className:`rounded-xl p-4 border-2 transition-colors duration-300 ${s?"bg-gradient-to-br from-purple-900/40 to-pink-900/40 border-purple-800":"bg-gradient-to-br from-purple-50 to-pink-50 border-purple-100"}`,children:e.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[e.jsx("div",{className:"w-10 h-10 rounded-lg bg-purple-600 flex items-center justify-center",children:e.jsx("i",{className:"fas fa-calendar-check text-white"})}),e.jsxs("div",{children:[e.jsx("p",{className:`text-xs font-bold ${s?"text-purple-400":"text-purple-700"}`,children:"الموعد النهائي"}),e.jsx("p",{className:`text-lg font-black ${s?"text-purple-200":"text-purple-900"}`,children:r.due_date})]})]})})]})]}),e.jsxs("div",{className:`rounded-xl shadow-sm border p-6 transition-colors duration-300 ${s?"bg-gray-800 border-gray-700":"bg-white border-gray-100"}`,children:[e.jsxs("h2",{className:`text-xl font-black mb-4 flex items-center gap-2 ${s?"text-gray-100":"text-gray-900"}`,children:[e.jsx("i",{className:"fas fa-chart-line text-blue-600"}),e.jsx("span",{children:"تقدم المشروع"})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:`text-sm font-medium ${s?"text-gray-400":"text-gray-600"}`,children:"نسبة الإنجاز"}),e.jsxs("span",{className:"text-3xl font-black text-blue-600",children:[r.progress,"%"]})]}),e.jsx("div",{className:`h-6 rounded-full overflow-hidden shadow-inner ${s?"bg-gray-700":"bg-gray-200"}`,children:e.jsx("div",{className:"h-full bg-gradient-to-r from-blue-500 via-indigo-500 to-purple-500 rounded-full transition-all duration-500 flex items-center justify-end pr-2",style:{width:`${Math.min(r.progress??0,100)}%`},children:r.progress>10&&e.jsxs("span",{className:"text-xs font-bold text-white drop-shadow",children:[r.progress,"%"]})})}),e.jsxs("form",{onSubmit:z,className:"flex items-center gap-3 pt-2",children:[e.jsx("input",{type:"number",name:"progress",min:0,max:100,defaultValue:r.progress??0,className:`w-32 px-4 py-2.5 border-2 rounded-lg focus:ring-2 focus:ring-blue-500 text-sm font-bold ${s?"bg-gray-900 border-gray-700 text-gray-200 focus:border-blue-500":"border-gray-300 focus:border-blue-500"}`,placeholder:"0-100"}),e.jsx("button",{type:"submit",disabled:k,className:"flex-1 px-6 py-2.5 bg-gradient-to-r from-blue-600 to-indigo-600 hover:from-blue-700 hover:to-indigo-700 text-white rounded-lg font-bold shadow-md hover:shadow-lg transition-all disabled:opacity-50 disabled:cursor-not-allowed",children:k?"جاري التحديث...":"تحديث النسبة"})]})]})]}),C&&w.length>0&&e.jsxs("div",{className:`rounded-xl shadow-sm border p-6 transition-colors duration-300 ${s?"bg-gray-800 border-gray-700":"bg-white border-gray-100"}`,children:[e.jsxs("h2",{className:`text-xl font-black mb-6 flex items-center gap-2 ${s?"text-gray-100":"text-gray-900"}`,children:[e.jsx("i",{className:"fas fa-history text-blue-600"}),e.jsx("span",{children:"Timeline"})]}),e.jsx("div",{className:"space-y-4",children:w.map((t,l)=>e.jsxs("div",{className:"flex gap-4",children:[e.jsxs("div",{className:"flex flex-col items-center",children:[e.jsx("div",{className:`w-10 h-10 rounded-full flex items-center justify-center border-2 ${s?"bg-blue-900/30 border-blue-700":"bg-blue-100 border-blue-200"}`,children:e.jsx("i",{className:`fas ${t.icon} text-blue-600`})}),l<w.length-1&&e.jsx("div",{className:`w-0.5 h-full mt-2 ${s?"bg-gray-700":"bg-blue-200"}`})]}),e.jsxs("div",{className:"flex-1 pb-4",children:[e.jsx("p",{className:`font-bold ${s?"text-gray-200":"text-gray-900"}`,children:t.title}),e.jsx("p",{className:"text-sm text-gray-500",children:t.date})]})]},l))})]})]}),e.jsx("div",{className:"space-y-6",children:e.jsxs("div",{className:"bg-gradient-to-br from-blue-600 to-indigo-600 rounded-xl shadow-lg p-6 text-white",children:[e.jsxs("h2",{className:"text-xl font-black mb-4 flex items-center gap-2",children:[e.jsx("i",{className:"fas fa-chart-pie"}),e.jsx("span",{children:"نظرة سريعة"})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"bg-white/10 backdrop-blur-sm rounded-lg p-4",children:[e.jsx("p",{className:"text-sm font-medium text-blue-100 mb-1",children:"معدل الإنجاز"}),e.jsxs("p",{className:"text-2xl font-black",children:[(d==null?void 0:d.total_tasks)>0?Math.round(d.completed_tasks/d.total_tasks*100):0,"%"]})]}),e.jsxs("div",{className:"bg-white/10 backdrop-blur-sm rounded-lg p-4",children:[e.jsx("p",{className:"text-sm font-medium text-blue-100 mb-1",children:"المهام المتبقية"}),e.jsx("p",{className:"text-2xl font-black",children:((d==null?void 0:d.total_tasks)??0)-((d==null?void 0:d.completed_tasks)??0)})]})]}),e.jsxs($,{to:"/tasks",className:"block mt-4 text-center px-4 py-3 bg-white hover:bg-blue-50 text-blue-600 rounded-lg font-bold shadow-lg hover:shadow-xl transition-all",children:[e.jsx("i",{className:"fas fa-external-link-alt ml-2"}),"إدارة كل المهام"]})]})})]}),e.jsxs("div",{className:`rounded-xl shadow-sm border p-6 transition-colors duration-300 ${s?"bg-gray-800 border-gray-700":"bg-white border-gray-100"}`,children:[e.jsxs("div",{className:"flex flex-wrap items-center justify-between gap-4 mb-6",children:[e.jsxs("h2",{className:`text-2xl font-black flex items-center gap-2 ${s?"text-gray-100":"text-gray-900"}`,children:[e.jsx("i",{className:"fas fa-list-check text-blue-600"}),e.jsxs("span",{children:["المهام المرتبطة (",v.length,")"]})]}),e.jsxs("div",{className:"flex flex-wrap gap-2",children:[e.jsx("input",{type:"text",placeholder:"ابحث عن مهمة...",value:j,onChange:t=>M(t.target.value),className:`px-4 py-2 border-2 rounded-lg focus:ring-2 focus:ring-blue-500 text-sm ${s?"bg-gray-900 border-gray-700 text-gray-200 focus:border-blue-500":"border-gray-300 focus:border-blue-500"}`}),e.jsxs("select",{value:h,onChange:t=>F(t.target.value),className:`px-4 py-2 border-2 rounded-lg focus:ring-2 focus:ring-blue-500 text-sm font-medium ${s?"bg-gray-900 border-gray-700 text-gray-200 focus:border-blue-500":"border-gray-300 focus:border-blue-500"}`,children:[e.jsx("option",{value:"all",children:"جميع المهام"}),e.jsx("option",{value:"pending",children:"قيد الانتظار"}),e.jsx("option",{value:"in_progress",children:"قيد التنفيذ"}),e.jsx("option",{value:"completed",children:"مكتملة"})]})]})]}),v.length>0?e.jsx("div",{className:"space-y-3",children:v.map(t=>e.jsx("div",{className:`border-2 rounded-xl p-4 transition-all hover:shadow-md ${s?"border-gray-700 hover:border-blue-500":"border-gray-100 hover:border-blue-200"}`,children:e.jsxs("div",{className:"flex flex-wrap items-start justify-between gap-4",children:[e.jsxs("div",{className:"flex-1",children:[e.jsx("h3",{className:`text-lg font-bold mb-2 ${s?"text-gray-200":"text-gray-900"}`,children:t.title}),e.jsxs("div",{className:"flex flex-wrap items-center gap-3 text-sm",children:[e.jsx("span",{className:`px-3 py-1 rounded-lg font-bold ${t.status==="completed"?"bg-green-100 text-green-700":t.status==="in_progress"?"bg-blue-100 text-blue-700":"bg-yellow-100 text-yellow-700"}`,children:Y[t.status]??t.status}),e.jsxs("span",{className:`flex items-center gap-1 ${s?"text-gray-400":"text-gray-600"}`,children:[e.jsx("i",{className:"fas fa-flag"}),P[t.priority]??t.priority]}),t.scheduled_date&&e.jsxs("span",{className:`flex items-center gap-1 ${s?"text-gray-400":"text-gray-600"}`,children:[e.jsx("i",{className:"fas fa-calendar"}),t.scheduled_date]})]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsxs($,{to:`/tasks/${t.id}`,className:"px-4 py-2 text-sm font-bold text-blue-600 border-2 border-blue-200 rounded-lg hover:bg-blue-50 transition-all",children:[e.jsx("i",{className:"fas fa-eye ml-1"}),"عرض"]}),t.status!=="completed"&&e.jsxs("button",{onClick:()=>U(t.id),className:"px-4 py-2 text-sm font-bold bg-green-600 hover:bg-green-700 text-white rounded-lg shadow-md hover:shadow-lg transition-all",children:[e.jsx("i",{className:"fas fa-check ml-1"}),"إنهاء"]})]})]})},t.id))}):e.jsxs("div",{className:"text-center py-12",children:[e.jsx("div",{className:`w-20 h-20 rounded-full flex items-center justify-center mx-auto mb-4 ${s?"bg-gray-700":"bg-gray-100"}`,children:e.jsx("i",{className:`fas fa-tasks text-3xl ${s?"text-gray-500":"text-gray-400"}`})}),e.jsx("p",{className:`text-lg font-medium ${s?"text-gray-400":"text-gray-500"}`,children:"لا توجد مهام مرتبطة بهذا المشروع"})]})]}),Q&&e.jsx("div",{className:`fixed inset-0 backdrop-blur-sm flex items-center justify-center p-4 z-50 ${s?"bg-black/70":"bg-black/50"}`,onClick:()=>m(!1),children:e.jsxs("div",{className:`rounded-2xl shadow-2xl max-w-md w-full p-6 transition-colors duration-300 ${s?"bg-gray-800":"bg-white"}`,onClick:t=>t.stopPropagation(),children:[e.jsxs("div",{className:"flex items-center justify-between mb-6",children:[e.jsx("h3",{className:`text-2xl font-black ${s?"text-gray-100":"text-gray-900"}`,children:"إضافة مهمة جديدة"}),e.jsx("button",{onClick:()=>m(!1),className:`transition-colors ${s?"text-gray-400 hover:text-gray-200":"text-gray-400 hover:text-gray-600"}`,children:e.jsx("i",{className:"fas fa-times text-xl"})})]}),e.jsxs("form",{onSubmit:I,className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:`block text-sm font-bold mb-2 ${s?"text-gray-300":"text-gray-700"}`,children:"عنوان المهمة"}),e.jsx("input",{type:"text",value:g.title,onChange:t=>p({...g,title:t.target.value}),required:!0,className:`w-full px-4 py-2.5 border-2 rounded-lg focus:ring-2 focus:ring-blue-500 ${s?"bg-gray-900 border-gray-700 text-gray-200 focus:border-blue-500":"border-gray-300 focus:border-blue-500"}`,placeholder:"أدخل عنوان المهمة"})]}),e.jsxs("div",{children:[e.jsx("label",{className:`block text-sm font-bold mb-2 ${s?"text-gray-300":"text-gray-700"}`,children:"الأولوية"}),e.jsxs("select",{value:g.priority,onChange:t=>p({...g,priority:t.target.value}),className:`w-full px-4 py-2.5 border-2 rounded-lg focus:ring-2 focus:ring-blue-500 ${s?"bg-gray-900 border-gray-700 text-gray-200 focus:border-blue-500":"border-gray-300 focus:border-blue-500"}`,children:[e.jsx("option",{value:"low",children:"منخفضة"}),e.jsx("option",{value:"medium",children:"متوسطة"}),e.jsx("option",{value:"high",children:"عالية"}),e.jsx("option",{value:"urgent",children:"عاجلة"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:`block text-sm font-bold mb-2 ${s?"text-gray-300":"text-gray-700"}`,children:"التاريخ المحدد"}),e.jsx("input",{type:"date",value:g.scheduled_date,onChange:t=>p({...g,scheduled_date:t.target.value}),className:`w-full px-4 py-2.5 border-2 rounded-lg focus:ring-2 focus:ring-blue-500 ${s?"bg-gray-900 border-gray-700 text-gray-200 focus:border-blue-500":"border-gray-300 focus:border-blue-500"}`})]}),e.jsxs("div",{className:"flex gap-3 pt-4",children:[e.jsx("button",{type:"submit",disabled:N,className:`flex-1 px-6 py-3 rounded-lg font-bold shadow-lg hover:shadow-xl transition-all disabled:opacity-50 text-white ${N?"bg-gray-600":"bg-gradient-to-r from-blue-600 to-indigo-600 hover:from-blue-700 hover:to-indigo-700"}`,children:N?"جاري الإضافة...":"إضافة المهمة"}),e.jsx("button",{type:"button",onClick:()=>m(!1),className:`px-6 py-3 rounded-lg font-bold transition-all ${s?"bg-gray-700 hover:bg-gray-600 text-gray-200":"bg-gray-100 hover:bg-gray-200 text-gray-700"}`,children:"إلغاء"})]})]})]})})]})})}export{de as default};
