import{j as e}from"./charts-VrJjKkAO.js";import{r,c as me,i as Ne}from"./vendor-xoa7E_IC.js";import{u as X,b as B}from"./index-DX6VYCbL.js";import{L as ue,C as ke}from"./LessonMediaSkeleton-B_J4bDtJ.js";import{F as $e}from"./TrashIcon-CwpbpcVG.js";import{F as Ce}from"./ClockIcon-Cuv4DrH5.js";import{F as Le}from"./ChartBarIcon-uHSdAZ-F.js";import{F as xe}from"./CheckCircleIcon-B3US9B7Y.js";import{F as Se}from"./XCircleIcon-9LFgBkgf.js";function Me({title:s,titleId:d,...x},l){return r.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:l,"aria-labelledby":d},x),s?r.createElement("title",{id:d},s):null,r.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M5.25 5.653c0-.856.917-1.398 1.667-.986l11.54 6.347a1.125 1.125 0 0 1 0 1.972l-11.54 6.347a1.125 1.125 0 0 1-1.667-.986V5.653Z"}))}const Ee=r.forwardRef(Me);function _e({title:s,titleId:d,...x},l){return r.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:l,"aria-labelledby":d},x),s?r.createElement("title",{id:d},s):null,r.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M9.813 15.904 9 18.75l-.813-2.846a4.5 4.5 0 0 0-3.09-3.09L2.25 12l2.846-.813a4.5 4.5 0 0 0 3.09-3.09L9 5.25l.813 2.846a4.5 4.5 0 0 0 3.09 3.09L15.75 12l-2.846.813a4.5 4.5 0 0 0-3.09 3.09ZM18.259 8.715 18 9.75l-.259-1.035a3.375 3.375 0 0 0-2.455-2.456L14.25 6l1.036-.259a3.375 3.375 0 0 0 2.455-2.456L18 2.25l.259 1.035a3.375 3.375 0 0 0 2.456 2.456L21.75 6l-1.035.259a3.375 3.375 0 0 0-2.456 2.456ZM16.894 20.567 16.5 21.75l-.394-1.183a2.25 2.25 0 0 0-1.423-1.423L13.5 18.75l1.183-.394a2.25 2.25 0 0 0 1.423-1.423l.394-1.183.394 1.183a2.25 2.25 0 0 0 1.423 1.423l1.183.394-1.183.394a2.25 2.25 0 0 0-1.423 1.423Z"}))}const ge=r.forwardRef(_e);function ee({size:s="md",text:d="ÿ¨ÿßÿ±Ÿä ÿßŸÑÿ™ÿ≠ŸÖŸäŸÑ..."}){const x={sm:"w-6 h-6",md:"w-12 h-12",lg:"w-16 h-16"};return e.jsxs("div",{className:"flex flex-col items-center justify-center py-12",children:[e.jsxs("div",{className:`${x[s]} relative`,children:[e.jsx("div",{className:"absolute inset-0 rounded-full border-4 border-gray-200"}),e.jsx("div",{className:"absolute inset-0 rounded-full border-4 border-blue-600 border-t-transparent animate-spin"})]}),d&&e.jsx("p",{className:"mt-4 text-gray-600 text-sm font-medium",children:d})]})}const K={ar:"ÿßŸÑÿπÿ±ÿ®Ÿäÿ©",en:"English",fr:"Fran√ßais",es:"Espa√±ol",de:"Deutsch"};function Re({lessonId:s,video:d,onUploadSuccess:x,onOpenAIGenerator:l}){const{darkMode:g}=X(),[u,C]=r.useState(!1),[_,h]=r.useState(null),[N,S]=r.useState("ar"),[i,m]=r.useState(null),[R,k]=r.useState(""),[V,v]=r.useState(!1),[W,T]=r.useState(!1),a=r.useRef(null),$=async c=>{var j,Q;const y=c.target.files[0];if(!y)return;const p=y.name.split(".").pop().toLowerCase();if(!["srt","vtt"].includes(p)){h("ŸÜŸàÿπ ŸÖŸÑŸÅ ÿßŸÑÿ™ÿ±ÿ¨ŸÖÿ© ÿ∫Ÿäÿ± ŸÖÿØÿπŸàŸÖ. ÿßŸÑÿ£ŸÜŸàÿßÿπ ÿßŸÑŸÖÿØÿπŸàŸÖÿ©: SRT, VTT");return}const P=5*1024*1024;if(y.size>P){h("ÿ≠ÿ¨ŸÖ ŸÖŸÑŸÅ ÿßŸÑÿ™ÿ±ÿ¨ŸÖÿ© Ÿäÿ¨ÿ® ÿ£ŸÜ ŸÑÿß Ÿäÿ™ÿ¨ÿßŸàÿ≤ 5 ŸÖŸäÿ¨ÿßÿ®ÿßŸäÿ™");return}h(null),C(!0);const G=new FormData;G.append("subtitle",y),G.append("language",N),G.append("language_name",K[N]);try{const O=await B.post(`/lessons/${s}/video/subtitles`,G,{headers:{"Content-Type":"multipart/form-data"}});O.data.success&&(x(O.data.data),a.current&&(a.current.value=""),v(!1))}catch(O){h(((Q=(j=O.response)==null?void 0:j.data)==null?void 0:Q.message)||"ŸÅÿ¥ŸÑ ÿ±ŸÅÿπ ŸÖŸÑŸÅ ÿßŸÑÿ™ÿ±ÿ¨ŸÖÿ©")}finally{C(!1)}},b=async c=>{var y,p;if(confirm("ŸáŸÑ ÿ£ŸÜÿ™ ŸÖÿ™ÿ£ŸÉÿØ ŸÖŸÜ ÿ≠ÿ∞ŸÅ ŸÖŸÑŸÅ ÿßŸÑÿ™ÿ±ÿ¨ŸÖÿ©ÿü"))try{(await B.delete(`/subtitles/${c}`)).data.success&&x(null,c)}catch(P){h(((p=(y=P.response)==null?void 0:y.data)==null?void 0:p.message)||"ŸÅÿ¥ŸÑ ÿ≠ÿ∞ŸÅ ŸÖŸÑŸÅ ÿßŸÑÿ™ÿ±ÿ¨ŸÖÿ©")}},f=c=>{m(c.id),k(c.language),h(null)},L=()=>{m(null),k(""),h(null)},z=async c=>{var y,p;if(!R){h("Ÿäÿ±ÿ¨Ÿâ ÿßÿÆÿ™Ÿäÿßÿ± ÿßŸÑŸÑÿ∫ÿ©");return}C(!0),h(null);try{const P=await B.patch(`/subtitles/${c}/language`,{language:R,language_name:K[R]});P.data.success&&(x(P.data.data),m(null),k(""))}catch(P){h(((p=(y=P.response)==null?void 0:y.data)==null?void 0:p.message)||"ŸÅÿ¥ŸÑ ÿ™ÿ≠ÿØŸäÿ´ ŸÑÿ∫ÿ© ÿßŸÑÿ™ÿ±ÿ¨ŸÖÿ©")}finally{C(!1)}};return d?e.jsxs("div",{className:"space-y-4",children:[e.jsx("h3",{className:`text-lg font-semibold ${g?"text-gray-100":"text-gray-900"}`,children:"ÿßŸÑÿ™ÿ±ÿ¨ŸÖÿßÿ™"}),d.subtitles&&d.subtitles.length>0&&e.jsxs("div",{className:"space-y-2",children:[e.jsx("h4",{className:`text-sm font-medium ${g?"text-gray-300":"text-gray-700"}`,children:"ÿßŸÑÿ™ÿ±ÿ¨ŸÖÿßÿ™ ÿßŸÑŸÖŸàÿ¨ŸàÿØÿ©:"}),d.subtitles.map(c=>e.jsx("div",{className:`p-3 border rounded ${g?"bg-gray-700 border-gray-600":"bg-gray-50 border-gray-200"}`,children:i===c.id?e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{children:[e.jsx("label",{className:`block text-sm font-medium mb-1 ${g?"text-gray-300":"text-gray-700"}`,children:"ÿ™ÿπÿØŸäŸÑ ÿßŸÑŸÑÿ∫ÿ©"}),e.jsx("select",{value:R,onChange:y=>k(y.target.value),className:`w-full px-3 py-2 border rounded focus:ring-2 focus:ring-blue-500 focus:border-blue-500 ${g?"bg-gray-800 border-gray-600 text-gray-100":"bg-white border-gray-300 text-gray-900"}`,disabled:u,children:Object.entries(K).map(([y,p])=>e.jsx("option",{value:y,children:p},y))})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx("button",{onClick:()=>z(c.id),disabled:u,className:"px-3 py-1 text-sm bg-green-500 text-white rounded hover:bg-green-600 disabled:opacity-50",children:u?"ÿ¨ÿßÿ±Ÿä ÿßŸÑÿ≠ŸÅÿ∏...":"ÿ≠ŸÅÿ∏"}),e.jsx("button",{onClick:L,disabled:u,className:"px-3 py-1 text-sm bg-gray-500 text-white rounded hover:bg-gray-600 disabled:opacity-50",children:"ÿ•ŸÑÿ∫ÿßÿ°"})]})]}):e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:`font-medium ${g?"text-gray-100":"text-gray-900"}`,children:c.language_name}),e.jsxs("p",{className:`text-sm ${g?"text-gray-400":"text-gray-600"}`,children:[c.file_name," ‚Ä¢ ",c.formatted_size]})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx("button",{onClick:()=>f(c),className:"px-3 py-1 text-sm bg-blue-500 text-white rounded hover:bg-blue-600",children:"ÿ™ÿπÿØŸäŸÑ ÿßŸÑŸÑÿ∫ÿ©"}),e.jsx("button",{onClick:()=>b(c.id),className:"px-3 py-1 text-sm bg-red-500 text-white rounded hover:bg-red-600",children:"ÿ≠ÿ∞ŸÅ"})]})]})},c.id))]}),e.jsxs("div",{className:`rounded-lg p-4 border ${g?"border-gray-700":"border-gray-200"}`,children:[e.jsx("h4",{className:`text-sm font-medium mb-3 ${g?"text-gray-300":"text-gray-700"}`,children:"ÿ•ÿ∂ÿßŸÅÿ© ÿ™ÿ±ÿ¨ŸÖÿ© ÿ¨ÿØŸäÿØÿ©:"}),!V&&!W&&e.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[e.jsxs("button",{onClick:()=>T(!0),className:"flex flex-col items-center justify-center p-4 border-2 border-dashed border-purple-300 rounded-lg hover:border-purple-500 hover:bg-purple-50 transition-all",children:[e.jsx("svg",{className:"w-8 h-8 text-purple-500 mb-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9.663 17h4.673M12 3v1m6.364 1.636l-.707.707M21 12h-1M4 12H3m3.343-5.657l-.707-.707m2.828 9.9a5 5 0 117.072 0l-.548.547A3.374 3.374 0 0014 18.469V19a2 2 0 11-4 0v-.531c0-.895-.356-1.754-.988-2.386l-.548-.547z"})}),e.jsx("span",{className:"text-sm font-medium text-purple-700",children:"ÿ™ÿ≠ŸàŸäŸÑ ÿπÿ®ÿ± AI"}),e.jsx("span",{className:"text-xs text-gray-500 mt-1",children:"ÿ™ŸÅÿ±Ÿäÿ∫ Ÿàÿ™ÿ±ÿ¨ŸÖÿ© ÿ™ŸÑŸÇÿßÿ¶Ÿäÿ©"})]}),e.jsxs("button",{onClick:()=>v(!0),className:"flex flex-col items-center justify-center p-4 border-2 border-dashed border-blue-300 rounded-lg hover:border-blue-500 hover:bg-blue-50 transition-all",children:[e.jsx("svg",{className:"w-8 h-8 text-blue-500 mb-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M7 16a4 4 0 01-.88-7.903A5 5 0 1115.9 6L16 6a5 5 0 011 9.9M15 13l-3-3m0 0l-3 3m3-3v12"})}),e.jsx("span",{className:"text-sm font-medium text-blue-700",children:"ÿ•ÿ∂ÿßŸÅÿ© ŸÖŸÑŸÅ"}),e.jsx("span",{className:"text-xs text-gray-500 mt-1",children:"ÿ±ŸÅÿπ ŸÖŸÑŸÅ VTT ÿ£Ÿà SRT"})]})]}),V&&e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsx("span",{className:"text-sm font-medium text-gray-700",children:"ÿ±ŸÅÿπ ŸÖŸÑŸÅ ÿ™ÿ±ÿ¨ŸÖÿ©"}),e.jsx("button",{onClick:()=>{v(!1),h(null)},className:"text-xs text-gray-500 hover:text-gray-700",children:"ÿ•ŸÑÿ∫ÿßÿ°"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"ÿßŸÑŸÑÿ∫ÿ©"}),e.jsx("select",{value:N,onChange:c=>S(c.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded focus:ring-2 focus:ring-blue-500 focus:border-blue-500",disabled:u,children:Object.entries(K).map(([c,y])=>e.jsx("option",{value:c,children:y},c))})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"ŸÖŸÑŸÅ ÿßŸÑÿ™ÿ±ÿ¨ŸÖÿ©"}),e.jsx("input",{ref:a,type:"file",accept:".srt,.vtt",onChange:$,disabled:u,className:"w-full px-3 py-2 border border-gray-300 rounded focus:ring-2 focus:ring-blue-500 focus:border-blue-500"}),e.jsx("p",{className:"mt-1 text-xs text-gray-500",children:"ÿßŸÑÿ£ŸÜŸàÿßÿπ ÿßŸÑŸÖÿØÿπŸàŸÖÿ©: SRT, VTT (ÿ≠ÿ™Ÿâ 5 ŸÖŸäÿ¨ÿßÿ®ÿßŸäÿ™)"})]}),u&&e.jsxs("div",{className:"flex items-center justify-center py-2",children:[e.jsx("div",{className:"animate-spin rounded-full h-6 w-6 border-b-2 border-blue-500"}),e.jsx("span",{className:"mr-2 text-sm text-gray-600",children:"ÿ¨ÿßÿ±Ÿä ÿßŸÑÿ±ŸÅÿπ..."})]})]}),W&&e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsx("span",{className:"text-sm font-medium text-gray-700",children:"ÿßŸÑÿ™ÿ≠ŸàŸäŸÑ ÿπÿ®ÿ± AI"}),e.jsx("button",{onClick:()=>{T(!1),h(null)},className:"text-xs text-gray-500 hover:text-gray-700",children:"ÿ•ŸÑÿ∫ÿßÿ°"})]}),e.jsxs("div",{className:"p-4 bg-gradient-to-r from-purple-50 to-indigo-50 border border-purple-200 rounded-lg",children:[e.jsx("p",{className:"text-sm text-gray-700 mb-3",children:"ÿßÿ≥ÿ™ÿÆÿØŸÖ ÿßŸÑÿ∞ŸÉÿßÿ° ÿßŸÑÿßÿµÿ∑ŸÜÿßÿπŸä ŸÑÿ™ŸÅÿ±Ÿäÿ∫ ÿßŸÑŸÅŸäÿØŸäŸà ÿ™ŸÑŸÇÿßÿ¶ŸäÿßŸã Ÿàÿ•ŸÜÿ¥ÿßÿ° ÿßŸÑÿ™ÿ±ÿ¨ŸÖÿßÿ™"}),l?e.jsx("button",{onClick:()=>{T(!1),l()},className:"w-full px-4 py-2 bg-gradient-to-r from-purple-500 to-indigo-600 text-white rounded-lg hover:from-purple-600 hover:to-indigo-700 font-medium transition-all",children:"ÿßŸÜÿ™ŸÇŸÑ ÿ•ŸÑŸâ ÿ£ÿØÿßÿ© ÿßŸÑÿ™ŸÅÿ±Ÿäÿ∫ ÿßŸÑÿ™ŸÑŸÇÿßÿ¶Ÿä"}):e.jsx("p",{className:"text-xs text-gray-600 text-center",children:"ŸäŸàÿ¨ÿØ ÿ£ÿØÿßÿ© ÿßŸÑÿ™ŸÅÿ±Ÿäÿ∫ ÿßŸÑÿ™ŸÑŸÇÿßÿ¶Ÿä ŸÅŸä ŸÜŸÅÿ≥ ÿßŸÑÿµŸÅÿ≠ÿ© ÿ£ÿπŸÑÿßŸá"})]})]})]}),_&&e.jsx("div",{className:"p-3 bg-red-50 border border-red-200 rounded text-red-700 text-sm",children:_})]}):e.jsx("div",{className:`p-4 rounded border ${g?"bg-yellow-900/30 border-yellow-800 text-yellow-300":"bg-yellow-50 border-yellow-200 text-yellow-700"}`,children:"Ÿäÿ¨ÿ® ÿ±ŸÅÿπ ÿßŸÑŸÅŸäÿØŸäŸà ÿ£ŸàŸÑÿßŸã ŸÇÿ®ŸÑ ÿ•ÿ∂ÿßŸÅÿ© ÿßŸÑÿ™ÿ±ÿ¨ŸÖÿßÿ™"})}function Te({lessonId:s,video:d,onSuccess:x}){const{darkMode:l}=X(),[g,u]=r.useState(!1),[C,_]=r.useState(!1),[h,N]=r.useState(null),[S,i]=r.useState(null),[m,R]=r.useState(""),[k,V]=r.useState(null),[v,W]=r.useState("idle"),[T,a]=r.useState(!1),[$,b]=r.useState([]),[f,L]=r.useState(!1),[z,c]=r.useState(0),[y,p]=r.useState(""),P=r.useRef(null);r.useEffect(()=>()=>{P.current&&clearInterval(P.current)},[]);const G=[{code:"ar",name:"ÿßŸÑÿπÿ±ÿ®Ÿäÿ©"},{code:"en",name:"English"},{code:"fr",name:"Fran√ßais"},{code:"es",name:"Espa√±ol"},{code:"de",name:"Deutsch"},{code:"it",name:"Italiano"},{code:"pt",name:"Portugu√™s"},{code:"ru",name:"–†—É—Å—Å–∫–∏–π"},{code:"zh",name:"‰∏≠Êñá"},{code:"ja",name:"Êó•Êú¨Ë™û"},{code:"ko",name:"ÌïúÍµ≠Ïñ¥"},{code:"tr",name:"T√ºrk√ße"},{code:"hi",name:"‡§π‡§ø‡§®‡•ç‡§¶‡•Ä"},{code:"ur",name:"ÿßÿ±ÿØŸà"}],j=async()=>{var w,I;if(!d){N("Ÿäÿ¨ÿ® ÿ±ŸÅÿπ ÿßŸÑŸÅŸäÿØŸäŸà ÿ£ŸàŸÑÿßŸã");return}try{u(!0),N(null),i(null),W("transcribing"),c(0),p("ÿ¨ÿßÿ±Ÿä ÿßŸÑÿßÿ™ÿµÿßŸÑ...");const M=setInterval(()=>{c(E=>{if(E<90){const H=Math.random()*8+2,F=Math.min(E+H,90);return F<30?p("ÿßÿ≥ÿ™ÿÆÿ±ÿßÿ¨ ÿßŸÑÿµŸàÿ™ ŸÖŸÜ ÿßŸÑŸÅŸäÿØŸäŸà..."):F<50?p("ÿ™ÿ≠ŸàŸäŸÑ ÿßŸÑÿµŸàÿ™..."):F<80?p("ÿ™ŸÅÿ±Ÿäÿ∫ ÿßŸÑÿµŸàÿ™ ÿ®ÿßŸÑÿ∞ŸÉÿßÿ° ÿßŸÑÿßÿµÿ∑ŸÜÿßÿπŸä..."):p("ÿ•ŸÜŸáÿßÿ° ÿßŸÑÿπŸÖŸÑŸäÿ©..."),F}return E})},1e3),A=await B.post(`/lessons/${s}/video/transcribe`);if(clearInterval(M),c(100),p("ÿßŸÉÿ™ŸÖŸÑ ÿßŸÑÿ™ŸÅÿ±Ÿäÿ∫!"),A.data.success){const E=A.data.data.transcript;R(E),await Q(E)}}catch(M){N(((I=(w=M.response)==null?void 0:w.data)==null?void 0:I.message)||"ŸÅÿ¥ŸÑ ŸÅŸä ÿ™ŸÅÿ±Ÿäÿ∫ ÿßŸÑŸÅŸäÿØŸäŸà"),W("idle"),u(!1)}},Q=async w=>{var I,M,A,E;try{const H=await B.post(`/lessons/${s}/video/detect-language`,{text:w});if(H.data.success){const F={code:H.data.data.language_code,name:H.data.data.language_name};V(F),_(!0);try{const q=await B.post(`/lessons/${s}/video/save-as-subtitle`,{text:w,language:F.code,language_name:F.name});q.data.success&&(i(`ÿ™ŸÖ ÿßŸÑÿ™ŸÅÿ±Ÿäÿ∫ ÿ®ŸÜÿ¨ÿßÿ≠! ÿßŸÑŸÑÿ∫ÿ© ÿßŸÑŸÖŸÉÿ™ÿ¥ŸÅÿ©: ${F.name}`),x&&x(q.data.data))}catch(q){N("ÿ™ŸÖ ÿßŸÑÿ™ŸÅÿ±Ÿäÿ∫ ÿ®ŸÜÿ¨ÿßÿ≠ ŸÑŸÉŸÜ ŸÅÿ¥ŸÑ ÿ≠ŸÅÿ∏ ÿßŸÑÿ™ÿ±ÿ¨ŸÖÿ©: "+(((M=(I=q.response)==null?void 0:I.data)==null?void 0:M.message)||"ÿÆÿ∑ÿ£ ÿ∫Ÿäÿ± ŸÖÿπÿ±ŸàŸÅ"))}finally{_(!1)}}}catch{V({code:"en",name:"English"}),_(!0);try{const F=await B.post(`/lessons/${s}/video/save-as-subtitle`,{text:w,language:"en",language_name:"English"});F.data.success&&(i("ÿ™ŸÖ ÿßŸÑÿ™ŸÅÿ±Ÿäÿ∫ Ÿàÿ≠ŸÅÿ∏Ÿá ŸÉŸÄ English (ÿßŸÅÿ™ÿ±ÿßÿ∂Ÿä)"),x&&x(F.data.data))}catch(F){N("ÿ™ŸÖ ÿßŸÑÿ™ŸÅÿ±Ÿäÿ∫ ÿ®ŸÜÿ¨ÿßÿ≠ ŸÑŸÉŸÜ ŸÅÿ¥ŸÑ ÿ≠ŸÅÿ∏ ÿßŸÑÿ™ÿ±ÿ¨ŸÖÿ©: "+(((E=(A=F.response)==null?void 0:A.data)==null?void 0:E.message)||"ÿÆÿ∑ÿ£ ÿ∫Ÿäÿ± ŸÖÿπÿ±ŸàŸÅ"))}finally{_(!1)}}W("transcribed"),u(!1)},O=async()=>{var w,I;if($.length===0){N("Ÿäÿ±ÿ¨Ÿâ ÿßÿÆÿ™Ÿäÿßÿ± ŸÑÿ∫ÿ© Ÿàÿßÿ≠ÿØÿ© ÿπŸÑŸâ ÿßŸÑÿ£ŸÇŸÑ");return}try{L(!0),N(null),i(null);let M=0,A=0;for(const E of $)try{const H=await B.post(`/lessons/${s}/video/translate`,{text:m,target_language:E.code,target_language_name:E.name});if(H.data.success){const F=await B.post(`/lessons/${s}/video/save-as-subtitle`,{text:H.data.data.translated_text,language:E.code,language_name:E.name});F.data.success?(M++,x&&x(F.data.data)):A++}else A++}catch(H){A++,console.error(`Failed to translate to ${E.name}:`,H)}M>0?(i(`ÿ™ŸÖ ÿ•ÿ∂ÿßŸÅÿ© ${M} ÿ™ÿ±ÿ¨ŸÖÿ© ÿ®ŸÜÿ¨ÿßÿ≠!${A>0?` (ŸÅÿ¥ŸÑ ${A})`:""}`),b([]),a(!1)):N("ŸÅÿ¥ŸÑ ŸÅŸä ÿ•ÿ∂ÿßŸÅÿ© ÿßŸÑÿ™ÿ±ÿ¨ŸÖÿßÿ™")}catch(M){N(((I=(w=M.response)==null?void 0:w.data)==null?void 0:I.message)||"ÿ≠ÿØÿ´ ÿÆÿ∑ÿ£ ÿ£ÿ´ŸÜÿßÿ° ÿ•ÿ∂ÿßŸÅÿ© ÿßŸÑÿ™ÿ±ÿ¨ŸÖÿßÿ™")}finally{L(!1)}},Z=w=>{k&&w.code===k.code||b(I=>I.find(A=>A.code===w.code)?I.filter(A=>A.code!==w.code):[...I,w])},te=w=>{navigator.clipboard.writeText(w),alert("ÿ™ŸÖ ÿßŸÑŸÜÿ≥ÿÆ ÿ•ŸÑŸâ ÿßŸÑÿ≠ÿßŸÅÿ∏ÿ©")},se=()=>{R(""),V(null),W("idle"),N(null),i(null),a(!1),b([])};return e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("h3",{className:`text-lg font-semibold ${l?"text-gray-100":"text-gray-900"}`,children:"ÿ™ŸÅÿ±Ÿäÿ∫ ÿßŸÑŸÅŸäÿØŸäŸà Ÿàÿ•ŸÜÿ¥ÿßÿ° ÿ™ÿ±ÿ¨ŸÖÿßÿ™"}),v!=="idle"&&e.jsx("button",{onClick:se,className:`text-sm transition-colors ${l?"text-gray-400 hover:text-gray-200":"text-gray-500 hover:text-gray-700"}`,children:"ÿ•ÿπÿßÿØÿ© ÿ™ÿπŸäŸäŸÜ"})]}),h&&e.jsx("div",{className:`rounded-lg p-4 text-sm border ${l?"bg-red-900/30 border-red-800 text-red-300":"bg-red-50 border-red-200 text-red-700"}`,children:h}),S&&e.jsx("div",{className:`rounded-lg p-4 text-sm border ${l?"bg-green-900/30 border-green-800 text-green-300":"bg-green-50 border-green-200 text-green-700"}`,children:S}),!d&&e.jsx("div",{className:`rounded-lg p-4 text-sm border ${l?"bg-yellow-900/30 border-yellow-800 text-yellow-300":"bg-yellow-50 border-yellow-200 text-yellow-700"}`,children:"Ÿäÿ¨ÿ® ÿ±ŸÅÿπ ÿßŸÑŸÅŸäÿØŸäŸà ÿ£ŸàŸÑÿßŸã ŸÇÿ®ŸÑ ÿßÿ≥ÿ™ÿÆÿØÿßŸÖ ÿÆÿßÿµŸäÿ© ÿßŸÑÿ™ŸÅÿ±Ÿäÿ∫ ÿßŸÑÿ™ŸÑŸÇÿßÿ¶Ÿä"}),d&&v==="idle"&&e.jsxs("div",{className:`rounded-xl p-6 border-2 border-dashed ${l?"border-purple-700 bg-purple-900/20":"border-purple-200 bg-purple-50/50"}`,children:[e.jsxs("div",{className:"text-center mb-6",children:[e.jsx("div",{className:`inline-flex items-center justify-center w-16 h-16 rounded-full mb-4 ${l?"bg-purple-800":"bg-purple-100"}`,children:e.jsx("svg",{className:`w-8 h-8 ${l?"text-purple-300":"text-purple-600"}`,fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9.663 17h4.673M12 3v1m6.364 1.636l-.707.707M21 12h-1M4 12H3m3.343-5.657l-.707-.707m2.828 9.9a5 5 0 117.072 0l-.548.547A3.374 3.374 0 0014 18.469V19a2 2 0 11-4 0v-.531c0-.895-.356-1.754-.988-2.386l-.548-.547z"})})}),e.jsx("h4",{className:`text-xl font-bold mb-2 ${l?"text-gray-100":"text-gray-900"}`,children:"ÿ™ŸÅÿ±Ÿäÿ∫ ÿ™ŸÑŸÇÿßÿ¶Ÿä ÿ®ÿßŸÑÿ∞ŸÉÿßÿ° ÿßŸÑÿßÿµÿ∑ŸÜÿßÿπŸä"}),e.jsx("p",{className:`text-sm ${l?"text-gray-400":"text-gray-600"}`,children:"3 ÿÆÿ∑Ÿàÿßÿ™ ÿ®ÿ≥Ÿäÿ∑ÿ© ŸÅŸÇÿ∑"})]}),e.jsxs("div",{className:"grid grid-cols-3 gap-4 mb-6",children:[e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:`inline-flex items-center justify-center w-10 h-10 rounded-full mb-2 ${l?"bg-blue-800 text-blue-300":"bg-blue-100 text-blue-600"}`,children:e.jsx("span",{className:"font-bold",children:"1"})}),e.jsx("p",{className:`text-xs ${l?"text-gray-400":"text-gray-600"}`,children:"ÿ™ŸÅÿ±Ÿäÿ∫ ÿßŸÑÿµŸàÿ™"})]}),e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:`inline-flex items-center justify-center w-10 h-10 rounded-full mb-2 ${l?"bg-green-800 text-green-300":"bg-green-100 text-green-600"}`,children:e.jsx("span",{className:"font-bold",children:"2"})}),e.jsx("p",{className:`text-xs ${l?"text-gray-400":"text-gray-600"}`,children:"ÿ≠ŸÅÿ∏ ÿßŸÑÿ™ÿ±ÿ¨ŸÖÿ©"})]}),e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:`inline-flex items-center justify-center w-10 h-10 rounded-full mb-2 ${l?"bg-purple-800 text-purple-300":"bg-purple-100 text-purple-600"}`,children:e.jsx("span",{className:"font-bold",children:"3"})}),e.jsx("p",{className:`text-xs ${l?"text-gray-400":"text-gray-600"}`,children:"ÿ™ÿ±ÿ¨ŸÖÿ© ŸÑŸÑÿ∫ÿßÿ™"})]})]}),e.jsx("button",{onClick:j,disabled:g,className:"w-full px-6 py-4 bg-gradient-to-r from-purple-600 to-indigo-600 text-white rounded-xl hover:from-purple-700 hover:to-indigo-700 disabled:opacity-50 disabled:cursor-not-allowed font-bold text-lg transition-all shadow-lg hover:shadow-xl flex items-center justify-center gap-3",children:g?e.jsxs(e.Fragment,{children:[e.jsx(ee,{}),"ÿ¨ÿßÿ±Ÿä ÿßŸÑÿ™ŸÅÿ±Ÿäÿ∫..."]}):e.jsxs(e.Fragment,{children:[e.jsxs("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:[e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M14.752 11.168l-3.197-2.132A1 1 0 0010 9.87v4.263a1 1 0 001.555.832l3.197-2.132a1 1 0 000-1.664z"}),e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})]}),"ÿßÿ®ÿØÿ£ ÿßŸÑÿ™ŸÅÿ±Ÿäÿ∫ ÿßŸÑÿ¢ŸÜ"]})}),e.jsxs("div",{className:`mt-4 flex items-center justify-center gap-4 text-xs ${l?"text-gray-500":"text-gray-400"}`,children:[e.jsxs("span",{className:"flex items-center gap-1",children:[e.jsx("svg",{className:"w-4 h-4",fill:"currentColor",viewBox:"0 0 20 20",children:e.jsx("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zm3.707-9.293a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z",clipRule:"evenodd"})}),"ÿØŸÇÿ© ÿπÿßŸÑŸäÿ©"]}),e.jsxs("span",{className:"flex items-center gap-1",children:[e.jsx("svg",{className:"w-4 h-4",fill:"currentColor",viewBox:"0 0 20 20",children:e.jsx("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zm3.707-9.293a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z",clipRule:"evenodd"})}),"ÿ™ŸàŸÇŸäÿ™ ÿØŸÇŸäŸÇ"]}),e.jsxs("span",{className:"flex items-center gap-1",children:[e.jsx("svg",{className:"w-4 h-4",fill:"currentColor",viewBox:"0 0 20 20",children:e.jsx("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zm3.707-9.293a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z",clipRule:"evenodd"})}),"ÿ≠ŸÅÿ∏ ÿ™ŸÑŸÇÿßÿ¶Ÿä"]})]})]}),v==="transcribing"&&e.jsxs("div",{className:`rounded-lg p-6 border ${l?"bg-blue-900/30 border-blue-800":"bg-blue-50 border-blue-200"}`,children:[e.jsx("div",{className:"flex justify-center",children:e.jsx(ee,{})}),e.jsx("p",{className:`mt-4 font-medium text-center ${l?"text-blue-300":"text-blue-700"}`,children:y||"ÿ¨ÿßÿ±Ÿä ÿ™ŸÅÿ±Ÿäÿ∫ ÿßŸÑŸÅŸäÿØŸäŸà..."}),e.jsxs("div",{className:"mt-4",children:[e.jsxs("div",{className:`flex justify-between text-sm mb-1 ${l?"text-blue-400":"text-blue-600"}`,children:[e.jsx("span",{children:"ÿßŸÑÿ™ŸÇÿØŸÖ"}),e.jsxs("span",{children:[z,"%"]})]}),e.jsx("div",{className:`w-full rounded-full h-2.5 ${l?"bg-blue-900":"bg-blue-100"}`,children:e.jsx("div",{className:"bg-blue-600 h-2.5 rounded-full transition-all duration-500",style:{width:`${z}%`}})})]}),e.jsx("p",{className:`mt-4 text-sm text-center ${l?"text-blue-400":"text-blue-600"}`,children:"Ÿáÿ∞Ÿá ÿßŸÑÿπŸÖŸÑŸäÿ© ŸÇÿØ ÿ™ÿ≥ÿ™ÿ∫ÿ±ŸÇ ÿπÿØÿ© ÿØŸÇÿßÿ¶ŸÇ ÿ≠ÿ≥ÿ® ÿ∑ŸàŸÑ ÿßŸÑŸÅŸäÿØŸäŸà"}),e.jsx("p",{className:"mt-2 text-xs text-center text-blue-500",children:"ŸÑÿß ÿ™ŸÇŸÖ ÿ®ÿ•ÿ∫ŸÑÿßŸÇ Ÿáÿ∞Ÿá ÿßŸÑÿµŸÅÿ≠ÿ© ÿ£ÿ´ŸÜÿßÿ° ÿßŸÑÿ™ŸÅÿ±Ÿäÿ∫"})]}),v==="transcribed"&&e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:`flex items-center gap-3 p-4 rounded-xl border ${l?"bg-green-900/30 border-green-800":"bg-green-50 border-green-200"}`,children:[e.jsx("div",{className:`w-10 h-10 rounded-full flex items-center justify-center ${l?"bg-green-800":"bg-green-100"}`,children:e.jsx("svg",{className:`w-6 h-6 ${l?"text-green-300":"text-green-600"}`,fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5 13l4 4L19 7"})})}),e.jsxs("div",{children:[e.jsx("p",{className:`font-semibold ${l?"text-green-300":"text-green-800"}`,children:"ÿ™ŸÖ ÿßŸÑÿ™ŸÅÿ±Ÿäÿ∫ ÿ®ŸÜÿ¨ÿßÿ≠!"}),k&&e.jsxs("p",{className:`text-sm ${l?"text-green-400":"text-green-600"}`,children:["ÿßŸÑŸÑÿ∫ÿ© ÿßŸÑŸÖŸÉÿ™ÿ¥ŸÅÿ©: ",k.name]})]})]}),e.jsxs("details",{className:`rounded-xl overflow-hidden border ${l?"border-gray-700":"border-gray-200"}`,children:[e.jsxs("summary",{className:`px-4 py-3 cursor-pointer flex items-center justify-between ${l?"bg-gray-700 hover:bg-gray-650":"bg-gray-50 hover:bg-gray-100"}`,children:[e.jsx("span",{className:`font-medium ${l?"text-gray-200":"text-gray-800"}`,children:"ÿπÿ±ÿ∂ ÿßŸÑŸÜÿµ ÿßŸÑŸÖŸÅÿ±ÿ∫"}),e.jsx("div",{className:"flex gap-2",children:e.jsx("button",{onClick:w=>{w.preventDefault(),te(m)},className:`text-sm px-3 py-1 rounded transition-colors ${l?"bg-gray-600 text-gray-200 hover:bg-gray-500":"bg-white border text-gray-700 hover:bg-gray-50"}`,children:"ŸÜÿ≥ÿÆ"})})]}),e.jsx("div",{className:`p-4 max-h-64 overflow-y-auto ${l?"bg-gray-800":"bg-white"}`,children:e.jsx("pre",{className:`whitespace-pre-wrap text-sm font-mono ${l?"text-gray-300":"text-gray-700"}`,children:m})})]}),!T&&e.jsxs("button",{onClick:()=>a(!0),className:"w-full px-4 py-3 bg-gradient-to-r from-green-500 to-teal-600 text-white rounded-lg hover:from-green-600 hover:to-teal-700 font-medium transition-all shadow-md hover:shadow-lg flex items-center justify-center gap-2",children:[e.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 4v16m8-8H4"})}),"ÿ•ÿ∂ÿßŸÅÿ© ÿ™ÿ±ÿ¨ŸÖÿßÿ™ ŸÑŸÑÿ∫ÿßÿ™ ÿ£ÿÆÿ±Ÿâ"]}),T&&e.jsxs("div",{className:"border rounded-lg overflow-hidden bg-white",children:[e.jsxs("div",{className:"bg-gradient-to-r from-green-50 to-teal-50 px-4 py-3 border-b",children:[e.jsx("h4",{className:"font-medium text-green-800",children:"ÿßÿÆÿ™ÿ± ÿßŸÑŸÑÿ∫ÿßÿ™ ŸÑŸÑÿ™ÿ±ÿ¨ŸÖÿ©"}),e.jsx("p",{className:"text-sm text-green-600 mt-1",children:"ÿßÿÆÿ™ÿ± ŸÑÿ∫ÿ© ÿ£Ÿà ÿ£ŸÉÿ´ÿ± ŸÑÿ™ÿ±ÿ¨ŸÖÿ© ÿßŸÑŸÜÿµ ÿßŸÑÿ£ÿµŸÑŸä ÿ•ŸÑŸäŸáÿß"})]}),e.jsxs("div",{className:"p-4",children:[e.jsx("div",{className:"grid grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-2",children:G.map(w=>{const I=k&&w.code===k.code,M=$.find(A=>A.code===w.code);return e.jsxs("button",{onClick:()=>Z(w),disabled:I,className:`px-3 py-2 rounded-lg text-sm font-medium transition-all ${I?"bg-gray-100 text-gray-400 cursor-not-allowed":M?"bg-green-500 text-white hover:bg-green-600":"bg-gray-50 text-gray-700 hover:bg-gray-100 border border-gray-200"}`,children:[w.name,I&&" (ÿßŸÑÿ£ÿµŸÑŸäÿ©)"]},w.code)})}),e.jsxs("div",{className:"flex gap-2 mt-4 pt-4 border-t",children:[e.jsx("button",{onClick:O,disabled:f||$.length===0,className:"flex-1 px-4 py-2 bg-green-500 text-white rounded-lg hover:bg-green-600 disabled:opacity-50 disabled:cursor-not-allowed font-medium",children:f?e.jsxs("span",{className:"flex items-center justify-center gap-2",children:[e.jsx(ee,{}),"ÿ¨ÿßÿ±Ÿä ÿßŸÑÿ™ÿ±ÿ¨ŸÖÿ©..."]}):`ÿ™ÿ±ÿ¨ŸÖÿ© ÿ•ŸÑŸâ ${$.length} ŸÑÿ∫ÿ©`}),e.jsx("button",{onClick:()=>{a(!1),b([])},disabled:f,className:"px-4 py-2 bg-gray-200 text-gray-700 rounded-lg hover:bg-gray-300 disabled:opacity-50",children:"ÿ•ŸÑÿ∫ÿßÿ°"})]})]})]})]}),v==="idle"&&d&&e.jsx("p",{className:`text-xs text-center ${l?"text-gray-600":"text-gray-400"}`,children:"Ÿäÿ≥ÿ™ÿÆÿØŸÖ AssemblyAI ‚Ä¢ ÿ™ŸàŸÇŸäÿ™ÿßÿ™ ÿØŸÇŸäŸÇÿ© (~400ms) ‚Ä¢ ÿ≠ŸÅÿ∏ ÿ™ŸÑŸÇÿßÿ¶Ÿä"})]})}function ze({video:s,darkMode:d}){var oe;const x=r.useRef(null),l=r.useRef(null),[g,u]=r.useState(!1),[C,_]=r.useState(0),[h,N]=r.useState(0),[S,i]=r.useState(1),[m,R]=r.useState(!1),[k,V]=r.useState(1),[v,W]=r.useState(null),[T,a]=r.useState(!1),[$,b]=r.useState(!0),[f,L]=r.useState(!1),[z,c]=r.useState(!1),[y,p]=r.useState(!1),[P,G]=r.useState(0),[j,Q]=r.useState({show:!1,direction:null,side:null}),[O,Z]=r.useState(!1),[te,se]=r.useState(!1),[w,I]=r.useState(""),M=r.useRef(null),A=r.useRef(0),E=r.useRef(null),H=r.useRef(null),F=()=>{b(!0),M.current&&clearTimeout(M.current),g&&(M.current=setTimeout(()=>{b(!1)},3e3))};r.useEffect(()=>{const t=x.current;if(!t)return;const n=()=>{N(t.duration),console.log("‚úÖ Video ready:",t.duration)},o=()=>{_(t.currentTime)},U=()=>u(!0),D=()=>{u(!1),b(!0)},J=()=>L(!0),ie=()=>L(!1),de=je=>{console.error("‚ùå Video error:",t.error)},ce=()=>{if(t.buffered.length>0){const we=t.buffered.end(t.buffered.length-1)/t.duration*100;G(we)}};return t.addEventListener("loadedmetadata",n),t.addEventListener("timeupdate",o),t.addEventListener("play",U),t.addEventListener("pause",D),t.addEventListener("waiting",J),t.addEventListener("canplay",ie),t.addEventListener("error",de),t.addEventListener("progress",ce),()=>{t.removeEventListener("loadedmetadata",n),t.removeEventListener("timeupdate",o),t.removeEventListener("play",U),t.removeEventListener("pause",D),t.removeEventListener("waiting",J),t.removeEventListener("canplay",ie),t.removeEventListener("error",de),t.removeEventListener("progress",ce),M.current&&clearTimeout(M.current)}},[g]),r.useEffect(()=>{const t=x.current;if(!t||!s)return;const n=s.proxy_video_url||s.video_url;n&&t.src!==n&&(t.load(),console.log("üé¨ Video preload started:",n))},[s]),r.useEffect(()=>{if(s.subtitles&&s.subtitles.length>0){const t=s.subtitles.find(n=>n.language==="ar");t&&W(t)}},[s.subtitles]),r.useEffect(()=>{const t=x.current;if(!t)return;const n=t.textTracks;for(let D=0;D<n.length;D++)n[D].mode="hidden";let o=null;if(v){for(let D=0;D<n.length;D++)if(n[D].language===v.language){o=n[D],o.mode="hidden";break}}const U=()=>{if(o&&o.activeCues&&o.activeCues.length>0){const D=o.activeCues[0].text;I(D)}else I("")};return o&&o.addEventListener("cuechange",U),()=>{o&&o.removeEventListener("cuechange",U)}},[v]),r.useEffect(()=>{const t=()=>{a(!!document.fullscreenElement)};return document.addEventListener("fullscreenchange",t),()=>document.removeEventListener("fullscreenchange",t)},[]),r.useEffect(()=>{const t=n=>{var U;const o=x.current;if(o&&!(n.target.tagName==="INPUT"||n.target.tagName==="TEXTAREA"))switch(n.key){case" ":case"k":n.preventDefault(),o.paused?o.play():o.pause();break;case"ArrowLeft":n.preventDefault(),o.currentTime=Math.max(0,o.currentTime-10);break;case"ArrowRight":n.preventDefault(),o.currentTime=Math.min(o.duration,o.currentTime+10);break;case"ArrowUp":n.preventDefault(),o.volume=Math.min(1,o.volume+.1),i(o.volume);break;case"ArrowDown":n.preventDefault(),o.volume=Math.max(0,o.volume-.1),i(o.volume);break;case"m":case"M":n.preventDefault(),o.muted=!o.muted,R(o.muted);break;case"f":case"F":n.preventDefault(),document.fullscreenElement?document.exitFullscreen():(U=l.current)==null||U.requestFullscreen();break;case"p":case"P":n.preventDefault(),document.pictureInPictureElement?document.exitPictureInPicture():document.pictureInPictureEnabled&&o.requestPictureInPicture();break}};return document.addEventListener("keydown",t),()=>document.removeEventListener("keydown",t)},[]);const q=()=>{const t=x.current;t&&(g?t.pause():t.play())},Y=t=>{const n=x.current;if(!n)return;const o=n.currentTime+t;n.currentTime=Math.max(0,Math.min(n.duration||1/0,o))},he=t=>{const n=x.current;if(!n)return;const o=parseFloat(t.target.value);n.currentTime=o,_(o)},be=t=>{const n=parseFloat(t.target.value);i(n),x.current&&(x.current.volume=n),n>0&&R(!1)},pe=()=>{const t=x.current;t&&(t.muted=!m,R(!m))},fe=t=>{const n=x.current;n&&(n.playbackRate=t,V(t),p(!1))},re=()=>{const t=l.current;t&&(document.fullscreenElement?(document.exitFullscreen(),a(!1)):(t.requestFullscreen(),a(!0)))},ae=t=>{if(!t||isNaN(t))return"0:00";const n=Math.floor(t/60),o=Math.floor(t%60);return`${n}:${o<10?"0":""}${o}`},le=(t,n)=>{const o=Date.now(),U=o-A.current,D=window.matchMedia("(hover: hover)").matches;E.current&&(clearTimeout(E.current),E.current=null),U<300&&U>0&&H.current===n?D?re():(Y(n==="right"?10:-10),Q({show:!0,direction:n==="right"?"forward":"backward",side:n}),setTimeout(()=>Q({show:!1,direction:null,side:null}),500)):E.current=setTimeout(()=>{q(),F(),E.current=null},250),A.current=o,H.current=n},ye=async()=>{const t=x.current;if(t)try{document.pictureInPictureElement?(await document.exitPictureInPicture(),Z(!1)):document.pictureInPictureEnabled&&(await t.requestPictureInPicture(),Z(!0))}catch(n){console.error("PiP error:",n)}},ve=s.proxy_video_url||s.video_url,ne=h>0?C/h*100:0;return e.jsxs("div",{ref:l,className:`select-none
 relative group outline-none ${T?"fixed inset-0 z-50 bg-black":""}`,dir:"ltr",tabIndex:0,onMouseMove:F,onMouseLeave:()=>g&&b(!1),children:[e.jsxs("div",{className:`relative rounded-lg overflow-hidden ${d?"bg-gray-900":"bg-black"} ${T?"h-full w-full flex items-center justify-center":""}`,children:[e.jsxs("video",{ref:x,className:`w-full ${T?"h-full object-contain":""}`,crossOrigin:"anonymous",playsInline:!0,preload:"auto",style:{width:"100%",minHeight:T?"auto":"400px",maxHeight:T?"100vh":"600px",aspectRatio:"16/9",backgroundColor:"#000",cursor:"pointer"},children:[e.jsx("source",{src:ve,type:s.mime_type||"video/mp4"}),(oe=s.subtitles)==null?void 0:oe.map(t=>e.jsx("track",{kind:"subtitles",src:t.proxy_vtt_url||t.vtt_url,srcLang:t.language,label:t.language_name,default:t.language==="ar"},t.id))]}),f&&e.jsx("div",{className:"absolute inset-0 flex items-center justify-center bg-black bg-opacity-50",children:e.jsx("div",{className:"animate-spin rounded-full h-16 w-16 border-t-2 border-b-2 border-blue-500"})}),e.jsxs("div",{className:"absolute inset-0 flex z-10",children:[e.jsx("div",{className:"w-1/2 h-full cursor-pointer",onClick:t=>le(t,"left")}),e.jsx("div",{className:"w-1/2 h-full cursor-pointer",onClick:t=>le(t,"right")})]}),!g&&!f&&e.jsx("div",{className:"absolute inset-0 flex items-center justify-center z-20 pointer-events-none",children:e.jsx("div",{className:"bg-blue-500 rounded-full p-6 shadow-lg",children:e.jsx("svg",{className:"w-12 h-12 text-white",fill:"currentColor",viewBox:"0 0 20 20",children:e.jsx("path",{d:"M6.3 2.841A1.5 1.5 0 004 4.11V15.89a1.5 1.5 0 002.3 1.269l9.344-5.89a1.5 1.5 0 000-2.538L6.3 2.84z"})})})}),j.show&&e.jsxs("div",{className:`absolute top-0 bottom-0 ${j.side==="right"?"right-0 w-1/3":"left-0 w-1/3"} flex items-center justify-center pointer-events-none z-15`,children:[e.jsx("div",{className:"bg-white/30 rounded-full p-4 animate-ping",children:j.direction==="forward"?e.jsx("svg",{className:"w-10 h-10 text-white",fill:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{d:"M4 18l8.5-6L4 6v12zm9-12v12l8.5-6L13 6z"})}):e.jsx("svg",{className:"w-10 h-10 text-white",fill:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{d:"M11 18V6l-8.5 6 8.5 6zm.5-6l8.5 6V6l-8.5 6z"})})}),e.jsx("span",{className:"absolute bottom-1/4 text-white text-lg font-bold",children:j.direction==="forward"?"+10":"-10"})]}),w&&e.jsx("div",{className:"absolute left-0 right-0 z-25 flex justify-center pointer-events-none",style:{bottom:"100px"},children:e.jsx("div",{className:"px-4 py-2 rounded-lg text-center max-w-[80%]",style:{backgroundColor:"rgba(0, 0, 0, 0.85)",color:"white",fontSize:"1.25rem",lineHeight:"1.6",textShadow:"2px 2px 4px rgba(0,0,0,0.8)",direction:(v==null?void 0:v.language)==="ar"?"rtl":"ltr"},dangerouslySetInnerHTML:{__html:w}})}),e.jsxs("div",{className:`absolute bottom-0 left-0 right-0 z-30 bg-gradient-to-t from-black via-black/80 to-transparent transition-opacity duration-300 ${$||!g?"opacity-100":"opacity-0"}`,style:{pointerEvents:$||!g?"auto":"none"},children:[e.jsxs("div",{className:"px-4 pt-6 pb-2",children:[e.jsxs("div",{className:"relative h-1 bg-gray-700 rounded-lg group/progress",children:[e.jsx("div",{className:"absolute top-0 left-0 h-full bg-gray-500 rounded-lg transition-all",style:{width:`${P}%`}}),e.jsx("div",{className:"absolute top-0 left-0 h-full bg-blue-500 rounded-lg transition-all",style:{width:`${ne}%`}}),e.jsx("input",{type:"range",min:0,max:h||0,step:.1,value:C,onChange:he,className:"absolute top-0 left-0 w-full h-full opacity-0 cursor-pointer"}),e.jsx("div",{className:"absolute top-1/2 -translate-y-1/2 w-3 h-3 bg-blue-500 rounded-full shadow-lg opacity-0 group-hover/progress:opacity-100 transition-opacity pointer-events-none",style:{left:`${ne}%`,transform:"translate(-50%, -50%)"}})]}),e.jsxs("div",{className:"flex justify-between mt-1 text-xs text-white/80",children:[e.jsxs("span",{children:[ae(C)," / ",ae(h)]}),e.jsx("span",{})]})]}),e.jsxs("div",{className:"flex items-center justify-between px-4 pb-4",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("button",{onClick:q,className:"text-white hover:text-blue-400 transition-colors",children:g?e.jsx("svg",{className:"w-8 h-8",fill:"currentColor",viewBox:"0 0 20 20",children:e.jsx("path",{fillRule:"evenodd",d:"M18 10a8 8 0 11-16 0 8 8 0 0116 0zM7 8a1 1 0 012 0v4a1 1 0 11-2 0V8zm5-1a1 1 0 00-1 1v4a1 1 0 102 0V8a1 1 0 00-1-1z",clipRule:"evenodd"})}):e.jsx("svg",{className:"w-8 h-8",fill:"currentColor",viewBox:"0 0 20 20",children:e.jsx("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zM9.555 7.168A1 1 0 008 8v4a1 1 0 001.555.832l3-2a1 1 0 000-1.664l-3-2z",clipRule:"evenodd"})})}),e.jsx("button",{onClick:()=>Y(-10),className:"text-white hover:text-blue-400 transition-colors",title:"Skip backward 10s (‚Üê)",children:e.jsx("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12.066 11.2a1 1 0 000 1.6l5.334 4A1 1 0 0019 16V8a1 1 0 00-1.6-.8l-5.333 4zM4.066 11.2a1 1 0 000 1.6l5.334 4A1 1 0 0011 16V8a1 1 0 00-1.6-.8l-5.334 4z"})})}),e.jsx("button",{onClick:()=>Y(10),className:"text-white hover:text-blue-400 transition-colors",title:"Skip forward 10s (‚Üí)",children:e.jsx("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M11.933 12.8a1 1 0 000-1.6L6.6 7.2A1 1 0 005 8v8a1 1 0 001.6.8l5.333-4zM19.933 12.8a1 1 0 000-1.6l-5.333-4A1 1 0 0013 8v8a1 1 0 001.6.8l5.333-4z"})})}),e.jsxs("div",{className:"relative flex items-center",onMouseEnter:()=>c(!0),onMouseLeave:()=>c(!1),children:[e.jsx("button",{onClick:pe,className:"text-white hover:text-blue-400 transition-colors",title:"Mute (M)",children:m||S===0?e.jsx("svg",{className:"w-6 h-6",fill:"currentColor",viewBox:"0 0 20 20",children:e.jsx("path",{fillRule:"evenodd",d:"M9.383 3.076A1 1 0 0110 4v12a1 1 0 01-1.707.707L4.586 13H2a1 1 0 01-1-1V8a1 1 0 011-1h2.586l3.707-3.707a1 1 0 011.09-.217zM12.293 7.293a1 1 0 011.414 0L15 8.586l1.293-1.293a1 1 0 111.414 1.414L16.414 10l1.293 1.293a1 1 0 01-1.414 1.414L15 11.414l-1.293 1.293a1 1 0 01-1.414-1.414L13.586 10l-1.293-1.293a1 1 0 010-1.414z",clipRule:"evenodd"})}):S<.5?e.jsx("svg",{className:"w-6 h-6",fill:"currentColor",viewBox:"0 0 20 20",children:e.jsx("path",{fillRule:"evenodd",d:"M9.383 3.076A1 1 0 0110 4v12a1 1 0 01-1.707.707L4.586 13H2a1 1 0 01-1-1V8a1 1 0 011-1h2.586l3.707-3.707a1 1 0 011.09-.217zM12.293 7.293a1 1 0 011.414 0 4 4 0 010 5.656 1 1 0 01-1.414-1.414 2 2 0 000-2.828 1 1 0 010-1.414z",clipRule:"evenodd"})}):e.jsx("svg",{className:"w-6 h-6",fill:"currentColor",viewBox:"0 0 20 20",children:e.jsx("path",{fillRule:"evenodd",d:"M9.383 3.076A1 1 0 0110 4v12a1 1 0 01-1.707.707L4.586 13H2a1 1 0 01-1-1V8a1 1 0 011-1h2.586l3.707-3.707a1 1 0 011.09-.217zM14.657 2.929a1 1 0 011.414 0A9.972 9.972 0 0119 10a9.972 9.972 0 01-2.929 7.071 1 1 0 01-1.414-1.414A7.971 7.971 0 0017 10c0-2.21-.894-4.208-2.343-5.657a1 1 0 010-1.414zm-2.829 2.828a1 1 0 011.415 0A5.983 5.983 0 0115 10a5.984 5.984 0 01-1.757 4.243 1 1 0 01-1.415-1.415A3.984 3.984 0 0013 10a3.983 3.983 0 00-1.172-2.828 1 1 0 010-1.415z",clipRule:"evenodd"})})}),e.jsx("div",{className:`overflow-hidden transition-all duration-200 ${z?"w-20 ml-2":"w-0 ml-0"}`,children:e.jsxs("div",{className:"relative h-1 bg-gray-600 rounded-full",children:[e.jsx("div",{className:"absolute top-0 left-0 h-full bg-white rounded-full",style:{width:`${S*100}%`}}),e.jsx("input",{type:"range",min:0,max:1,step:.05,value:S,onChange:be,className:"absolute top-0 left-0 w-full h-full opacity-0 cursor-pointer"})]})})]})]}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsxs("div",{className:"relative",children:[e.jsxs("button",{onClick:()=>p(!y),className:"text-white hover:text-blue-400 transition-colors text-sm font-medium px-2 py-1 rounded hover:bg-white/10",children:[k,"x"]}),y&&e.jsx("div",{className:"absolute bottom-full left-0 mb-2 bg-gray-800 rounded-lg shadow-lg overflow-hidden min-w-[80px]",children:[.25,.5,.75,1,1.25,1.5,1.75,2].map(t=>e.jsxs("button",{onClick:()=>fe(t),className:`w-full px-3 py-2 text-sm text-right hover:bg-blue-600 transition-colors ${k===t?"bg-blue-500 text-white":"text-gray-300"}`,children:[t,"x ",t===1&&"(ÿπÿßÿØŸä)"]},t))})]}),s.subtitles&&s.subtitles.length>0&&e.jsx("div",{className:"relative",children:e.jsxs("select",{value:(v==null?void 0:v.id)||"",onChange:t=>{const n=s.subtitles.find(o=>o.id===parseInt(t.target.value));W(n||null)},className:"bg-transparent text-white text-sm border border-white/30 rounded px-2 py-1 hover:bg-white/10 cursor-pointer",children:[e.jsx("option",{value:"",className:"bg-gray-800",children:"ÿ®ÿØŸàŸÜ ÿ™ÿ±ÿ¨ŸÖÿ©"}),s.subtitles.map(t=>e.jsx("option",{value:t.id,className:"bg-gray-800",children:t.language_name},t.id))]})}),document.pictureInPictureEnabled&&e.jsx("button",{onClick:ye,className:"text-white hover:text-blue-400 transition-colors",title:"Picture in Picture (P)",children:e.jsxs("svg",{className:"w-6 h-6",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,children:[e.jsx("rect",{x:"2",y:"4",width:"20",height:"14",rx:"2"}),e.jsx("rect",{x:"12",y:"10",width:"8",height:"6",rx:"1",className:O?"fill-blue-400 stroke-blue-400":"fill-gray-600"})]})}),e.jsx("button",{onClick:re,className:"text-white hover:text-blue-400 transition-colors",title:"Fullscreen (F)",children:T?e.jsx("svg",{className:"w-6 h-6",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,children:e.jsx("path",{d:"M8 3v4a1 1 0 01-1 1H3M16 3v4a1 1 0 001 1h4M8 21v-4a1 1 0 00-1-1H3M16 21v-4a1 1 0 011-1h4"})}):e.jsx("svg",{className:"w-6 h-6",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,children:e.jsx("path",{d:"M3 8V5a2 2 0 012-2h3M21 8V5a2 2 0 00-2-2h-3M3 16v3a2 2 0 002 2h3M21 16v3a2 2 0 01-2 2h-3"})})})]})]})]})]}),e.jsx("div",{className:`mt-2 p-3 rounded-lg text-xs ${d?"bg-gray-800 text-gray-400":"bg-gray-100 text-gray-600"}`,children:e.jsxs("div",{className:"flex flex-wrap gap-x-4 gap-y-1",children:[e.jsxs("span",{children:[e.jsx("kbd",{className:"px-1 bg-gray-700 text-white rounded",children:"Space"})," Play/Pause"]}),e.jsxs("span",{children:[e.jsx("kbd",{className:"px-1 bg-gray-700 text-white rounded",children:"‚Üê"})," Skip -10s"]}),e.jsxs("span",{children:[e.jsx("kbd",{className:"px-1 bg-gray-700 text-white rounded",children:"‚Üí"})," Skip +10s"]}),e.jsxs("span",{children:[e.jsx("kbd",{className:"px-1 bg-gray-700 text-white rounded",children:"‚Üë‚Üì"})," Volume"]}),e.jsxs("span",{children:[e.jsx("kbd",{className:"px-1 bg-gray-700 text-white rounded",children:"M"})," Mute"]}),e.jsxs("span",{children:[e.jsx("kbd",{className:"px-1 bg-gray-700 text-white rounded",children:"F"})," Fullscreen"]}),e.jsxs("span",{children:[e.jsx("kbd",{className:"px-1 bg-gray-700 text-white rounded",children:"P"})," PiP"]})]})}),e.jsx("style",{jsx:!0,children:`
        .slider::-webkit-slider-thumb {
          appearance: none;
          width: 14px;
          height: 14px;
          border-radius: 50%;
          background: #3b82f6;
          cursor: pointer;
          box-shadow: 0 0 0 3px rgba(59, 130, 246, 0.3);
        }

        .slider::-moz-range-thumb {
          width: 14px;
          height: 14px;
          border-radius: 50%;
          background: #3b82f6;
          cursor: pointer;
          border: none;
          box-shadow: 0 0 0 3px rgba(59, 130, 246, 0.3);
        }

        /* Subtitle styling */
        video::cue {
          background-color: rgba(0, 0, 0, 0.8);
          color: white;
          font-size: 1.25rem;
          font-family: 'Segoe UI', Tahoma, sans-serif;
          line-height: 1.5;
          padding: 0.25rem 0.5rem;
          border-radius: 4px;
        }

        /* Position subtitles above controls */
        video::-webkit-media-text-track-container {
          bottom: 80px !important;
          transform: translateY(-20px);
        }

        video::-webkit-media-text-track-display {
          bottom: 80px !important;
        }
      `})]})}function Pe({lessonId:s,initialSummary:d,onUpdate:x,video:l}){const{darkMode:g}=X(),[u,C]=r.useState(d||""),[_,h]=r.useState(!1),[N,S]=r.useState(!1),[i,m]=r.useState(!1),[R,k]=r.useState(null),[V,v]=r.useState(!1);r.useEffect(()=>{C(d||"")},[d]);const W=async()=>{var b,f;if(!V){h(!1);return}S(!0),k(null);try{(await B.put(`/lessons/${s}`,{summary:u})).data.success&&(h(!1),v(!1),x&&x(u))}catch(L){k(((f=(b=L.response)==null?void 0:b.data)==null?void 0:f.message)||"ŸÅÿ¥ŸÑ ÿ≠ŸÅÿ∏ ÿßŸÑŸÖŸÑÿÆÿµ")}finally{S(!1)}},T=()=>{C(d||""),h(!1),v(!1),k(null)},a=b=>{C(b.target.value),v(b.target.value!==d)},$=async()=>{var b,f;if(!l){k("Ÿäÿ¨ÿ® ÿ±ŸÅÿπ ÿßŸÑŸÅŸäÿØŸäŸà ÿ£ŸàŸÑÿßŸã");return}m(!0),k(null);try{const L=await B.post(`/lessons/${s}/video/transcribe`);if(!L.data.success)throw new Error("ŸÅÿ¥ŸÑ ŸÅŸä ÿ™ŸÅÿ±Ÿäÿ∫ ÿßŸÑŸÅŸäÿØŸäŸà");const z=L.data.data.transcript,c=await B.post(`/lessons/${s}/video/summarize`,{text:z});if(c.data.success){const y=c.data.data.summary;C(y),v(!0),h(!0)}}catch(L){k(((f=(b=L.response)==null?void 0:b.data)==null?void 0:f.message)||"ŸÅÿ¥ŸÑ ŸÅŸä ÿ•ŸÜÿ¥ÿßÿ° ÿßŸÑŸÖŸÑÿÆÿµ ÿßŸÑÿ™ŸÑŸÇÿßÿ¶Ÿä")}finally{m(!1)}};return e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("h3",{className:`text-lg font-semibold ${g?"text-gray-100":"text-gray-900"}`,children:"ŸÖŸÑÿÆÿµ ÿßŸÑÿØÿ±ÿ≥"}),e.jsxs("div",{className:"flex gap-2",children:[l&&!_&&e.jsx("button",{onClick:$,disabled:i,className:"px-3 py-1 text-sm bg-purple-500 text-white rounded hover:bg-purple-600 disabled:opacity-50",children:i?e.jsxs("span",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-white"}),"ÿ¨ÿßÿ±Ÿä ÿßŸÑÿ•ŸÜÿ¥ÿßÿ°..."]}):"ÿ•ŸÜÿ¥ÿßÿ° ŸÖŸÑÿÆÿµ ÿ™ŸÑŸÇÿßÿ¶Ÿä"}),!_&&e.jsx("button",{onClick:()=>h(!0),className:"px-3 py-1 text-sm bg-blue-500 text-white rounded hover:bg-blue-600",children:u?"ÿ™ÿπÿØŸäŸÑ":"ÿ•ÿ∂ÿßŸÅÿ© ŸÖŸÑÿÆÿµ"})]})]}),_?e.jsxs("div",{className:"space-y-3",children:[e.jsx("textarea",{value:u,onChange:a,placeholder:"ÿßŸÉÿ™ÿ® ŸÖŸÑÿÆÿµ ÿßŸÑÿØÿ±ÿ≥ ŸáŸÜÿß...",className:`w-full h-48 px-3 py-2 border rounded focus:ring-2 focus:ring-blue-500 focus:border-blue-500 resize-none ${g?"bg-gray-700 border-gray-600 text-gray-100 placeholder-gray-400":"bg-white border-gray-300 text-gray-900"}`,disabled:N}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("p",{className:`text-xs ${g?"text-gray-400":"text-gray-500"}`,children:[u.length," ÿ≠ÿ±ŸÅ"]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx("button",{onClick:T,disabled:N,className:`px-4 py-2 text-sm border rounded disabled:opacity-50 ${g?"border-gray-600 text-gray-300 hover:bg-gray-700":"border-gray-300 text-gray-700 hover:bg-gray-50"}`,children:"ÿ•ŸÑÿ∫ÿßÿ°"}),e.jsx("button",{onClick:W,disabled:N||!V,className:"px-4 py-2 text-sm bg-blue-500 text-white rounded hover:bg-blue-600 disabled:opacity-50",children:N?e.jsxs("span",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-white"}),"ÿ¨ÿßÿ±Ÿä ÿßŸÑÿ≠ŸÅÿ∏..."]}):"ÿ≠ŸÅÿ∏"})]})]})]}):e.jsx("div",{className:`p-4 rounded-lg min-h-32 ${g?"bg-gray-700":"bg-gray-50"}`,children:u?e.jsx("p",{className:`whitespace-pre-wrap ${g?"text-gray-200":"text-gray-700"}`,children:u}):e.jsx("p",{className:`italic ${g?"text-gray-500":"text-gray-400"}`,children:"ŸÑÿß ŸäŸàÿ¨ÿØ ŸÖŸÑÿÆÿµ ŸÑŸáÿ∞ÿß ÿßŸÑÿØÿ±ÿ≥ ÿ®ÿπÿØ"})}),R&&e.jsx("div",{className:`p-3 border rounded text-sm ${g?"bg-red-900/30 border-red-800 text-red-300":"bg-red-50 border-red-200 text-red-700"}`,children:R})]})}const Ae=({lessonId:s,isInstructor:d=!1})=>{const x=me(),[l,g]=r.useState([]),[u,C]=r.useState(!0),[_,h]=r.useState(!1),[N,S]=r.useState(!1),[i,m]=r.useState({num_questions:10,difficulty:"medium",duration:15,passing_score:70,max_attempts:3,question_types:["multiple_choice","true_false"],language:"ar"});r.useEffect(()=>{s&&R()},[s]);const R=async()=>{try{C(!0);const a=await B.get(`/lessons/${s}/quizzes`);a.data.success&&g(a.data.data)}catch(a){console.error("Error fetching quizzes:",a)}finally{C(!1)}},k=async()=>{var a,$;try{h(!0);const b=await B.post(`/lessons/${s}/quizzes/generate`,i);b.data.success?(alert("ÿ™ŸÖ ÿ•ŸÜÿ¥ÿßÿ° ÿßŸÑÿßÿÆÿ™ÿ®ÿßÿ± ÿ®ŸÜÿ¨ÿßÿ≠ ÿ®ÿßÿ≥ÿ™ÿÆÿØÿßŸÖ ÿßŸÑÿ∞ŸÉÿßÿ° ÿßŸÑÿßÿµÿ∑ŸÜÿßÿπŸä!"),S(!1),R()):alert("ŸÅÿ¥ŸÑ ÿ•ŸÜÿ¥ÿßÿ° ÿßŸÑÿßÿÆÿ™ÿ®ÿßÿ±: "+b.data.message)}catch(b){console.error("Error generating quiz:",b),alert("ŸÅÿ¥ŸÑ ÿ•ŸÜÿ¥ÿßÿ° ÿßŸÑÿßÿÆÿ™ÿ®ÿßÿ±: "+((($=(a=b.response)==null?void 0:a.data)==null?void 0:$.message)||b.message))}finally{h(!1)}},V=async a=>{if(confirm("ŸáŸÑ ÿ£ŸÜÿ™ ŸÖÿ™ÿ£ŸÉÿØ ŸÖŸÜ ÿ≠ÿ∞ŸÅ Ÿáÿ∞ÿß ÿßŸÑÿßÿÆÿ™ÿ®ÿßÿ±ÿü"))try{(await B.delete(`/quizzes/${a}`)).data.success&&(alert("ÿ™ŸÖ ÿ≠ÿ∞ŸÅ ÿßŸÑÿßÿÆÿ™ÿ®ÿßÿ± ÿ®ŸÜÿ¨ÿßÿ≠"),R())}catch($){console.error("Error deleting quiz:",$),alert("ŸÅÿ¥ŸÑ ÿ≠ÿ∞ŸÅ ÿßŸÑÿßÿÆÿ™ÿ®ÿßÿ±")}},v=a=>{x(`/quizzes/${a}/take`)},W=a=>{const $={easy:"bg-green-100 dark:bg-green-900/20 text-green-600 dark:text-green-400",medium:"bg-yellow-100 dark:bg-yellow-900/20 text-yellow-600 dark:text-yellow-400",hard:"bg-red-100 dark:bg-red-900/20 text-red-600 dark:text-red-400"};return $[a]||$.medium},T=a=>({easy:"ÿ≥ŸáŸÑ",medium:"ŸÖÿ™Ÿàÿ≥ÿ∑",hard:"ÿµÿπÿ®"})[a]||"ŸÖÿ™Ÿàÿ≥ÿ∑";return u?e.jsx("div",{className:"flex items-center justify-center py-12",children:e.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600"})}):e.jsxs("div",{className:"space-y-4",dir:"rtl",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("h2",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:"ÿßŸÑÿßÿÆÿ™ÿ®ÿßÿ±ÿßÿ™"}),d&&e.jsxs("button",{onClick:()=>S(!0),className:"flex items-center gap-2 px-4 py-2 bg-gradient-to-r from-purple-600 to-blue-600 text-white rounded-lg hover:from-purple-700 hover:to-blue-700 transition",children:[e.jsx(ge,{className:"w-5 h-5"}),"ÿ•ŸÜÿ¥ÿßÿ° ÿ®ÿßŸÑÿ∞ŸÉÿßÿ° ÿßŸÑÿßÿµÿ∑ŸÜÿßÿπŸä"]})]}),l.length===0?e.jsxs("div",{className:"bg-gray-50 dark:bg-gray-800 rounded-lg p-12 text-center",children:[e.jsx("p",{className:"text-gray-600 dark:text-gray-400 mb-4",children:"ŸÑÿß ÿ™Ÿàÿ¨ÿØ ÿßÿÆÿ™ÿ®ÿßÿ±ÿßÿ™ ŸÖÿ™ÿßÿ≠ÿ© ŸÑŸáÿ∞ÿß ÿßŸÑÿØÿ±ÿ≥"}),d&&e.jsx("button",{onClick:()=>S(!0),className:"px-6 py-3 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition",children:"ÿ•ŸÜÿ¥ÿßÿ° ÿßÿÆÿ™ÿ®ÿßÿ± ÿßŸÑÿ¢ŸÜ"})]}):e.jsx("div",{className:"grid gap-4",children:l.map(a=>e.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-md p-6 border border-gray-200 dark:border-gray-700 hover:border-blue-400 dark:hover:border-blue-500 transition",children:[e.jsxs("div",{className:"flex items-start justify-between mb-4",children:[e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[e.jsx("h3",{className:"text-xl font-semibold text-gray-900 dark:text-white",children:a.title}),e.jsx("span",{className:`px-3 py-1 rounded-full text-xs font-medium ${W(a.difficulty)}`,children:T(a.difficulty)})]}),a.description&&e.jsx("p",{className:"text-gray-600 dark:text-gray-400 text-sm",children:a.description})]}),d&&e.jsx("div",{className:"flex gap-2",children:e.jsx("button",{onClick:()=>V(a.id),className:"p-2 text-red-600 hover:bg-red-50 dark:hover:bg-red-900/20 rounded-lg transition",title:"ÿ≠ÿ∞ŸÅ ÿßŸÑÿßÿÆÿ™ÿ®ÿßÿ±",children:e.jsx($e,{className:"w-5 h-5"})})})]}),e.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4 mb-4",children:[e.jsxs("div",{className:"flex items-center gap-2 text-sm text-gray-600 dark:text-gray-400",children:[e.jsx(Ce,{className:"w-4 h-4"}),e.jsxs("span",{children:[a.duration_minutes," ÿØŸÇŸäŸÇÿ©"]})]}),e.jsxs("div",{className:"flex items-center gap-2 text-sm text-gray-600 dark:text-gray-400",children:[e.jsx(Le,{className:"w-4 h-4"}),e.jsxs("span",{children:[a.questions_count," ÿ≥ÿ§ÿßŸÑ"]})]}),e.jsxs("div",{className:"flex items-center gap-2 text-sm text-gray-600 dark:text-gray-400",children:[e.jsx(xe,{className:"w-4 h-4"}),e.jsxs("span",{children:["ÿØÿ±ÿ¨ÿ© ÿßŸÑŸÜÿ¨ÿßÿ≠: ",a.passing_score,"%"]})]}),e.jsx("div",{className:"flex items-center gap-2 text-sm text-gray-600 dark:text-gray-400",children:e.jsxs("span",{children:["ÿßŸÑŸÖÿ≠ÿßŸàŸÑÿßÿ™: ",a.user_attempts,"/",a.max_attempts]})})]}),a.has_passed?e.jsx("div",{className:"bg-green-50 dark:bg-green-900/20 border border-green-200 dark:border-green-800 rounded-lg p-4 mb-4",children:e.jsxs("div",{className:"flex items-center gap-2 text-green-700 dark:text-green-400",children:[e.jsx(xe,{className:"w-5 h-5"}),e.jsxs("span",{className:"font-medium",children:["ŸÑŸÇÿØ ŸÜÿ¨ÿ≠ÿ™ ŸÅŸä Ÿáÿ∞ÿß ÿßŸÑÿßÿÆÿ™ÿ®ÿßÿ±! ÿ£ÿπŸÑŸâ ŸÜÿ™Ÿäÿ¨ÿ©: ",a.best_score,"%"]})]})}):a.best_score!==null&&a.best_score!==void 0?e.jsx("div",{className:"bg-yellow-50 dark:bg-yellow-900/20 border border-yellow-200 dark:border-yellow-800 rounded-lg p-4 mb-4",children:e.jsxs("div",{className:"flex items-center gap-2 text-yellow-700 dark:text-yellow-400",children:[e.jsx(Se,{className:"w-5 h-5"}),e.jsxs("span",{className:"font-medium",children:["ÿ£ŸÅÿ∂ŸÑ ŸÜÿ™Ÿäÿ¨ÿ©: ",a.best_score,"% - ŸäŸÖŸÉŸÜŸÉ ÿßŸÑŸÖÿ≠ÿßŸàŸÑÿ© ŸÖÿ±ÿ© ÿ£ÿÆÿ±Ÿâ"]})]})}):null,e.jsxs("div",{className:"flex items-center gap-3",children:[a.can_take?e.jsxs("button",{onClick:()=>v(a.id),className:"flex items-center gap-2 px-6 py-3 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition font-medium",children:[e.jsx(Ee,{className:"w-5 h-5"}),a.user_attempts>0?"ÿ•ÿπÿßÿØÿ© ÿßŸÑŸÖÿ≠ÿßŸàŸÑÿ©":"ÿ®ÿØÿ° ÿßŸÑÿßÿÆÿ™ÿ®ÿßÿ±"]}):e.jsx("div",{className:"px-6 py-3 bg-gray-100 dark:bg-gray-700 text-gray-500 dark:text-gray-400 rounded-lg",children:"ŸÑŸÇÿØ ÿßÿ≥ÿ™ŸÜŸÅÿ∞ÿ™ ÿ¨ŸÖŸäÿπ ÿßŸÑŸÖÿ≠ÿßŸàŸÑÿßÿ™"}),a.user_attempts>0&&e.jsxs("button",{onClick:()=>x(`/quizzes/${a.id}/attempts`),className:"px-6 py-3 border-2 border-gray-300 dark:border-gray-600 text-gray-700 dark:text-gray-300 rounded-lg hover:border-blue-400 dark:hover:border-blue-500 transition",children:["ÿπÿ±ÿ∂ ÿßŸÑŸÖÿ≠ÿßŸàŸÑÿßÿ™ (",a.user_attempts,")"]})]})]},a.id))}),N&&e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:e.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg max-w-2xl w-full p-6 max-h-[90vh] overflow-y-auto",children:[e.jsx("h3",{className:"text-2xl font-bold text-gray-900 dark:text-white mb-6",children:"ÿ•ŸÜÿ¥ÿßÿ° ÿßÿÆÿ™ÿ®ÿßÿ± ÿ®ÿßŸÑÿ∞ŸÉÿßÿ° ÿßŸÑÿßÿµÿ∑ŸÜÿßÿπŸä"}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"ÿπÿØÿØ ÿßŸÑÿ£ÿ≥ÿ¶ŸÑÿ©"}),e.jsx("input",{type:"number",min:"1",max:"50",value:i.num_questions,onChange:a=>m({...i,num_questions:parseInt(a.target.value)}),className:"w-full px-4 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-blue-500 dark:bg-gray-700 dark:text-white"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"ŸÖÿ≥ÿ™ŸàŸâ ÿßŸÑÿµÿπŸàÿ®ÿ©"}),e.jsxs("select",{value:i.difficulty,onChange:a=>m({...i,difficulty:a.target.value}),className:"w-full px-4 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-blue-500 dark:bg-gray-700 dark:text-white",children:[e.jsx("option",{value:"easy",children:"ÿ≥ŸáŸÑ"}),e.jsx("option",{value:"medium",children:"ŸÖÿ™Ÿàÿ≥ÿ∑"}),e.jsx("option",{value:"hard",children:"ÿµÿπÿ®"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"ŸÑÿ∫ÿ© ÿßŸÑÿ£ÿ≥ÿ¶ŸÑÿ©"}),e.jsxs("select",{value:i.language,onChange:a=>m({...i,language:a.target.value}),className:"w-full px-4 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-blue-500 dark:bg-gray-700 dark:text-white",children:[e.jsx("option",{value:"ar",children:"ÿßŸÑÿπÿ±ÿ®Ÿäÿ©"}),e.jsx("option",{value:"en",children:"English"}),e.jsx("option",{value:"fr",children:"Fran√ßais"}),e.jsx("option",{value:"de",children:"Deutsch"}),e.jsx("option",{value:"es",children:"Espa√±ol"}),e.jsx("option",{value:"tr",children:"T√ºrk√ße"}),e.jsx("option",{value:"ur",children:"ÿßÿ±ÿØŸà"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"ÿßŸÑŸÖÿØÿ© (ÿØŸÇŸäŸÇÿ©)"}),e.jsx("input",{type:"number",min:"5",max:"180",value:i.duration,onChange:a=>m({...i,duration:parseInt(a.target.value)}),className:"w-full px-4 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-blue-500 dark:bg-gray-700 dark:text-white"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"ÿØÿ±ÿ¨ÿ© ÿßŸÑŸÜÿ¨ÿßÿ≠ (%)"}),e.jsx("input",{type:"number",min:"0",max:"100",value:i.passing_score,onChange:a=>m({...i,passing_score:parseInt(a.target.value)}),className:"w-full px-4 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-blue-500 dark:bg-gray-700 dark:text-white"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"ÿßŸÑÿ≠ÿØ ÿßŸÑÿ£ŸÇÿµŸâ ŸÑŸÑŸÖÿ≠ÿßŸàŸÑÿßÿ™"}),e.jsx("input",{type:"number",min:"1",max:"10",value:i.max_attempts,onChange:a=>m({...i,max_attempts:parseInt(a.target.value)}),className:"w-full px-4 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-blue-500 dark:bg-gray-700 dark:text-white"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"ÿ£ŸÜŸàÿßÿπ ÿßŸÑÿ£ÿ≥ÿ¶ŸÑÿ©"}),e.jsx("div",{className:"space-y-2",children:[{value:"multiple_choice",label:"ÿßÿÆÿ™Ÿäÿßÿ± ŸÖŸÜ ŸÖÿ™ÿπÿØÿØ"},{value:"true_false",label:"ÿµÿ≠ ÿ£Ÿà ÿÆÿ∑ÿ£"},{value:"fill_blank",label:"ÿ•ŸÉŸÖÿßŸÑ ÿßŸÑŸÅÿ±ÿßÿ∫"},{value:"short_answer",label:"ÿ•ÿ¨ÿßÿ®ÿ© ŸÇÿµŸäÿ±ÿ©"}].map(a=>e.jsxs("label",{className:"flex items-center gap-2",children:[e.jsx("input",{type:"checkbox",checked:i.question_types.includes(a.value),onChange:$=>{$.target.checked?m({...i,question_types:[...i.question_types,a.value]}):m({...i,question_types:i.question_types.filter(b=>b!==a.value)})},className:"w-4 h-4 text-blue-600"}),e.jsx("span",{className:"text-gray-700 dark:text-gray-300",children:a.label})]},a.value))})]})]}),e.jsxs("div",{className:"flex gap-3 mt-6",children:[e.jsx("button",{onClick:k,disabled:_||i.question_types.length===0,className:"flex-1 flex items-center justify-center gap-2 px-6 py-3 bg-gradient-to-r from-purple-600 to-blue-600 text-white rounded-lg hover:from-purple-700 hover:to-blue-700 disabled:opacity-50 disabled:cursor-not-allowed transition",children:_?e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"animate-spin rounded-full h-5 w-5 border-b-2 border-white"}),"ÿ¨ÿßÿ±Ÿä ÿßŸÑÿ•ŸÜÿ¥ÿßÿ°..."]}):e.jsxs(e.Fragment,{children:[e.jsx(ge,{className:"w-5 h-5"}),"ÿ•ŸÜÿ¥ÿßÿ° ÿ®ÿßŸÑÿ∞ŸÉÿßÿ° ÿßŸÑÿßÿµÿ∑ŸÜÿßÿπŸä"]})}),e.jsx("button",{onClick:()=>S(!1),disabled:_,className:"px-6 py-3 border-2 border-gray-300 dark:border-gray-600 text-gray-700 dark:text-gray-300 rounded-lg hover:border-gray-400 disabled:opacity-50 transition",children:"ÿ•ŸÑÿ∫ÿßÿ°"})]}),e.jsx("div",{className:"mt-4 p-4 bg-blue-50 dark:bg-blue-900/20 border border-blue-200 dark:border-blue-800 rounded-lg",children:e.jsx("p",{className:"text-sm text-blue-800 dark:text-blue-200",children:"üí° ÿ≥Ÿäÿ™ŸÖ ÿßÿ≥ÿ™ÿÆÿØÿßŸÖ ÿßŸÑÿ∞ŸÉÿßÿ° ÿßŸÑÿßÿµÿ∑ŸÜÿßÿπŸä Gemini ŸÑÿ™ŸàŸÑŸäÿØ ÿ£ÿ≥ÿ¶ŸÑÿ© ÿ∞ŸÉŸäÿ© ÿ®ŸÜÿßÿ°Ÿã ÿπŸÑŸâ ŸÖÿ≠ÿ™ŸàŸâ ÿßŸÑÿØÿ±ÿ≥"})})]})})]})};function Oe(){var b;const{darkMode:s}=X(),{id:d}=Ne(),x=me(),[l,g]=r.useState(null),[u,C]=r.useState(null),[_,h]=r.useState(!0),[N,S]=r.useState(null),[i,m]=r.useState("view"),[R,k]=r.useState(!1),V=r.useRef(!1);r.useEffect(()=>{v()},[d]);const v=async()=>{var f,L,z,c,y;if(console.log("üìö [LessonMedia] Fetching lesson:",d),V.current){console.log("‚è≠Ô∏è [LessonMedia] Already fetching, skipping");return}V.current=!0;try{h(!0),S(null),console.log("üì• [LessonMedia] Fetching lesson data...");const p=await B.get(`/lessons/${d}`),P=p.data.data||p.data;console.log("‚úÖ [LessonMedia] Lesson data loaded:",P),g(P);try{console.log("üì• [LessonMedia] Fetching video data...");const j=(await B.get(`/lessons/${d}/video`)).data.data;console.log("‚úÖ [LessonMedia] Video data loaded:",{has_video:!!j,proxy_video_url:j==null?void 0:j.proxy_video_url,video_url:j==null?void 0:j.video_url,mime_type:j==null?void 0:j.mime_type,subtitles_count:((f=j==null?void 0:j.subtitles)==null?void 0:f.length)||0,subtitles:j==null?void 0:j.subtitles}),C(j)}catch(G){((L=G.response)==null?void 0:L.status)===404?(console.log("‚ÑπÔ∏è [LessonMedia] No video found (404), switching to upload tab"),C(null),m("upload")):(console.warn("‚ö†Ô∏è [LessonMedia] Failed to load video:",G),C(null))}}catch(p){console.error("‚ùå [LessonMedia] Error loading lesson:",p);const P=(z=p.response)==null?void 0:z.status,G=((y=(c=p.response)==null?void 0:c.data)==null?void 0:y.message)||"ŸÅÿ¥ŸÑ ÿ™ÿ≠ŸÖŸäŸÑ ÿ®ŸäÿßŸÜÿßÿ™ ÿßŸÑÿØÿ±ÿ≥";S(P===404?"ÿßŸÑÿØÿ±ÿ≥ ÿ∫Ÿäÿ± ŸÖŸàÿ¨ŸàÿØ ÿ£Ÿà ŸÑŸäÿ≥ ŸÑÿØŸäŸÉ ÿµŸÑÿßÿ≠Ÿäÿ© ÿßŸÑŸàÿµŸàŸÑ ÿ•ŸÑŸäŸá":P===403?"ŸÑŸäÿ≥ ŸÑÿØŸäŸÉ ÿµŸÑÿßÿ≠Ÿäÿ© ŸÑŸÑŸàÿµŸàŸÑ ÿ•ŸÑŸâ Ÿáÿ∞ÿß ÿßŸÑÿØÿ±ÿ≥":G)}finally{h(!1),V.current=!1}},W=f=>{C(f),f&&i==="upload"&&m("view")},T=(f,L=null)=>{L?C(z=>({...z,subtitles:z.subtitles.filter(c=>c.id!==L)})):f&&C(z=>{var y;const c=(y=z.subtitles)==null?void 0:y.findIndex(p=>p.id===f.id);if(c!==-1){const p=[...z.subtitles];return p[c]=f,{...z,subtitles:p}}else return{...z,subtitles:[...z.subtitles||[],f]}})},a=()=>{k(!0),setTimeout(()=>{const f=document.getElementById("ai-generator-section");f&&f.scrollIntoView({behavior:"smooth",block:"center"}),k(!1)},100)},$=f=>{g(L=>({...L,summary:f}))};return _?e.jsx(ue,{}):N?e.jsx("div",{className:`min-h-screen transition-colors duration-300 ${s?"bg-gray-900":"bg-gray-50"}`,children:e.jsx("div",{className:"container mx-auto px-4 py-8",children:e.jsx("div",{className:`border rounded-lg p-4 ${s?"bg-red-900/30 border-red-800 text-red-300":"bg-red-50 border-red-200 text-red-700"}`,children:N})})}):l?e.jsx("div",{className:`min-h-screen transition-colors duration-300 ${s?"bg-gray-900":"bg-gray-50"}`,children:e.jsxs("div",{className:"container mx-auto px-4 py-8",children:[e.jsxs("div",{className:"mb-6",children:[e.jsxs("button",{onClick:()=>x(-1),className:`mb-4 flex items-center gap-2 transition-colors ${s?"text-blue-400 hover:text-blue-300":"text-blue-500 hover:text-blue-700"}`,children:[e.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 19l-7-7 7-7"})}),"ÿ±ÿ¨Ÿàÿπ"]}),e.jsx("h1",{className:`text-3xl font-bold ${s?"text-gray-100":"text-gray-900"}`,children:l.name}),l.description&&e.jsx("p",{className:`mt-2 ${s?"text-gray-400":"text-gray-600"}`,children:l.description})]}),e.jsx("div",{className:`mb-6 border-b ${s?"border-gray-700":"border-gray-200"}`,children:e.jsxs("nav",{className:"flex gap-4",children:[e.jsx("button",{onClick:()=>m("view"),className:`pb-2 px-1 border-b-2 font-medium transition-colors ${i==="view"?s?"border-blue-400 text-blue-400":"border-blue-500 text-blue-600":s?"border-transparent text-gray-400 hover:text-gray-300":"border-transparent text-gray-500 hover:text-gray-700"}`,children:"ŸÖÿ¥ÿßŸáÿØÿ© ÿßŸÑÿØÿ±ÿ≥"}),e.jsx("button",{onClick:()=>m("upload"),className:`pb-2 px-1 border-b-2 font-medium transition-colors ${i==="upload"?s?"border-blue-400 text-blue-400":"border-blue-500 text-blue-600":s?"border-transparent text-gray-400 hover:text-gray-300":"border-transparent text-gray-500 hover:text-gray-700"}`,children:"ÿ•ÿØÿßÿ±ÿ© ÿßŸÑŸàÿ≥ÿßÿ¶ÿ∑"}),e.jsx("button",{onClick:()=>m("summary"),className:`pb-2 px-1 border-b-2 font-medium transition-colors ${i==="summary"?s?"border-blue-400 text-blue-400":"border-blue-500 text-blue-600":s?"border-transparent text-gray-400 hover:text-gray-300":"border-transparent text-gray-500 hover:text-gray-700"}`,children:"ÿßŸÑŸÖŸÑÿÆÿµ"}),e.jsx("button",{onClick:()=>m("quiz"),className:`pb-2 px-1 border-b-2 font-medium transition-colors ${i==="quiz"?s?"border-blue-400 text-blue-400":"border-blue-500 text-blue-600":s?"border-transparent text-gray-400 hover:text-gray-300":"border-transparent text-gray-500 hover:text-gray-700"}`,children:"ÿßŸÑÿßÿÆÿ™ÿ®ÿßÿ±ÿßÿ™"})]})}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[e.jsxs("div",{className:"lg:col-span-2",children:[i==="view"&&e.jsx("div",{className:"space-y-6",children:u?e.jsx(ze,{video:u,darkMode:s}):e.jsxs("div",{className:`text-center py-16 rounded-lg shadow transition-colors duration-300 ${s?"bg-gray-800":"bg-white"}`,children:[e.jsx("svg",{className:`mx-auto h-16 w-16 ${s?"text-gray-600":"text-gray-400"}`,fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.5,d:"M15 10l4.553-2.276A1 1 0 0121 8.618v6.764a1 1 0 01-1.447.894L15 14M5 18h8a2 2 0 002-2V8a2 2 0 00-2-2H5a2 2 0 00-2 2v8a2 2 0 002 2z"})}),e.jsx("h3",{className:`mt-4 text-lg font-medium ${s?"text-gray-300":"text-gray-900"}`,children:"ŸÑÿß ŸäŸàÿ¨ÿØ ŸÅŸäÿØŸäŸà"}),e.jsx("p",{className:`mt-2 text-sm ${s?"text-gray-400":"text-gray-500"}`,children:"ÿßÿ®ÿØÿ£ ÿ®ÿ±ŸÅÿπ ŸÅŸäÿØŸäŸà ŸÑŸáÿ∞ÿß ÿßŸÑÿØÿ±ÿ≥ ŸÑŸÑÿßÿ≥ÿ™ŸÅÿßÿØÿ© ŸÖŸÜ ŸÉÿßŸÅÿ© ÿßŸÑŸÖŸäÿ≤ÿßÿ™"}),e.jsxs("button",{onClick:()=>m("upload"),className:"mt-6 inline-flex items-center gap-2 px-6 py-3 bg-blue-500 text-white rounded-lg hover:bg-blue-600 transition-colors shadow-sm",children:[e.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M7 16a4 4 0 01-.88-7.903A5 5 0 1115.9 6L16 6a5 5 0 011 9.9M15 13l-3-3m0 0l-3 3m3-3v12"})}),"ÿ±ŸÅÿπ ŸÅŸäÿØŸäŸà ÿßŸÑÿ¢ŸÜ"]})]})}),i==="upload"&&e.jsxs("div",{className:"space-y-6",children:[e.jsx("div",{className:`rounded-lg shadow p-6 transition-colors duration-300 ${s?"bg-gray-800":"bg-white"}`,children:e.jsx(ke,{lessonId:d,existingVideo:u,onUploadSuccess:W})}),e.jsx("div",{id:"ai-generator-section",className:`rounded-lg shadow p-6 transition-all ${s?"bg-gray-800":"bg-white"} ${R?s?"ring-4 ring-purple-500":"ring-4 ring-purple-300":""}`,children:e.jsx(Te,{lessonId:d,video:u,onSuccess:T})}),e.jsx("div",{className:`rounded-lg shadow p-6 transition-colors duration-300 ${s?"bg-gray-800":"bg-white"}`,children:e.jsx(Re,{lessonId:d,video:u,onUploadSuccess:T,onOpenAIGenerator:a})})]}),i==="summary"&&e.jsx("div",{className:`rounded-lg shadow p-6 transition-colors duration-300 ${s?"bg-gray-800":"bg-white"}`,children:e.jsx(Pe,{lessonId:d,initialSummary:l.summary,onUpdate:$,video:u})}),i==="quiz"&&e.jsx("div",{className:`rounded-lg shadow p-6 transition-colors duration-300 ${s?"bg-gray-800":"bg-white"}`,children:e.jsx(Ae,{lessonId:d,isInstructor:!0})})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:`rounded-lg shadow p-6 transition-colors duration-300 ${s?"bg-gray-800":"bg-white"}`,children:[e.jsx("h3",{className:`font-semibold mb-4 ${s?"text-gray-100":"text-gray-900"}`,children:"ŸÖÿπŸÑŸàŸÖÿßÿ™ ÿßŸÑÿØÿ±ÿ≥"}),e.jsxs("dl",{className:"space-y-2 text-sm",children:[l.duration&&e.jsxs("div",{children:[e.jsx("dt",{className:`${s?"text-gray-400":"text-gray-600"}`,children:"ÿßŸÑŸÖÿØÿ©"}),e.jsx("dd",{className:`font-medium ${s?"text-gray-200":"text-gray-900"}`,children:l.duration})]}),l.type&&e.jsxs("div",{children:[e.jsx("dt",{className:`${s?"text-gray-400":"text-gray-600"}`,children:"ÿßŸÑŸÜŸàÿπ"}),e.jsx("dd",{className:`font-medium ${s?"text-gray-200":"text-gray-900"}`,children:l.type})]}),e.jsxs("div",{children:[e.jsx("dt",{className:`${s?"text-gray-400":"text-gray-600"}`,children:"ÿßŸÑÿ≠ÿßŸÑÿ©"}),e.jsx("dd",{children:e.jsx("span",{className:`inline-block px-2 py-1 text-xs rounded ${l.completed?"bg-green-100 text-green-800":"bg-yellow-100 text-yellow-800"}`,children:l.completed?"ŸÖŸÉÿ™ŸÖŸÑ":"ÿ∫Ÿäÿ± ŸÖŸÉÿ™ŸÖŸÑ"})})]})]})]}),e.jsxs("div",{className:`rounded-lg shadow p-6 transition-colors duration-300 ${s?"bg-gray-800":"bg-white"}`,children:[e.jsx("h3",{className:`font-semibold mb-4 ${s?"text-gray-100":"text-gray-900"}`,children:"ÿ≠ÿßŸÑÿ© ÿßŸÑŸàÿ≥ÿßÿ¶ÿ∑"}),e.jsxs("div",{className:"space-y-3 text-sm",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:s?"text-gray-400":"text-gray-600",children:"ÿßŸÑŸÅŸäÿØŸäŸà"}),e.jsx("span",{className:`flex items-center gap-1 ${u?"text-green-600":"text-gray-400"}`,children:u?e.jsxs(e.Fragment,{children:[e.jsx("svg",{className:"w-4 h-4",fill:"currentColor",viewBox:"0 0 20 20",children:e.jsx("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zm3.707-9.293a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z",clipRule:"evenodd"})}),"ŸÖŸàÿ¨ŸàÿØ"]}):"ÿ∫Ÿäÿ± ŸÖŸàÿ¨ŸàÿØ"})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:s?"text-gray-400":"text-gray-600",children:"ÿßŸÑÿ™ÿ±ÿ¨ŸÖÿßÿ™"}),e.jsx("span",{className:`font-medium ${s?"text-gray-200":"text-gray-900"}`,children:((b=u==null?void 0:u.subtitles)==null?void 0:b.length)||0})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:s?"text-gray-400":"text-gray-600",children:"ÿßŸÑŸÖŸÑÿÆÿµ"}),e.jsx("span",{className:`flex items-center gap-1 ${l.summary?"text-green-600":"text-gray-400"}`,children:l.summary?e.jsxs(e.Fragment,{children:[e.jsx("svg",{className:"w-4 h-4",fill:"currentColor",viewBox:"0 0 20 20",children:e.jsx("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zm3.707-9.293a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z",clipRule:"evenodd"})}),"ŸÖŸàÿ¨ŸàÿØ"]}):"ÿ∫Ÿäÿ± ŸÖŸàÿ¨ŸàÿØ"})]})]})]}),e.jsxs("div",{className:`rounded-lg shadow p-6 transition-colors duration-300 ${s?"bg-gray-800":"bg-white"}`,children:[e.jsx("h3",{className:`font-semibold mb-4 ${s?"text-gray-100":"text-gray-900"}`,children:"ÿ•ÿ¨ÿ±ÿßÿ°ÿßÿ™ ÿ≥ÿ±Ÿäÿπÿ©"}),e.jsxs("div",{className:"space-y-2",children:[!u&&e.jsx("button",{onClick:()=>m("upload"),className:"w-full px-4 py-2 bg-blue-500 text-white rounded hover:bg-blue-600 text-sm",children:"ÿ±ŸÅÿπ ŸÅŸäÿØŸäŸà"}),u&&(!u.subtitles||u.subtitles.length===0)&&e.jsx("button",{onClick:()=>m("upload"),className:"w-full px-4 py-2 bg-green-500 text-white rounded hover:bg-green-600 text-sm",children:"ÿ•ÿ∂ÿßŸÅÿ© ÿ™ÿ±ÿ¨ŸÖÿ©"}),!l.summary&&e.jsx("button",{onClick:()=>m("summary"),className:"w-full px-4 py-2 bg-purple-500 text-white rounded hover:bg-purple-600 text-sm",children:"ÿ•ÿ∂ÿßŸÅÿ© ŸÖŸÑÿÆÿµ"}),l.link&&e.jsx("a",{href:l.link,target:"_blank",rel:"noopener noreferrer",className:`w-full block text-center px-4 py-2 rounded text-sm transition-colors ${s?"bg-gray-700 text-gray-300 hover:bg-gray-600":"bg-gray-200 text-gray-800 hover:bg-gray-300"}`,children:"ŸÅÿ™ÿ≠ ÿ±ÿßÿ®ÿ∑ ÿßŸÑÿØÿ±ÿ≥"})]})]})]})]})]})}):e.jsx(ue,{})}export{Oe as default};
