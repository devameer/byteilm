import{j as e}from"./charts-8gUIbWxc.js";import{i as w,c as $,b as a}from"./vendor-125d4HLq.js";import{u as k,a as S}from"./index-DB2kzkDV.js";import{t as T}from"./teamService-DJa2JcoB.js";import{B as c}from"./Button-Ce8BwJif.js";const J=()=>{var u,g;const{darkMode:t}=k(),{token:n}=w(),r=$(),{user:d,loading:o}=S(),[b,x]=a.useState(!0),[m,l]=a.useState(null),[j,y]=a.useState(!1),[i,p]=a.useState(null);a.useEffect(()=>{o||(d?N():r(`/login?redirect=/teams/join/${n}`))},[o,d,n]);const N=async()=>{var f,h;x(!0),l(null);try{const s=await T.acceptInvitation(n);s.success?(y(!0),p(s.data),setTimeout(()=>{r("/teams")},3e3)):l(s.message||"فشل الانضمام إلى الفريق")}catch(s){const v=((h=(f=s.response)==null?void 0:f.data)==null?void 0:h.message)||"حدث خطأ أثناء الانضمام إلى الفريق";l(v)}finally{x(!1)}};return o||b?e.jsx("div",{className:`min-h-screen flex items-center justify-center p-6 transition-colors duration-300 ${t?"bg-gradient-to-br from-gray-900 via-gray-800 to-gray-900":"bg-gradient-to-br from-gray-50 via-blue-50/30 to-indigo-50/30"}`,dir:"rtl",children:e.jsxs("div",{className:`rounded-2xl shadow-2xl p-8 max-w-md w-full text-center transition-colors duration-300 ${t?"bg-gray-800":"bg-white"}`,children:[e.jsx("div",{className:"w-20 h-20 mx-auto mb-6 rounded-full bg-gradient-to-br from-indigo-500 to-purple-600 flex items-center justify-center animate-pulse",children:e.jsx("i",{className:"fas fa-spinner fa-spin text-white text-3xl"})}),e.jsx("h2",{className:`text-2xl font-black mb-2 ${t?"text-gray-100":"text-slate-800"}`,children:"جاري المعالجة..."}),e.jsx("p",{className:t?"text-gray-400":"text-slate-600",children:"يرجى الانتظار قليلاً"})]})}):j&&i?e.jsx("div",{className:`min-h-screen flex items-center justify-center p-6 transition-colors duration-300 ${t?"bg-gradient-to-br from-gray-900 via-gray-800 to-gray-900":"bg-gradient-to-br from-gray-50 via-blue-50/30 to-indigo-50/30"}`,dir:"rtl",children:e.jsxs("div",{className:`rounded-2xl shadow-2xl p-8 max-w-md w-full text-center transition-colors duration-300 ${t?"bg-gray-800":"bg-white"}`,children:[e.jsx("div",{className:"w-20 h-20 mx-auto mb-6 rounded-full bg-gradient-to-br from-green-500 to-green-600 flex items-center justify-center",children:e.jsx("i",{className:"fas fa-check text-white text-4xl"})}),e.jsx("h2",{className:`text-2xl font-black mb-2 transition-colors duration-300 ${t?"text-gray-100":"text-slate-800"}`,children:"مرحباً بك في الفريق!"}),e.jsx("p",{className:`mb-6 transition-colors duration-300 ${t?"text-gray-400":"text-slate-600"}`,children:"تم انضمامك بنجاح إلى فريق"}),e.jsxs("div",{className:`bg-gradient-to-r rounded-xl p-6 mb-6 border-2 transition-colors duration-300 ${t?"from-indigo-900/30 to-blue-900/30 border-indigo-700":"from-indigo-50 to-blue-50 border-indigo-200"}`,children:[e.jsxs("div",{className:"flex items-center justify-center gap-3 mb-3",children:[e.jsx("div",{className:"w-12 h-12 rounded-full bg-indigo-500 flex items-center justify-center",children:e.jsx("i",{className:"fas fa-users text-white text-xl"})}),e.jsx("h3",{className:`text-xl font-black transition-colors duration-300 ${t?"text-gray-100":"text-slate-800"}`,children:((u=i.team)==null?void 0:u.name)||"الفريق"})]}),((g=i.team)==null?void 0:g.description)&&e.jsx("p",{className:`text-sm transition-colors duration-300 ${t?"text-gray-400":"text-slate-600"}`,children:i.team.description})]}),e.jsxs("div",{className:"space-y-3",children:[e.jsx(c,{type:"button",variant:"primary",fullWidth:!0,onClick:()=>r("/teams"),icon:"fa-arrow-left",children:"الانتقال إلى صفحة الفرق"}),e.jsx("p",{className:`text-xs transition-colors duration-300 ${t?"text-gray-500":"text-slate-400"}`,children:"سيتم تحويلك تلقائياً خلال 3 ثوانٍ..."})]})]})}):m?e.jsx("div",{className:`min-h-screen flex items-center justify-center p-6 transition-colors duration-300 ${t?"bg-gradient-to-br from-gray-900 via-gray-800 to-gray-900":"bg-gradient-to-br from-gray-50 via-blue-50/30 to-indigo-50/30"}`,dir:"rtl",children:e.jsxs("div",{className:`rounded-2xl shadow-2xl p-8 max-w-md w-full text-center transition-colors duration-300 ${t?"bg-gray-800":"bg-white"}`,children:[e.jsx("div",{className:"w-20 h-20 mx-auto mb-6 rounded-full bg-gradient-to-br from-red-500 to-red-600 flex items-center justify-center",children:e.jsx("i",{className:"fas fa-exclamation-triangle text-white text-4xl"})}),e.jsx("h2",{className:`text-2xl font-black mb-2 transition-colors duration-300 ${t?"text-gray-100":"text-slate-800"}`,children:"حدث خطأ"}),e.jsx("p",{className:`mb-6 transition-colors duration-300 ${t?"text-gray-400":"text-slate-600"}`,children:m}),e.jsxs("div",{className:`border-2 rounded-xl p-4 mb-6 transition-colors duration-300 ${t?"bg-red-900/30 border-red-800":"bg-red-50 border-red-200"}`,children:[e.jsx("p",{className:`text-sm font-semibold mb-2 transition-colors duration-300 ${t?"text-red-300":"text-red-700"}`,children:"الأسباب المحتملة:"}),e.jsxs("ul",{className:`text-xs text-right space-y-1 transition-colors duration-300 ${t?"text-red-400":"text-red-600"}`,children:[e.jsx("li",{children:"• الرابط منتهي الصلاحية"}),e.jsx("li",{children:"• الرابط تم استخدامه بالكامل"}),e.jsx("li",{children:"• الرابط تم إلغاؤه من قبل مدير الفريق"}),e.jsx("li",{children:"• أنت بالفعل عضو في هذا الفريق"})]})]}),e.jsxs("div",{className:"space-y-3",children:[e.jsx(c,{type:"button",variant:"primary",fullWidth:!0,onClick:()=>r("/teams"),icon:"fa-arrow-left",children:"الانتقال إلى صفحة الفرق"}),e.jsx(c,{type:"button",variant:"secondary",fullWidth:!0,onClick:()=>r("/dashboard"),icon:"fa-home",children:"العودة إلى لوحة التحكم"})]})]})}):null};export{J as default};
