import{j as e}from"./charts-VrJjKkAO.js";import{r as a}from"./vendor-xoa7E_IC.js";import{b as d,u as C,F as f}from"./index-DX6VYCbL.js";import{F as j}from"./ArrowPathIcon-CglTX8eZ.js";function k({title:t,titleId:s,...l},n){return a.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:n,"aria-labelledby":s},l),t?a.createElement("title",{id:s},t):null,a.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M20.25 6.375c0 2.278-3.694 4.125-8.25 4.125S3.75 8.653 3.75 6.375m16.5 0c0-2.278-3.694-4.125-8.25-4.125S3.75 4.097 3.75 6.375m16.5 0v11.25c0 2.278-3.694 4.125-8.25 4.125s-8.25-1.847-8.25-4.125V6.375m16.5 0v3.75m-16.5-3.75v3.75m16.5 0v3.75C20.25 16.153 16.556 18 12 18s-8.25-1.847-8.25-4.125v-3.75m16.5 0c0 2.278-3.694 4.125-8.25 4.125s-8.25-1.847-8.25-4.125"}))}const E=a.forwardRef(k);function L({title:t,titleId:s,...l},n){return a.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:n,"aria-labelledby":s},l),t?a.createElement("title",{id:s},t):null,a.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"m6.75 7.5 3 2.25-3 2.25m4.5 0h3m-9 8.25h13.5A2.25 2.25 0 0 0 21 18V6a2.25 2.25 0 0 0-2.25-2.25H5.25A2.25 2.25 0 0 0 3 6v12a2.25 2.25 0 0 0 2.25 2.25Z"}))}const v=a.forwardRef(L),c={async pullLatest(){return(await d.post("/git/pull")).data},async composerInstall(){return(await d.post("/git/composer-install")).data},async migrate(){return(await d.post("/git/migrate")).data},async migrateFresh(){return(await d.post("/git/migrate-fresh")).data}};function B(){const{darkMode:t}=C(),[s,l]=a.useState(""),[n,h]=a.useState(""),[g,m]=a.useState(""),[N,x]=a.useState(null),i=async(r,y)=>{var u,p;l(r),m(""),h(""),x(null);try{const o=await y();if(o.success){const b=[];o.output&&b.push(`Output:
${o.output}`),o.error&&b.push(`Error output:
${o.error}`),h(b.join(`

`))}else m(o.message||"حدث خطأ أثناء تنفيذ الأمر")}catch(o){m(((p=(u=o.response)==null?void 0:u.data)==null?void 0:p.message)||"تعذر تنفيذ الأمر")}finally{l("")}},$=[{id:"pull",label:"جلب آخر التغييرات",command:"git pull",action:()=>i("pull",c.pullLatest),icon:j,color:"blue",warning:null},{id:"composer",label:"تثبيت الاعتماديات",command:"composer install",action:()=>i("composer",c.composerInstall),icon:v,color:"green",warning:"سيتم تثبيت جميع اعتماديات PHP. قد يستغرق عدة دقائق."},{id:"migrate",label:"تشغيل الترحيلات",command:"php artisan migrate",action:()=>i("migrate",c.migrate),icon:E,color:"yellow",warning:"سيتم تطبيق جميع الترحيلات الجديدة على قاعدة البيانات."},{id:"fresh",label:"إعادة إنشاء قاعدة البيانات",command:"php artisan migrate:fresh --seed",action:()=>i("fresh",c.migrateFresh),icon:f,color:"red",warning:"⚠️ تحذير خطير! سيتم حذف جميع البيانات وإعادة إنشاء قاعدة البيانات من الصفر. هذا الإجراء لا يمكن التراجع عنه!"}],w=(r,y)=>`flex items-center gap-2 px-4 py-3 rounded-lg transition-all duration-200 font-medium disabled:opacity-50 disabled:cursor-not-allowed ${{blue:"bg-blue-600 hover:bg-blue-700 text-white",green:"bg-green-600 hover:bg-green-700 text-white",yellow:"bg-yellow-600 hover:bg-yellow-700 text-white",red:"bg-red-600 hover:bg-red-700 text-white"}[r]}`;return e.jsx("div",{className:`min-h-screen transition-colors duration-300 ${t?"bg-gray-900":"bg-gray-50"}`,children:e.jsxs("div",{className:"max-w-7xl mx-auto px-4 py-6 space-y-6",children:[e.jsxs("div",{children:[e.jsx("h1",{className:`text-3xl font-bold ${t?"text-gray-100":"text-gray-900"}`,children:"أدوات Git والأوامر"}),e.jsx("p",{className:`mt-1 ${t?"text-gray-400":"text-gray-600"}`,children:"تنفيذ عمليات Git والأوامر الشائعة مباشرة من الواجهة"})]}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:$.map(r=>e.jsxs("div",{className:`p-5 rounded-xl border ${t?"bg-gray-800 border-gray-700":"bg-white border-gray-200"}`,children:[e.jsx("div",{className:"flex items-start justify-between mb-3",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:`p-2 rounded-lg ${r.color==="red"?"bg-red-100 text-red-600":r.color==="yellow"?"bg-yellow-100 text-yellow-600":r.color==="green"?"bg-green-100 text-green-600":"bg-blue-100 text-blue-600"}`,children:e.jsx(r.icon,{className:"w-5 h-5"})}),e.jsxs("div",{children:[e.jsx("h3",{className:`font-semibold ${t?"text-gray-200":"text-gray-800"}`,children:r.label}),e.jsx("code",{className:"text-xs text-gray-500",children:r.command})]})]})}),r.warning&&e.jsx("div",{className:`mb-3 p-3 rounded-lg text-sm ${r.color==="red"?t?"bg-red-900/30 text-red-300 border border-red-800":"bg-red-50 text-red-700 border border-red-200":t?"bg-yellow-900/30 text-yellow-300 border border-yellow-800":"bg-yellow-50 text-yellow-700 border border-yellow-200"}`,children:r.warning}),N===r.id?e.jsxs("div",{className:"flex gap-2",children:[e.jsx("button",{onClick:r.action,disabled:s,className:w(r.color,s===r.id),children:s===r.id?"جاري التنفيذ...":"تأكيد التنفيذ"}),e.jsx("button",{onClick:()=>x(null),className:`px-4 py-3 rounded-lg font-medium ${t?"bg-gray-700 text-gray-300 hover:bg-gray-600":"bg-gray-200 text-gray-700 hover:bg-gray-300"}`,children:"إلغاء"})]}):e.jsxs("button",{onClick:()=>r.warning?x(r.id):r.action(),disabled:s,className:w(r.color,s===r.id),children:[s===r.id&&e.jsx(j,{className:"w-4 h-4 animate-spin"}),s===r.id?"جاري التنفيذ...":"تنفيذ"]})]},r.id))}),g&&e.jsxs("div",{className:`p-4 border rounded-lg whitespace-pre-wrap ${t?"bg-red-900/30 border-red-800 text-red-300":"bg-red-100 border-red-200 text-red-700"}`,children:[e.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[e.jsx(f,{className:"w-5 h-5"}),e.jsx("span",{className:"font-medium",children:"خطأ"})]}),g]}),n&&e.jsxs("div",{className:"space-y-2",children:[e.jsx("h3",{className:`font-medium ${t?"text-gray-300":"text-gray-700"}`,children:"نتائج التنفيذ:"}),e.jsx("div",{className:"bg-black text-green-200 rounded-lg shadow p-4 whitespace-pre-wrap overflow-x-auto text-sm font-mono",children:n})]}),!n&&!g&&!s&&e.jsxs("div",{className:`rounded-lg shadow p-8 text-center ${t?"bg-gray-800 text-gray-500":"bg-white text-gray-500"}`,children:[e.jsx(v,{className:"w-12 h-12 mx-auto mb-3 opacity-50"}),e.jsx("p",{children:"اختر أحد الأوامر أعلاه لتنفيذه وعرض النتائج هنا."})]})]})})}export{B as default};
