import{j as e}from"./charts-VrJjKkAO.js";import{i as J,r as d,L as F}from"./vendor-xoa7E_IC.js";import{t as S}from"./taskService-5qNZ7o1f.js";import{u as V,c as W}from"./index-DX6VYCbL.js";import{l as X}from"./lessonService-CkMKXeqy.js";import{M as O}from"./Modal-WCD_DT19.js";import{S as Y}from"./SearchableSelect-BIM90EDV.js";import"./apiHelpers-CkzhrEqp.js";const ne=()=>{const{projectId:p}=J(),{darkMode:t,toggleDarkMode:Z}=V(),[n,u]=d.useState([]),[N,T]=d.useState(!0),[D,h]=d.useState(null),[f,Q]=d.useState(""),[w,B]=d.useState("all"),[ee,L]=d.useState(null),[l,q]=d.useState(null),[E,j]=d.useState(!1),[v,b]=d.useState(!1),[A,$]=d.useState("pending"),[o,c]=d.useState({title:"",description:"",priority:"medium",due_date:"",source_type:"none",course_id:"",lesson_id:""}),[K,y]=d.useState({courses:[],lessons:[]}),M=[{id:"pending",title:"Ù‚ÙŠØ¯ Ø§Ù„Ø§Ù†ØªØ¸Ø§Ø±",color:t?"bg-gradient-to-br from-gray-800 to-gray-900":"bg-gradient-to-br from-gray-100 to-gray-200",headerColor:t?"bg-gradient-to-r from-gray-700 to-gray-800":"bg-gradient-to-r from-gray-500 to-gray-600",icon:"â³",accentColor:t?"border-gray-600":"border-gray-400"},{id:"in_progress",title:"Ù‚ÙŠØ¯ Ø§Ù„ØªÙ†ÙÙŠØ°",color:t?"bg-gradient-to-br from-blue-900 to-indigo-950":"bg-gradient-to-br from-blue-50 to-blue-100",headerColor:t?"bg-gradient-to-r from-blue-700 to-indigo-800":"bg-gradient-to-r from-blue-500 to-indigo-600",icon:"ðŸš€",accentColor:t?"border-blue-600":"border-blue-400"},{id:"completed",title:"Ù…ÙƒØªÙ…Ù„",color:t?"bg-gradient-to-br from-green-900 to-emerald-950":"bg-gradient-to-br from-green-50 to-emerald-100",headerColor:t?"bg-gradient-to-r from-green-700 to-emerald-800":"bg-gradient-to-r from-green-500 to-emerald-600",icon:"âœ…",accentColor:t?"border-green-600":"border-green-400"}];d.useEffect(()=>{k()},[p]),d.useEffect(()=>{v&&W.getCourses({active:!0}).then(r=>{const a=r!=null&&r.success?r.data:(r==null?void 0:r.data)??[];y(s=>({...s,courses:a}))}).catch(()=>{y(r=>({...r,courses:[]}))})},[v]),d.useEffect(()=>{o.source_type==="lesson"&&o.course_id?X.getLessons({course_id:o.course_id}).then(r=>{const a=r!=null&&r.success?r.data:(r==null?void 0:r.data)??[];y(s=>({...s,lessons:a}))}).catch(()=>{y(r=>({...r,lessons:[]}))}):(y(r=>({...r,lessons:[]})),o.lesson_id&&c(r=>({...r,lesson_id:""})))},[o.course_id,o.source_type]),d.useEffect(()=>{const r=a=>{var s;(a.ctrlKey||a.metaKey)&&a.key==="k"&&(a.preventDefault(),b(!0)),a.key==="Escape"&&(j(!1),b(!1)),(a.ctrlKey||a.metaKey)&&a.key==="f"&&(a.preventDefault(),(s=document.querySelector('input[type="text"]'))==null||s.focus())};return window.addEventListener("keydown",r),()=>window.removeEventListener("keydown",r)},[]);const k=async()=>{var r,a;try{T(!0),h(null);const s=await S.getTasks(p?{project_id:p}:{});s&&s.success&&Array.isArray(s.data)||s&&Array.isArray(s.data)?u(s.data):Array.isArray(s)?u(s):(console.warn("Unexpected response format:",s),u([]))}catch(s){console.error("Kanban fetch error:",s);const i=((a=(r=s.response)==null?void 0:r.data)==null?void 0:a.message)||s.message||"Ø­Ø¯Ø« Ø®Ø·Ø£ ØºÙŠØ± Ù…ØªÙˆÙ‚Ø¹";h(i),u([])}finally{T(!1)}},z=async(r,a)=>{try{const s=n.findIndex(g=>g.id===r);if(s===-1)return;const i=[...n];i[s]={...i[s],status:a},u(i),await S.updateTask(r,{status:a})}catch(s){h(s.message),k()}},R=r=>n.filter(a=>{const s=a.status===r,i=!f||a.title.toLowerCase().includes(f.toLowerCase())||a.description&&a.description.toLowerCase().includes(f.toLowerCase()),g=w==="all"||a.priority===w;return s&&i&&g}),m=()=>{const r=n.length,a=n.filter(x=>x.status==="completed").length,s=n.filter(x=>x.status==="in_progress").length,i=n.filter(x=>x.status==="pending").length,g=n.filter(x=>x.priority==="urgent").length,H=n.filter(x=>x.priority==="high").length;return{total:r,completed:a,inProgress:s,pending:i,urgent:g,high:H}},U=async()=>{var r,a;if(o.title.trim())try{const s={title:o.title,description:o.description||null,priority:o.priority,due_date:o.due_date||null,status:A,project_id:p||null,source_type:o.source_type,course_id:o.course_id||null,lesson_id:o.lesson_id||null,is_lesson:o.source_type==="lesson"},i=await S.create(s);i&&i.success?(u([...n,i.data]),c({title:"",description:"",priority:"medium",due_date:"",source_type:"none",course_id:"",lesson_id:""}),b(!1)):h((i==null?void 0:i.message)||"ÙØ´Ù„ ÙÙŠ Ø¥Ø¶Ø§ÙØ© Ø§Ù„Ù…Ù‡Ù…Ø©")}catch(s){console.error("Error creating task:",s),h(((a=(r=s.response)==null?void 0:r.data)==null?void 0:a.message)||"ÙØ´Ù„ ÙÙŠ Ø¥Ø¶Ø§ÙØ© Ø§Ù„Ù…Ù‡Ù…Ø©")}},G=r=>{q(r),j(!0)},P=r=>{const a={urgent:"bg-red-100 text-red-800 border-red-300",high:"bg-orange-100 text-orange-800 border-orange-300",medium:"bg-yellow-100 text-yellow-800 border-yellow-300",low:"bg-green-100 text-green-800 border-green-300"};return a[r]||a.medium},I=r=>{const a={urgent:"ðŸ”¥",high:"â¬†ï¸",medium:"âž¡ï¸",low:"â¬‡ï¸"};return a[r]||a.medium},_=()=>e.jsxs("div",{className:"bg-white rounded-lg shadow p-4 mb-4 animate-pulse",children:[e.jsx("div",{className:"h-4 bg-gray-200 rounded w-3/4 mb-3"}),e.jsx("div",{className:"h-3 bg-gray-200 rounded w-full mb-2"}),e.jsx("div",{className:"h-3 bg-gray-200 rounded w-2/3 mb-4"}),e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("div",{className:"h-3 bg-gray-200 rounded w-1/3"}),e.jsx("div",{className:"h-5 w-16 bg-gray-200 rounded-full"})]})]}),C=()=>e.jsxs("div",{className:"bg-gray-50 rounded-lg shadow",children:[e.jsx("div",{className:"bg-gray-200 p-4 rounded-t-lg",children:e.jsx("div",{className:"h-4 bg-gray-300 rounded w-1/2"})}),e.jsxs("div",{className:"p-4",children:[e.jsx(_,{}),e.jsx(_,{}),e.jsx(_,{})]})]});return D&&!N?e.jsx("div",{className:`p-6 min-h-screen ${t?"bg-gray-900":"bg-gray-50"}`,children:e.jsx("div",{className:`${t?"bg-red-900/20 border-red-800":"bg-red-50 border-red-200"} border-2 rounded-xl p-6 ${t?"text-red-400":"text-red-700"}`,children:e.jsxs("div",{className:"flex items-start gap-4",children:[e.jsx("div",{className:"flex-shrink-0",children:e.jsx("i",{className:"fas fa-exclamation-circle text-3xl text-red-500"})}),e.jsxs("div",{className:"flex-1",children:[e.jsx("h3",{className:"text-lg font-bold mb-2",children:"Ø­Ø¯Ø« Ø®Ø·Ø£ Ø£Ø«Ù†Ø§Ø¡ ØªØ­Ù…ÙŠÙ„ Ø§Ù„Ù…Ù‡Ø§Ù…"}),e.jsx("p",{className:"text-sm mb-4",children:D}),e.jsxs("button",{onClick:k,className:`px-4 py-2 ${t?"bg-red-700 hover:bg-red-800":"bg-red-600 hover:bg-red-700"} text-white rounded-lg font-bold transition-all flex items-center gap-2`,children:[e.jsx("i",{className:"fas fa-redo"}),"Ø¥Ø¹Ø§Ø¯Ø© Ø§Ù„Ù…Ø­Ø§ÙˆÙ„Ø©"]})]})]})})}):e.jsxs("div",{className:`min-h-screen transition-colors duration-300 ${t?"bg-gradient-to-br from-gray-900 via-gray-800 to-gray-900":"bg-gradient-to-br from-indigo-50 via-purple-50 to-pink-50"} p-6`,children:[e.jsxs("div",{className:"mb-8",children:[e.jsxs("div",{className:"flex flex-col md:flex-row md:items-center md:justify-between gap-4 mb-6",children:[e.jsxs("div",{children:[e.jsx("h1",{className:`text-4xl font-black mb-2 ${t?"text-transparent bg-clip-text bg-gradient-to-r from-indigo-400 to-purple-400":"text-transparent bg-clip-text bg-gradient-to-r from-indigo-600 to-purple-600"}`,children:"ðŸŽ¯ Ù„ÙˆØ­Ø© Kanban"}),e.jsx("p",{className:t?"text-gray-400":"text-gray-600",children:"Ø¥Ø¯Ø§Ø±Ø© Ù…Ù‡Ø§Ù…Ùƒ Ø¨Ø´ÙƒÙ„ Ù…Ø±Ø¦ÙŠ ÙˆÙØ¹Ø§Ù„"})]}),e.jsxs("div",{className:"flex gap-3",children:[e.jsxs("button",{onClick:()=>b(!0),className:"px-6 py-3 bg-gradient-to-r from-indigo-600 to-purple-600 hover:from-indigo-700 hover:to-purple-700 text-white rounded-xl font-bold shadow-lg hover:shadow-xl transform hover:scale-105 transition-all flex items-center gap-2",title:"Ø§Ø®ØªØµØ§Ø± Ù„ÙˆØ­Ø© Ø§Ù„Ù…ÙØ§ØªÙŠØ­: Ctrl+K",children:[e.jsx("i",{className:"fas fa-plus"}),e.jsx("span",{children:"Ø¥Ø¶Ø§ÙØ© Ù…Ù‡Ù…Ø©"})]}),e.jsxs(F,{to:"/tasks",className:`px-6 py-3 rounded-xl font-bold border-2 shadow-md hover:shadow-lg transform hover:scale-105 transition-all flex items-center gap-2 ${t?"bg-gray-800 hover:bg-gray-700 text-gray-200 border-gray-700 hover:border-indigo-500":"bg-white hover:bg-gray-50 text-gray-700 border-gray-200 hover:border-indigo-300"}`,children:[e.jsx("i",{className:"fas fa-list"}),e.jsx("span",{children:"Ø¹Ø±Ø¶ Ø§Ù„Ù‚Ø§Ø¦Ù…Ø©"})]}),e.jsx("button",{className:`px-4 py-3 rounded-xl font-bold border-2 shadow-md hover:shadow-lg transition-all ${t?"bg-gray-800 hover:bg-gray-700 text-gray-200 border-gray-700 hover:border-indigo-500":"bg-white hover:bg-gray-50 text-gray-700 border-gray-200 hover:border-indigo-300"}`,title:"Ø§Ø®ØªØµØ§Ø±Ø§Øª Ù„ÙˆØ­Ø© Ø§Ù„Ù…ÙØ§ØªÙŠØ­",onClick:()=>{alert(`Ø§Ø®ØªØµØ§Ø±Ø§Øª Ù„ÙˆØ­Ø© Ø§Ù„Ù…ÙØ§ØªÙŠØ­:

Ctrl+K: Ø¥Ø¶Ø§ÙØ© Ù…Ù‡Ù…Ø© Ø¬Ø¯ÙŠØ¯Ø©
Ctrl+F: Ø§Ù„Ø¨Ø­Ø« ÙÙŠ Ø§Ù„Ù…Ù‡Ø§Ù…
Esc: Ø¥ØºÙ„Ø§Ù‚ Ø§Ù„Ù†ÙˆØ§ÙØ° Ø§Ù„Ù…Ù†Ø¨Ø«Ù‚Ø©`)},children:e.jsx("i",{className:"fas fa-keyboard"})})]})]}),!N&&e.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-6 gap-4 mb-6",children:[e.jsxs("div",{className:`rounded-xl p-4 shadow-md border-2 transition-colors ${t?"bg-gray-800 border-indigo-900":"bg-white border-indigo-100"}`,children:[e.jsx("div",{className:`text-2xl font-black ${t?"text-indigo-400":"text-indigo-600"}`,children:m().total}),e.jsx("div",{className:t?"text-sm text-gray-400":"text-sm text-gray-600",children:"Ø¥Ø¬Ù…Ø§Ù„ÙŠ Ø§Ù„Ù…Ù‡Ø§Ù…"})]}),e.jsxs("div",{className:`rounded-xl p-4 shadow-md border-2 transition-colors ${t?"bg-gray-800 border-gray-700":"bg-white border-gray-100"}`,children:[e.jsx("div",{className:`text-2xl font-black ${t?"text-gray-400":"text-gray-600"}`,children:m().pending}),e.jsx("div",{className:t?"text-sm text-gray-400":"text-sm text-gray-600",children:"Ù‚ÙŠØ¯ Ø§Ù„Ø§Ù†ØªØ¸Ø§Ø±"})]}),e.jsxs("div",{className:`rounded-xl p-4 shadow-md border-2 transition-colors ${t?"bg-gray-800 border-blue-900":"bg-white border-blue-100"}`,children:[e.jsx("div",{className:`text-2xl font-black ${t?"text-blue-400":"text-blue-600"}`,children:m().inProgress}),e.jsx("div",{className:t?"text-sm text-gray-400":"text-sm text-gray-600",children:"Ù‚ÙŠØ¯ Ø§Ù„ØªÙ†ÙÙŠØ°"})]}),e.jsxs("div",{className:`rounded-xl p-4 shadow-md border-2 transition-colors ${t?"bg-gray-800 border-green-900":"bg-white border-green-100"}`,children:[e.jsx("div",{className:`text-2xl font-black ${t?"text-green-400":"text-green-600"}`,children:m().completed}),e.jsx("div",{className:t?"text-sm text-gray-400":"text-sm text-gray-600",children:"Ù…ÙƒØªÙ…Ù„Ø©"})]}),e.jsxs("div",{className:`rounded-xl p-4 shadow-md border-2 transition-colors ${t?"bg-gray-800 border-red-900":"bg-white border-red-100"}`,children:[e.jsx("div",{className:`text-2xl font-black ${t?"text-red-400":"text-red-600"}`,children:m().urgent}),e.jsx("div",{className:t?"text-sm text-gray-400":"text-sm text-gray-600",children:"Ø¹Ø§Ø¬Ù„Ø©"})]}),e.jsxs("div",{className:`rounded-xl p-4 shadow-md border-2 transition-colors ${t?"bg-gray-800 border-orange-900":"bg-white border-orange-100"}`,children:[e.jsx("div",{className:`text-2xl font-black ${t?"text-orange-400":"text-orange-600"}`,children:m().high}),e.jsx("div",{className:t?"text-sm text-gray-400":"text-sm text-gray-600",children:"Ø¹Ø§Ù„ÙŠØ©"})]})]}),e.jsxs("div",{className:`flex flex-col md:flex-row gap-4 rounded-xl p-4 shadow-md border-2 transition-colors ${t?"bg-gray-800 border-gray-700":"bg-white border-gray-100"}`,children:[e.jsxs("div",{className:"flex-1 relative",children:[e.jsx("i",{className:`fas fa-search absolute right-4 top-1/2 transform -translate-y-1/2 ${t?"text-gray-500":"text-gray-400"}`}),e.jsx("input",{type:"text",placeholder:"Ø§Ø¨Ø­Ø« ÙÙŠ Ø§Ù„Ù…Ù‡Ø§Ù…...",value:f,onChange:r=>Q(r.target.value),className:`w-full pr-12 pl-4 py-3 border-2 rounded-lg transition-all ${t?"bg-gray-900 border-gray-700 text-gray-200 placeholder-gray-500 focus:border-indigo-500 focus:ring-2 focus:ring-indigo-900":"bg-white border-gray-200 text-gray-900 placeholder-gray-400 focus:border-indigo-500 focus:ring-2 focus:ring-indigo-200"}`})]}),e.jsx("div",{className:"flex gap-2",children:["all","urgent","high","medium","low"].map(r=>e.jsx("button",{onClick:()=>B(r),className:`px-4 py-3 rounded-lg font-bold transition-all ${w===r?"bg-gradient-to-r from-indigo-600 to-purple-600 text-white shadow-lg":t?"bg-gray-700 text-gray-300 hover:bg-gray-600":"bg-gray-100 text-gray-700 hover:bg-gray-200"}`,children:r==="all"?"Ø§Ù„ÙƒÙ„":r==="urgent"?"Ø¹Ø§Ø¬Ù„Ø©":r==="high"?"Ø¹Ø§Ù„ÙŠØ©":r==="medium"?"Ù…ØªÙˆØ³Ø·Ø©":"Ù…Ù†Ø®ÙØ¶Ø©"},r))})]})]}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:N?e.jsxs(e.Fragment,{children:[e.jsx(C,{}),e.jsx(C,{}),e.jsx(C,{})]}):M.map(r=>{const a=R(r.id);return e.jsxs("div",{className:`${r.color} rounded-2xl shadow-xl border-4 ${r.accentColor} transition-all hover:shadow-2xl`,onDragOver:s=>{s.preventDefault(),s.currentTarget.classList.add("ring-4","ring-indigo-400","scale-105")},onDragLeave:s=>{s.currentTarget.classList.remove("ring-4","ring-indigo-400","scale-105")},onDrop:s=>{s.preventDefault(),s.currentTarget.classList.remove("ring-4","ring-indigo-400","scale-105");const i=s.dataTransfer.getData("task-id");z(parseInt(i),r.id)},children:[e.jsxs("div",{className:`${r.headerColor} p-5 rounded-t-xl text-white relative overflow-hidden`,children:[e.jsx("div",{className:"absolute inset-0 bg-white opacity-10 transform -skew-y-3"}),e.jsxs("div",{className:"relative z-10 flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("span",{className:"text-3xl",children:r.icon}),e.jsxs("div",{children:[e.jsx("h2",{className:"font-black text-xl",children:r.title}),e.jsxs("p",{className:"text-xs opacity-90",children:[a.length," Ù…Ù‡Ù…Ø©"]})]})]}),e.jsx("button",{onClick:()=>{$(r.id),b(!0)},className:"w-8 h-8 bg-white/20 hover:bg-white/30 rounded-lg flex items-center justify-center transition-all hover:scale-110",children:e.jsx("i",{className:"fas fa-plus text-sm"})})]})]}),e.jsxs("div",{className:"p-4 min-h-96 max-h-[calc(100vh-400px)] overflow-y-auto custom-scrollbar",children:[a.map((s,i)=>e.jsxs("div",{draggable:!0,onDragStart:g=>{g.dataTransfer.setData("task-id",s.id),L(s),g.currentTarget.style.opacity="0.5"},onDragEnd:g=>{L(null),g.currentTarget.style.opacity="1"},onClick:()=>G(s),className:`rounded-xl shadow-lg p-4 mb-4 cursor-move hover:shadow-2xl transition-all transform hover:-translate-y-1 border-2 group animate-fade-in ${t?"bg-gray-800 border-gray-700 hover:border-indigo-500":"bg-white border-gray-100 hover:border-indigo-300"}`,style:{animationDelay:`${i*50}ms`},children:[e.jsxs("div",{className:"flex items-start justify-between mb-3",children:[e.jsxs("span",{className:`px-3 py-1 text-xs font-bold rounded-full border-2 ${P(s.priority)} flex items-center gap-1`,children:[e.jsx("span",{children:I(s.priority)}),e.jsx("span",{children:s.priority==="urgent"?"Ø¹Ø§Ø¬Ù„Ø©":s.priority==="high"?"Ø¹Ø§Ù„ÙŠØ©":s.priority==="medium"?"Ù…ØªÙˆØ³Ø·Ø©":"Ù…Ù†Ø®ÙØ¶Ø©"})]}),e.jsx("div",{className:"opacity-0 group-hover:opacity-100 transition-opacity",children:e.jsx("i",{className:"fas fa-grip-vertical text-gray-400"})})]}),e.jsx("h3",{className:`font-bold mb-2 text-lg line-clamp-2 ${t?"text-gray-200":"text-gray-900"}`,children:s.title}),s.description&&e.jsx("p",{className:`text-sm mb-4 line-clamp-2 ${t?"text-gray-400":"text-gray-600"}`,children:s.description}),e.jsxs("div",{className:`flex items-center justify-between pt-3 border-t-2 ${t?"border-gray-700":"border-gray-100"}`,children:[e.jsxs("div",{className:"flex items-center gap-2 text-xs text-gray-500",children:[e.jsx("i",{className:"fas fa-calendar-alt"}),e.jsx("span",{children:s.due_date?new Date(s.due_date).toLocaleDateString("ar-SA"):"Ù„Ø§ ÙŠÙˆØ¬Ø¯ ØªØ§Ø±ÙŠØ®"})]}),s.project&&e.jsxs("div",{className:`flex items-center gap-1 text-xs px-2 py-1 rounded-full ${t?"bg-indigo-900/50 text-indigo-300":"bg-indigo-100 text-indigo-700"}`,children:[e.jsx("i",{className:"fas fa-folder"}),e.jsx("span",{className:"truncate max-w-20",children:s.project.name})]})]})]},s.id)),a.length===0&&e.jsxs("div",{className:"text-center py-12",children:[e.jsx("div",{className:"text-6xl mb-4 opacity-20",children:r.icon}),e.jsx("p",{className:"text-gray-400 font-medium",children:"Ù„Ø§ ØªÙˆØ¬Ø¯ Ù…Ù‡Ø§Ù…"}),e.jsx("button",{onClick:()=>{$(r.id),b(!0)},className:`mt-4 px-4 py-2 rounded-lg font-medium border-2 transition-all \${\r
                          darkMode \r
                            ? 'bg-gray-800 hover:bg-gray-700 text-gray-300 border-gray-700 hover:border-indigo-500' \r
                            : 'bg-white hover:bg-gray-50 text-gray-700 border-gray-200 hover:border-indigo-300'\r
                        }`,children:"Ø¥Ø¶Ø§ÙØ© Ù…Ø§ Ù‡Ù…Ø© +"})]})]})]},r.id)})}),E&&l&&e.jsx(O,{isOpen:E,onClose:()=>j(!1),title:"ØªÙØ§ØµÙŠÙ„ Ø§Ù„Ù…Ù‡Ù…Ø©",children:e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("h3",{className:`text-2xl font-bold mb-2 ${t?"text-gray-200":"text-gray-900"}`,children:l.title}),e.jsxs("div",{className:"flex gap-2 mb-4",children:[e.jsxs("span",{className:`px-3 py-1 text-xs font-bold rounded-full border-2 ${P(l.priority)}`,children:[I(l.priority)," ",l.priority==="urgent"?"Ø¹Ø§Ø¬Ù„Ø©":l.priority==="high"?"Ø¹Ø§Ù„ÙŠØ©":l.priority==="medium"?"Ù…ØªÙˆØ³Ø·Ø©":"Ù…Ù†Ø®ÙØ¶Ø©"]}),e.jsx("span",{className:`px-3 py-1 text-xs font-bold rounded-full border-2 ${t?"bg-blue-900/50 text-blue-300 border-blue-700":"bg-blue-100 text-blue-800 border-blue-300"}`,children:l.status==="pending"?"Ù‚ÙŠØ¯ Ø§Ù„Ø§Ù†ØªØ¸Ø§Ø±":l.status==="in_progress"?"Ù‚ÙŠØ¯ Ø§Ù„ØªÙ†ÙÙŠØ°":"Ù…ÙƒØªÙ…Ù„Ø©"})]})]}),l.description&&e.jsxs("div",{className:`rounded-lg p-4 ${t?"bg-gray-900/50":"bg-gray-50"}`,children:[e.jsx("h4",{className:`font-bold mb-2 ${t?"text-gray-300":"text-gray-700"}`,children:"Ø§Ù„ÙˆØµÙ:"}),e.jsx("p",{className:t?"text-gray-400":"text-gray-600",children:l.description})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{className:`rounded-lg p-4 ${t?"bg-indigo-900/30":"bg-indigo-50"}`,children:[e.jsx("div",{className:`text-sm mb-1 ${t?"text-indigo-400":"text-indigo-600"}`,children:"ØªØ§Ø±ÙŠØ® Ø§Ù„Ø§Ø³ØªØ­Ù‚Ø§Ù‚"}),e.jsx("div",{className:`font-bold ${t?"text-gray-200":"text-gray-900"}`,children:l.due_date?new Date(l.due_date).toLocaleDateString("ar-SA"):"Ù„Ø§ ÙŠÙˆØ¬Ø¯"})]}),l.project&&e.jsxs("div",{className:`rounded-lg p-4 ${t?"bg-purple-900/30":"bg-purple-50"}`,children:[e.jsx("div",{className:`text-sm mb-1 ${t?"text-purple-400":"text-purple-600"}`,children:"Ø§Ù„Ù…Ø´Ø±ÙˆØ¹"}),e.jsx("div",{className:`font-bold ${t?"text-gray-200":"text-gray-900"}`,children:l.project.name})]})]}),e.jsxs("div",{className:"flex gap-3 pt-4",children:[e.jsx(F,{to:`/tasks/${l.id}`,className:"flex-1 px-4 py-3 bg-gradient-to-r from-indigo-600 to-purple-600 hover:from-indigo-700 hover:to-purple-700 text-white rounded-lg font-bold text-center transition-all",children:"ðŸ“ ØªØ¹Ø¯ÙŠÙ„ Ø§Ù„Ù…Ù‡Ù…Ø©"}),e.jsx("button",{onClick:()=>j(!1),className:`px-6 py-3 rounded-lg font-bold transition-all ${t?"bg-gray-700 hover:bg-gray-600 text-gray-200":"bg-gray-200 hover:bg-gray-300 text-gray-700"}`,children:"Ø¥ØºÙ„Ø§Ù‚"})]})]})}),v&&e.jsx(O,{isOpen:v,onClose:()=>b(!1),title:"Ø¥Ø¶Ø§ÙØ© Ù…Ù‡Ù…Ø© Ø¬Ø¯ÙŠØ¯Ø©",children:e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:`block text-sm font-bold mb-2 ${t?"text-gray-300":"text-gray-700"}`,children:"Ø¹Ù†ÙˆØ§Ù† Ø§Ù„Ù…Ù‡Ù…Ø©"}),e.jsx("input",{type:"text",value:o.title,onChange:r=>c({...o,title:r.target.value}),className:`w-full px-4 py-3 border-2 rounded-lg transition-all ${t?"bg-gray-900 border-gray-700 text-gray-200 placeholder-gray-500 focus:border-indigo-500 focus:ring-2 focus:ring-indigo-900":"bg-white border-gray-200 text-gray-900 placeholder-gray-400 focus:border-indigo-500 focus:ring-2 focus:ring-indigo-200"}`,placeholder:"Ø£Ø¯Ø®Ù„ Ø¹Ù†ÙˆØ§Ù† Ø§Ù„Ù…Ù‡Ù…Ø©..."})]}),e.jsxs("div",{children:[e.jsx("label",{className:`block text-sm font-bold mb-2 ${t?"text-gray-300":"text-gray-700"}`,children:"Ø§Ù„ÙˆØµÙ"}),e.jsx("textarea",{value:o.description,onChange:r=>c({...o,description:r.target.value}),className:`w-full px-4 py-3 border-2 rounded-lg transition-all ${t?"bg-gray-900 border-gray-700 text-gray-200 placeholder-gray-500 focus:border-indigo-500 focus:ring-2 focus:ring-indigo-900":"bg-white border-gray-200 text-gray-900 placeholder-gray-400 focus:border-indigo-500 focus:ring-2 focus:ring-indigo-200"}`,rows:"3",placeholder:"ÙˆØµÙ Ø§Ù„Ù…Ù‡Ù…Ø©..."})]}),e.jsxs("div",{children:[e.jsx("label",{className:`block text-sm font-bold mb-2 ${t?"text-gray-300":"text-gray-700"}`,children:"Ù…ØµØ¯Ø± Ø§Ù„Ù…Ù‡Ù…Ø©"}),e.jsxs("select",{value:o.source_type,onChange:r=>c({...o,source_type:r.target.value,course_id:"",lesson_id:""}),className:`w-full px-4 py-3 border-2 rounded-lg transition-all ${t?"bg-gray-900 border-gray-700 text-gray-200 focus:border-indigo-500 focus:ring-2 focus:ring-indigo-900":"bg-white border-gray-200 text-gray-900 focus:border-indigo-500 focus:ring-2 focus:ring-indigo-200"}`,children:[e.jsx("option",{value:"none",children:"Ù…Ø³ØªÙ‚Ù„Ø©"}),e.jsx("option",{value:"lesson",children:"Ø¯Ø±Ø³"})]})]}),o.source_type==="lesson"&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{children:[e.jsx("label",{className:`block text-sm font-bold mb-2 ${t?"text-gray-300":"text-gray-700"}`,children:"Ø§Ù„Ø¯ÙˆØ±Ø©"}),e.jsxs("select",{value:o.course_id,onChange:r=>c({...o,course_id:r.target.value,lesson_id:""}),className:`w-full px-4 py-3 border-2 rounded-lg transition-all ${t?"bg-gray-900 border-gray-700 text-gray-200 focus:border-indigo-500 focus:ring-2 focus:ring-indigo-900":"bg-white border-gray-200 text-gray-900 focus:border-indigo-500 focus:ring-2 focus:ring-indigo-200"}`,children:[e.jsx("option",{value:"",children:"Ø§Ø®ØªØ± Ø¯ÙˆØ±Ø©"}),K.courses.map(r=>e.jsx("option",{value:r.id,children:r.name},r.id))]})]}),o.course_id&&e.jsx("div",{children:e.jsx(Y,{label:"Ø§Ù„Ø¯Ø±Ø³",value:o.lesson_id,onChange:r=>c({...o,lesson_id:r}),options:K.lessons.map(r=>({value:r.id,label:r.name,name:r.name})),placeholder:"Ø§Ø®ØªØ± Ø¯Ø±Ø³Ø§Ù‹",searchPlaceholder:"Ø§Ø¨Ø­Ø« Ø¹Ù† Ø¯Ø±Ø³...",emptyMessage:"Ù„Ø§ ØªÙˆØ¬Ø¯ Ø¯Ø±ÙˆØ³ Ù…ØªØ§Ø­Ø©"})}),o.source_type==="lesson"&&!o.course_id&&e.jsx("div",{className:`p-3 rounded-lg border-2 ${t?"bg-gray-800/50 border-gray-700 text-gray-400":"bg-gray-50 border-gray-200 text-gray-500"}`,children:e.jsx("p",{className:"text-sm text-center",children:"ÙŠØ±Ø¬Ù‰ Ø§Ø®ØªÙŠØ§Ø± Ø§Ù„Ø¯ÙˆØ±Ø© Ø£ÙˆÙ„Ø§Ù‹ Ù„Ø¹Ø±Ø¶ Ø§Ù„Ø¯Ø±ÙˆØ³ Ø§Ù„Ù…ØªØ§Ø­Ø©"})})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:`block text-sm font-bold mb-2 ${t?"text-gray-300":"text-gray-700"}`,children:"Ø§Ù„Ø£ÙˆÙ„ÙˆÙŠØ©"}),e.jsxs("select",{value:o.priority,onChange:r=>c({...o,priority:r.target.value}),className:`w-full px-4 py-3 border-2 rounded-lg transition-all ${t?"bg-gray-900 border-gray-700 text-gray-200 focus:border-indigo-500 focus:ring-2 focus:ring-indigo-900":"bg-white border-gray-200 text-gray-900 focus:border-indigo-500 focus:ring-2 focus:ring-indigo-200"}`,children:[e.jsx("option",{value:"low",children:"Ù…Ù†Ø®ÙØ¶Ø©"}),e.jsx("option",{value:"medium",children:"Ù…ØªÙˆØ³Ø·Ø©"}),e.jsx("option",{value:"high",children:"Ø¹Ø§Ù„ÙŠØ©"}),e.jsx("option",{value:"urgent",children:"Ø¹Ø§Ø¬Ù„Ø©"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:`block text-sm font-bold mb-2 ${t?"text-gray-300":"text-gray-700"}`,children:"ØªØ§Ø±ÙŠØ® Ø§Ù„Ø§Ø³ØªØ­Ù‚Ø§Ù‚"}),e.jsx("input",{type:"date",value:o.due_date,onChange:r=>c({...o,due_date:r.target.value}),className:`w-full px-4 py-3 border-2 rounded-lg transition-all ${t?"bg-gray-900 border-gray-700 text-gray-200 focus:border-indigo-500 focus:ring-2 focus:ring-indigo-900":"bg-white border-gray-200 text-gray-900 focus:border-indigo-500 focus:ring-2 focus:ring-indigo-200"}`})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:`block text-sm font-bold mb-2 ${t?"text-gray-300":"text-gray-700"}`,children:"Ø§Ù„Ø­Ø§Ù„Ø©"}),e.jsx("div",{className:"flex gap-2",children:M.map(r=>e.jsxs("button",{onClick:()=>$(r.id),className:`flex-1 px-4 py-3 rounded-lg font-bold transition-all ${A===r.id?"bg-gradient-to-r from-indigo-600 to-purple-600 text-white shadow-lg":t?"bg-gray-700 text-gray-300 hover:bg-gray-600":"bg-gray-100 text-gray-700 hover:bg-gray-200"}`,children:[r.icon," ",r.title]},r.id))})]}),e.jsxs("div",{className:"flex gap-3 pt-4",children:[e.jsx("button",{onClick:U,disabled:!o.title.trim(),className:"flex-1 px-4 py-3 bg-gradient-to-r from-indigo-600 to-purple-600 hover:from-indigo-700 hover:to-purple-700 text-white rounded-lg font-bold disabled:opacity-50 disabled:cursor-not-allowed transition-all",children:"âœ… Ø¥Ø¶Ø§ÙØ© Ø§Ù„Ù…Ù‡Ù…Ø©"}),e.jsx("button",{onClick:()=>b(!1),className:`px-6 py-3 rounded-lg font-bold transition-all ${t?"bg-gray-700 hover:bg-gray-600 text-gray-200":"bg-gray-200 hover:bg-gray-300 text-gray-700"}`,children:"Ø¥Ù„ØºØ§Ø¡"})]})]})})]})};export{ne as default};
