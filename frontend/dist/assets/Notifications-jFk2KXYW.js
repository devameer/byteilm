import{j as t}from"./charts-VrJjKkAO.js";import{r as o}from"./vendor-xoa7E_IC.js";import{u as h,n as d,d as E}from"./index-DX6VYCbL.js";function $(){const{darkMode:a}=h(),[c,l]=o.useState([]),[y,m]=o.useState(!0),[n,b]=o.useState(1),[i,f]=o.useState(1),p=a?"text-gray-100":"text-gray-900",x=a?"text-gray-400":"text-gray-500",N=a?"text-gray-300":"text-gray-700",j=a?"bg-gray-800":"bg-white",u=a?"border-gray-600 text-gray-300 bg-gray-800 hover:bg-gray-700":"border-gray-300 text-gray-700 bg-white hover:bg-gray-50";o.useEffect(()=>{w()},[n]);const w=async()=>{try{m(!0);const e=await d.getNotifications(n);l(e.data||[]),f(e.last_page||1)}catch(e){if((e==null?void 0:e.name)==="CanceledError"||(e==null?void 0:e.code)==="ERR_CANCELED")return;console.error("Failed to fetch notifications:",e)}finally{m(!1)}},v=async e=>{try{await d.deleteNotification(e),l(s=>s.filter(r=>r.id!==e))}catch(s){if((s==null?void 0:s.name)==="CanceledError"||(s==null?void 0:s.code)==="ERR_CANCELED")return;console.error("Failed to delete notification:",s)}},C=async(e,s)=>{if(!s)try{await d.markAsRead(e),l(r=>r.map(g=>g.id===e?{...g,read_at:new Date().toISOString()}:g))}catch(r){if((r==null?void 0:r.name)==="CanceledError"||(r==null?void 0:r.code)==="ERR_CANCELED")return;console.error("Failed to mark as read:",r)}},_=e=>({task_created:a?"bg-blue-900/50 text-blue-300":"bg-blue-100 text-blue-800",task_completed:a?"bg-green-900/50 text-green-300":"bg-green-100 text-green-800",lesson_completed:a?"bg-purple-900/50 text-purple-300":"bg-purple-100 text-purple-800",course_completed:a?"bg-yellow-900/50 text-yellow-300":"bg-yellow-100 text-yellow-800",project_created:a?"bg-indigo-900/50 text-indigo-300":"bg-indigo-100 text-indigo-800",team_invitation:a?"bg-pink-900/50 text-pink-300":"bg-pink-100 text-pink-800",referral_success:a?"bg-orange-900/50 text-orange-300":"bg-orange-100 text-orange-800"})[e]||(a?"bg-gray-700 text-gray-300":"bg-gray-100 text-gray-800"),k=e=>new Date(e).toLocaleString("en-US",{month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"});return y&&n===1?t.jsx("div",{className:"flex justify-center items-center h-64",children:t.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-indigo-600"})}):t.jsxs("div",{className:"max-w-4xl mx-auto p-6",children:[t.jsxs("div",{className:"flex items-center justify-between mb-6",children:[t.jsx("h1",{className:`text-2xl font-bold ${p}`,children:"All Notifications"}),c.length>0&&t.jsx("button",{onClick:async()=>{await d.clearAll(),l([])},className:"text-sm text-red-600 hover:text-red-800",children:"Clear all"})]}),c.length===0?t.jsx("div",{className:"text-center py-12",children:t.jsx("p",{className:x,children:"No notifications yet"})}):t.jsxs(t.Fragment,{children:[t.jsx("div",{className:"space-y-4",children:c.map(e=>t.jsx("div",{className:`${j} rounded-lg shadow p-4 border-l-4 ${e.read_at?a?"border-gray-600 opacity-75":"border-gray-300 opacity-75":"border-indigo-600"} hover:shadow-md transition-shadow cursor-pointer`,onClick:()=>C(e.id,!!e.read_at),children:t.jsxs("div",{className:"flex items-start justify-between",children:[t.jsxs("div",{className:"flex-1",children:[t.jsxs("div",{className:"flex items-center space-x-2 mb-2",children:[t.jsx("span",{className:`px-2 py-1 text-xs font-semibold rounded ${_(e.type)}`,children:e.type.replace(/_/g," ").toUpperCase()}),!e.read_at&&t.jsx("span",{className:"inline-flex items-center px-2 py-1 text-xs font-semibold text-white bg-blue-600 rounded",children:"NEW"})]}),t.jsx("h3",{className:`text-lg font-semibold ${p} mb-1`,children:e.title}),e.message&&t.jsx("p",{className:`${N} mb-2`,children:e.message}),t.jsx("p",{className:`text-sm ${x}`,children:k(e.created_at)})]}),t.jsx("button",{onClick:s=>{s.stopPropagation(),v(e.id)},className:`ml-4 ${a?"text-gray-500 hover:text-red-400":"text-gray-400 hover:text-red-600"}`,children:t.jsx(E,{className:"h-5 w-5"})})]})},e.id))}),i>1&&t.jsxs("div",{className:"mt-6 flex justify-center space-x-2",children:[t.jsx("button",{onClick:()=>b(e=>Math.max(1,e-1)),disabled:n===1,className:`px-4 py-2 border rounded-md text-sm font-medium ${u} disabled:opacity-50 disabled:cursor-not-allowed`,children:"Previous"}),t.jsxs("span",{className:`px-4 py-2 text-sm ${x}`,children:["Page ",n," of ",i]}),t.jsx("button",{onClick:()=>b(e=>Math.min(i,e+1)),disabled:n===i,className:`px-4 py-2 border rounded-md text-sm font-medium ${u} disabled:opacity-50 disabled:cursor-not-allowed`,children:"Next"})]})]})]})}function A(){const{darkMode:a}=h();return t.jsx("div",{className:`min-h-screen transition-colors duration-300 ${a?"bg-gray-900":"bg-gray-50"}`,children:t.jsx($,{})})}export{A as default};
